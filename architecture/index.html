
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Neural network model management and inference serving microservice for MiraVeja">
      
      
        <meta name="author" content="Jomar JÃºnior de Souza Pereira">
      
      
        <link rel="canonical" href="https://jomarjunior.github.io/modelmora/architecture/">
      
      
        <link rel="prev" href="../rfc/%231%20-%20RFC%20Writting%20Patterns/">
      
      
        <link rel="next" href="../design-decisions/">
      
      
        
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>Overview - ModelMora Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../assets/mkdocs_puml/puml.css">
    
      <link rel="stylesheet" href="../assets/mkdocs_puml/interaction.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#modelmora-system-architecture-document" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="ModelMora Documentation" class="md-header__button md-logo" aria-label="ModelMora Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ModelMora Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Overview
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/JomarJunior/modelmora" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    JomarJunior/modelmora
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../getting-started/installation/" class="md-tabs__link">
          
  
  
  Getting Started

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../rfc/%231%20-%20RFC%20Writting%20Patterns/" class="md-tabs__link">
          
  
  
  RFCs

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
  
  Architecture

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../api-reference/rest/" class="md-tabs__link">
          
  
  
  API Reference

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../roadmap/" class="md-tabs__link">
          
  
  
  Development

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../deployment/docker/" class="md-tabs__link">
          
  
  
  Deployment

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="ModelMora Documentation" class="md-nav__button md-logo" aria-label="ModelMora Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    ModelMora Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/JomarJunior/modelmora" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    JomarJunior/modelmora
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Getting Started
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/quickstart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quick Start
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Configuration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    RFCs
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    RFCs
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../rfc/%231%20-%20RFC%20Writting%20Patterns/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    RFC Writing Patterns
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Architecture
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-introduction" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Introduction
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-purpose" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.1 Purpose
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-architectural-principles" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.2 Architectural Principles
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13-architecture-overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.3 Architecture Overview
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#14-poc-validated-architecture-decisions" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.4 POC-Validated Architecture Decisions
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-bounded-contexts" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Bounded Contexts
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Bounded Contexts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-registry-context" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.1 Registry Context
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-lifecycle-context" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.2 Lifecycle Context
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-inference-context" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.3 Inference Context
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24-observability-context" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.4 Observability Context
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-hexagonal-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Hexagonal Architecture
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Hexagonal Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-ports-interfaces" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.1 Ports (Interfaces)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.1 Ports (Interfaces)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#primary-ports-driving" class="md-nav__link">
    <span class="md-ellipsis">
      
        Primary Ports (Driving)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secondary-ports-driven" class="md-nav__link">
    <span class="md-ellipsis">
      
        Secondary Ports (Driven)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-adapters" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.2 Adapters
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.2 Adapters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#primary-adapters-input" class="md-nav__link">
    <span class="md-ellipsis">
      
        Primary Adapters (Input)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secondary-adapters-output" class="md-nav__link">
    <span class="md-ellipsis">
      
        Secondary Adapters (Output)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-component-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Component Architecture
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Component Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-high-level-component-diagram" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.1 High-Level Component Diagram
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-directory-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.2 Directory Structure
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-key-workflows" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Key Workflows
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. Key Workflows">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-model-registration-flow" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.1 Model Registration Flow
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-lazy-model-loading-flow" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.2 Lazy Model Loading Flow
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53-asynchronous-inference-flow" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.3 Asynchronous Inference Flow
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#54-batch-accumulation-flow" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.4 Batch Accumulation Flow
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#55-lru-eviction-flow" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.5 LRU Eviction Flow
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-data-flow-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        6. Data Flow Architecture
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. Data Flow Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#61-request-processing-data-flow" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.1 Request Processing Data Flow
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#62-model-download-data-flow" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.2 Model Download Data Flow
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-deployment-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        7. Deployment Architecture
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7. Deployment Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#71-single-node-deployment-mvp" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.1 Single-Node Deployment (MVP)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#72-kubernetes-deployment-production" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.2 Kubernetes Deployment (Production)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#73-container-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.3 Container Architecture
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-testing-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      
        8. Testing Strategy
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="8. Testing Strategy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#81-test-pyramid" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.1 Test Pyramid
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#82-unit-tests-75" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.2 Unit Tests (75%)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#83-integration-tests-20" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.3 Integration Tests (20%)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#84-end-to-end-tests-5" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.4 End-to-End Tests (5%)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9-deployment-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        9. Deployment Configuration
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="9. Deployment Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#91-docker-compose-development" class="md-nav__link">
    <span class="md-ellipsis">
      
        9.1 Docker Compose (Development)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#92-kubernetes-helm-values" class="md-nav__link">
    <span class="md-ellipsis">
      
        9.2 Kubernetes Helm Values
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#10-security-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        10. Security Architecture
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="10. Security Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#101-security-layers" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.1 Security Layers
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#102-security-sequence" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.2 Security Sequence
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#11-performance-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      
        11. Performance Considerations
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="11. Performance Considerations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#111-optimization-strategies" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.1 Optimization Strategies
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#112-resource-management" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.2 Resource Management
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#12-monitoring-observability" class="md-nav__link">
    <span class="md-ellipsis">
      
        12. Monitoring &amp; Observability
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="12. Monitoring &amp; Observability">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#121-key-metrics" class="md-nav__link">
    <span class="md-ellipsis">
      
        12.1 Key Metrics
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#122-alerting-rules" class="md-nav__link">
    <span class="md-ellipsis">
      
        12.2 Alerting Rules
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#13-evolution-future-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        13. Evolution &amp; Future Architecture
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="13. Evolution &amp; Future Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#131-planned-enhancements" class="md-nav__link">
    <span class="md-ellipsis">
      
        13.1 Planned Enhancements
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#132-architectural-flexibility" class="md-nav__link">
    <span class="md-ellipsis">
      
        13.2 Architectural Flexibility
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#14-revision-history" class="md-nav__link">
    <span class="md-ellipsis">
      
        14. Revision History
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../design-decisions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Design Decisions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../data_models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Data Models
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    API Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api-reference/rest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    REST API
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api-reference/grpc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    gRPC API
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Development
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Development
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../roadmap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Roadmap
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../requirements/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Requirements
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contributing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Deployment
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Deployment
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../deployment/docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Docker
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../deployment/kubernetes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Kubernetes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-introduction" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Introduction
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-purpose" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.1 Purpose
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-architectural-principles" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.2 Architectural Principles
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13-architecture-overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.3 Architecture Overview
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#14-poc-validated-architecture-decisions" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.4 POC-Validated Architecture Decisions
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-bounded-contexts" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Bounded Contexts
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Bounded Contexts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-registry-context" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.1 Registry Context
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-lifecycle-context" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.2 Lifecycle Context
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-inference-context" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.3 Inference Context
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24-observability-context" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.4 Observability Context
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-hexagonal-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Hexagonal Architecture
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Hexagonal Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-ports-interfaces" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.1 Ports (Interfaces)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.1 Ports (Interfaces)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#primary-ports-driving" class="md-nav__link">
    <span class="md-ellipsis">
      
        Primary Ports (Driving)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secondary-ports-driven" class="md-nav__link">
    <span class="md-ellipsis">
      
        Secondary Ports (Driven)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-adapters" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.2 Adapters
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.2 Adapters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#primary-adapters-input" class="md-nav__link">
    <span class="md-ellipsis">
      
        Primary Adapters (Input)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secondary-adapters-output" class="md-nav__link">
    <span class="md-ellipsis">
      
        Secondary Adapters (Output)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-component-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Component Architecture
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Component Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-high-level-component-diagram" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.1 High-Level Component Diagram
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-directory-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.2 Directory Structure
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-key-workflows" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Key Workflows
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. Key Workflows">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-model-registration-flow" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.1 Model Registration Flow
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-lazy-model-loading-flow" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.2 Lazy Model Loading Flow
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53-asynchronous-inference-flow" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.3 Asynchronous Inference Flow
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#54-batch-accumulation-flow" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.4 Batch Accumulation Flow
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#55-lru-eviction-flow" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.5 LRU Eviction Flow
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-data-flow-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        6. Data Flow Architecture
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. Data Flow Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#61-request-processing-data-flow" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.1 Request Processing Data Flow
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#62-model-download-data-flow" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.2 Model Download Data Flow
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-deployment-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        7. Deployment Architecture
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7. Deployment Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#71-single-node-deployment-mvp" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.1 Single-Node Deployment (MVP)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#72-kubernetes-deployment-production" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.2 Kubernetes Deployment (Production)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#73-container-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.3 Container Architecture
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-testing-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      
        8. Testing Strategy
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="8. Testing Strategy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#81-test-pyramid" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.1 Test Pyramid
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#82-unit-tests-75" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.2 Unit Tests (75%)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#83-integration-tests-20" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.3 Integration Tests (20%)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#84-end-to-end-tests-5" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.4 End-to-End Tests (5%)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9-deployment-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        9. Deployment Configuration
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="9. Deployment Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#91-docker-compose-development" class="md-nav__link">
    <span class="md-ellipsis">
      
        9.1 Docker Compose (Development)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#92-kubernetes-helm-values" class="md-nav__link">
    <span class="md-ellipsis">
      
        9.2 Kubernetes Helm Values
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#10-security-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        10. Security Architecture
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="10. Security Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#101-security-layers" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.1 Security Layers
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#102-security-sequence" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.2 Security Sequence
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#11-performance-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      
        11. Performance Considerations
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="11. Performance Considerations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#111-optimization-strategies" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.1 Optimization Strategies
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#112-resource-management" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.2 Resource Management
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#12-monitoring-observability" class="md-nav__link">
    <span class="md-ellipsis">
      
        12. Monitoring &amp; Observability
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="12. Monitoring &amp; Observability">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#121-key-metrics" class="md-nav__link">
    <span class="md-ellipsis">
      
        12.1 Key Metrics
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#122-alerting-rules" class="md-nav__link">
    <span class="md-ellipsis">
      
        12.2 Alerting Rules
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#13-evolution-future-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        13. Evolution &amp; Future Architecture
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="13. Evolution &amp; Future Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#131-planned-enhancements" class="md-nav__link">
    <span class="md-ellipsis">
      
        13.1 Planned Enhancements
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#132-architectural-flexibility" class="md-nav__link">
    <span class="md-ellipsis">
      
        13.2 Architectural Flexibility
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#14-revision-history" class="md-nav__link">
    <span class="md-ellipsis">
      
        14. Revision History
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="modelmora-system-architecture-document">ModelMora - System Architecture Document<a class="headerlink" href="#modelmora-system-architecture-document" title="Permanent link">&para;</a></h1>
<p><strong>Version:</strong> 1.0.0
<strong>Date:</strong> 2025-12-04
<strong>Status:</strong> Draft</p>
<hr />
<h2 id="1-introduction">1. Introduction<a class="headerlink" href="#1-introduction" title="Permanent link">&para;</a></h2>
<h3 id="11-purpose">1.1 Purpose<a class="headerlink" href="#11-purpose" title="Permanent link">&para;</a></h3>
<p>This document describes the system architecture for ModelMora, a lightweight model serving framework. It defines the bounded contexts, architectural patterns, component interactions, and deployment strategy.</p>
<h3 id="12-architectural-principles">1.2 Architectural Principles<a class="headerlink" href="#12-architectural-principles" title="Permanent link">&para;</a></h3>
<p>ModelMora follows these core principles:</p>
<ul>
<li><strong>Domain-Driven Design (DDD)</strong>: Clear bounded contexts with ubiquitous language</li>
<li><strong>Hexagonal Architecture (Ports &amp; Adapters)</strong>: Separation of business logic from infrastructure</li>
<li><strong>Test-Driven Development (TDD)</strong>: Test-first approach with high coverage</li>
<li><strong>Single Responsibility</strong>: Each component has one clear purpose</li>
<li><strong>Dependency Inversion</strong>: High-level modules don't depend on low-level modules</li>
<li><strong>SOLID Principles</strong>: Maintainable, extensible codebase</li>
</ul>
<h3 id="13-architecture-overview">1.3 Architecture Overview<a class="headerlink" href="#13-architecture-overview" title="Permanent link">&para;</a></h3>
<p>ModelMora uses a <strong>layered hexagonal architecture</strong> with the following characteristics:</p>
<ul>
<li><strong>Domain Layer</strong>: Pure business logic, no external dependencies</li>
<li><strong>Application Layer</strong>: Command handlers and orchestration</li>
<li><strong>Infrastructure Layer</strong>: External integrations (database, filesystem, HTTP)</li>
<li><strong>Presentation Layer</strong>: API interfaces (REST, gRPC, CLI)</li>
</ul>
<h3 id="14-poc-validated-architecture-decisions">1.4 POC-Validated Architecture Decisions<a class="headerlink" href="#14-poc-validated-architecture-decisions" title="Permanent link">&para;</a></h3>
<p>The following critical architecture decisions were validated through production-level POCs (Phase 0.3):</p>
<p><strong>1. Multi-Process Worker Architecture</strong> â <strong>(POC 1: Memory Isolation)</strong></p>
<ul>
<li><strong>Decision</strong>: One model per subprocess, terminate process to unload</li>
<li><strong>Validation</strong>: Subprocess achieves <strong>5000x better memory reclamation</strong> (0.1MB leak vs 516MB with GC)</li>
<li><strong>Impact</strong>: Ensures reliable memory cleanup, prevents gradual memory exhaustion</li>
<li><strong>Implementation</strong>: <code>multiprocessing.Process</code> per model, IPC via queues/pipes</li>
</ul>
<p><strong>2. Lazy Loading Strategy</strong> â <strong>(POC 3: Model Lifecycle)</strong></p>
<ul>
<li><strong>Decision</strong>: Load models on first request, not at startup</li>
<li><strong>Validation</strong>: Load time <strong>2s</strong> for small-medium models (acceptable latency)</li>
<li><strong>Impact</strong>: Reduces startup time, optimizes memory usage</li>
<li><strong>Fallback</strong>: Warmup endpoint for pre-loading critical models</li>
</ul>
<p><strong>3. asyncio.PriorityQueue for Request Scheduling</strong> â <strong>(POC 4: Priority Queue)</strong></p>
<ul>
<li><strong>Decision</strong>: Use <code>asyncio.PriorityQueue</code> with 4 priority levels</li>
<li><strong>Validation</strong>: <strong>730,108 ops/sec</strong> throughput, <strong>0.7Î¼s</strong> latency, <strong>100%</strong> priority correctness</li>
<li><strong>Impact</strong>: 730x headroom above target (1,000 req/sec), negligible overhead</li>
<li><strong>Priority Levels</strong>: CRITICAL(1), HIGH(2), NORMAL(3), LOW(4)</li>
</ul>
<p><strong>4. gRPC for Streaming Large Payloads</strong> â <strong>(POC 2: gRPC Streaming)</strong></p>
<ul>
<li><strong>Decision</strong>: gRPC for image generation, REST for simple queries</li>
<li><strong>Validation</strong>: <strong>31.92 MB/s</strong> single client, <strong>33.31 MB/s</strong> concurrent, <strong>23.53ms</strong> latency</li>
<li><strong>Impact</strong>: Efficient streaming, acceptable performance for large payloads</li>
<li><strong>Protocol</strong>: Protocol Buffers with server-side streaming</li>
</ul>
<p><strong>Performance Benchmarks:</strong></p>
<ul>
<li>Model load time: 2s (cached)</li>
<li>Queue latency: &lt;1Î¼s (0.0002% of total request time)</li>
<li>Memory per model: 90-500MB (plan for 1.5x = 135-750MB per worker)</li>
<li>Memory leak: 0.1MB/unload (subprocess) vs 516MB/unload (GC) â <strong>subprocess mandatory</strong></li>
</ul>
<hr />
<h2 id="2-bounded-contexts">2. Bounded Contexts<a class="headerlink" href="#2-bounded-contexts" title="Permanent link">&para;</a></h2>
<p>Following DDD principles, ModelMora is organized into four bounded contexts:</p>
<h3 id="21-registry-context">2.1 Registry Context<a class="headerlink" href="#21-registry-context" title="Permanent link">&para;</a></h3>
<p><strong>Responsibility</strong>: Model catalog management, versioning, and metadata storage.</p>
<p><strong>Core Entities</strong>:</p>
<ul>
<li><code>Model</code>: Represents a machine learning model with metadata</li>
<li><code>ModelVersion</code>: Specific version of a model</li>
<li><code>ModelLock</code>: Lock file entry for reproducible deployments</li>
<li><code>ModelConfig</code>: Curated configuration for model capabilities</li>
</ul>
<p><strong>Value Objects</strong>:</p>
<ul>
<li><code>ModelId</code>: HuggingFace identifier</li>
<li><code>TaskType</code>: Enumeration of supported tasks</li>
<li><code>ResourceRequirements</code>: Memory and compute specifications</li>
<li><code>Checksum</code>: SHA256 hash for integrity</li>
</ul>
<p><strong>Aggregates</strong>:</p>
<ul>
<li><code>ModelCatalog</code>: Root aggregate managing model collection</li>
</ul>
<p><strong>Domain Events</strong>:</p>
<ul>
<li><code>ModelRegistered</code></li>
<li><code>ModelVersionChanged</code></li>
<li><code>ModelDeleted</code></li>
<li><code>ModelDownloadRequested</code></li>
</ul>
<p><strong>Repositories</strong>:</p>
<ul>
<li><code>IModelRepository</code>: Interface for model persistence</li>
<li><code>ILockFileRepository</code>: Interface for lock file operations</li>
</ul>
<p><strong>Handlers</strong>:</p>
<ul>
<li><code>RegisterModelHandler</code>: Handles model registration</li>
<li><code>ListModelsHandler</code>: Handles model listing with filters</li>
<li><code>GetModelHandler</code>: Handles retrieving model details</li>
<li><code>UpdateModelHandler</code>: Handles model configuration updates</li>
<li><code>DeleteModelHandler</code>: Handles model deletion</li>
<li><code>GenerateLockHandler</code>: Handles lock file generation</li>
<li><code>DownloadModelHandler</code>: Handles model downloading</li>
</ul>
<hr />
<h3 id="22-lifecycle-context">2.2 Lifecycle Context<a class="headerlink" href="#22-lifecycle-context" title="Permanent link">&para;</a></h3>
<p><strong>Responsibility</strong>: Model loading, unloading, memory management, and health monitoring.</p>
<p><strong>Core Entities</strong>:</p>
<ul>
<li><code>LoadedModel</code>: A model instance in memory</li>
<li><code>ModelProcess</code>: Worker process managing model execution</li>
<li><code>MemoryMonitor</code>: Tracks memory usage</li>
</ul>
<p><strong>Value Objects</strong>:</p>
<ul>
<li><code>ModelState</code>: Enumeration (UNLOADED, LOADING, LOADED, UNHEALTHY)</li>
<li><code>MemoryUsage</code>: Current memory metrics</li>
<li><code>HealthStatus</code>: Health check results</li>
</ul>
<p><strong>Aggregates</strong>:</p>
<ul>
<li><code>ModelLifecycleManager</code>: Root aggregate coordinating model lifecycle</li>
</ul>
<p><strong>Domain Events</strong>:</p>
<ul>
<li><code>ModelLoadRequested</code></li>
<li><code>ModelLoaded</code></li>
<li><code>ModelLoadFailed</code></li>
<li><code>ModelUnloaded</code></li>
<li><code>ModelEvicted</code></li>
<li><code>MemoryThresholdExceeded</code></li>
</ul>
<p><strong>Policies</strong>:</p>
<ul>
<li><code>LRUEvictionPolicy</code>: Determines which model to unload</li>
<li><code>WarmupPolicy</code>: Pre-loading strategy</li>
</ul>
<p><strong>Services</strong>:</p>
<ul>
<li><code>ModelLoader</code>: Loads models into memory (validated: 2s load time for small-medium models)</li>
<li><code>ProcessManager</code>: Manages worker processes (POC-validated: subprocess isolation required)</li>
<li><code>HealthChecker</code>: Verifies model integrity</li>
</ul>
<p><strong>Handlers</strong>:</p>
<ul>
<li><code>LoadModelHandler</code>: Handles model loading into memory</li>
<li><code>UnloadModelHandler</code>: Handles model unloading from memory (POC-validated: must terminate subprocess, not GC)</li>
<li><code>WarmupModelHandler</code>: Handles model warmup/preloading</li>
<li><code>CheckHealthHandler</code>: Handles model health verification</li>
<li><code>EvictModelHandler</code>: Handles LRU-based model eviction</li>
</ul>
<p><strong>POC-Validated Memory Management Strategy:</strong></p>
<ol>
<li><strong>Process Isolation</strong>: Each model runs in dedicated subprocess</li>
<li>Memory reclamation: 0.1MB leak (subprocess) vs 516MB leak (GC)</li>
<li>
<p>GPU cleanup: Subprocess termination ensures complete VRAM release</p>
</li>
<li>
<p><strong>LRU Eviction</strong>: When memory threshold exceeded:</p>
</li>
<li>Identify least recently used model</li>
<li>Terminate subprocess (kills process, releases all memory)</li>
<li>
<p>Remove from loaded model registry</p>
</li>
<li>
<p><strong>Memory Budgeting</strong>: Reserve 1.5x model footprint per worker</p>
</li>
<li>Small model (90MB): Reserve 135MB</li>
<li>Medium model (420MB): Reserve 630MB</li>
<li>10 concurrent models: ~5GB RAM minimum</li>
</ol>
<hr />
<h3 id="23-inference-context">2.3 Inference Context<a class="headerlink" href="#23-inference-context" title="Permanent link">&para;</a></h3>
<p><strong>Responsibility</strong>: Request handling, batching, execution, and result management.</p>
<p><strong>Core Entities</strong>:</p>
<ul>
<li><code>InferenceRequest</code>: A request for model inference</li>
<li><code>InferenceJob</code>: Async job tracking</li>
<li><code>Batch</code>: Collection of requests for same model</li>
<li><code>InferenceResult</code>: Output from model execution</li>
</ul>
<p><strong>Value Objects</strong>:</p>
<ul>
<li><code>JobId</code>: Unique identifier for async requests</li>
<li><code>JobStatus</code>: Enumeration (QUEUED, PROCESSING, COMPLETED, FAILED)</li>
<li><code>Priority</code>: Request priority level</li>
<li><code>InputData</code>: Task-specific input payload</li>
<li><code>OutputData</code>: Task-specific output payload</li>
</ul>
<p><strong>Aggregates</strong>:</p>
<ul>
<li><code>InferenceQueue</code>: Root aggregate managing request queue</li>
</ul>
<p><strong>Domain Events</strong>:</p>
<ul>
<li><code>InferenceRequested</code></li>
<li><code>RequestQueued</code></li>
<li><code>BatchFormed</code></li>
<li><code>InferenceStarted</code></li>
<li><code>InferenceCompleted</code></li>
<li><code>InferenceFailed</code></li>
</ul>
<p><strong>Services</strong>:</p>
<ul>
<li><code>BatchAccumulator</code>: Groups requests into batches</li>
<li><code>InferenceExecutor</code>: Executes model inference</li>
<li><code>ResultStore</code>: Stores large results (images)</li>
</ul>
<p><strong>Policies</strong>:</p>
<ul>
<li><code>PriorityPolicy</code>: Determines request ordering (POC-validated: 100% correctness, 4 priority levels)</li>
<li><code>BatchingPolicy</code>: Configures batch parameters</li>
<li><code>TimeoutPolicy</code>: Handles request timeouts</li>
</ul>
<p><strong>Handlers</strong>:</p>
<ul>
<li><code>SubmitRequestHandler</code>: Handles inference request submission (POC-validated: 0.7Î¼s queue latency)</li>
<li><code>ExecuteBatchHandler</code>: Handles batch inference execution</li>
<li><code>GetJobStatusHandler</code>: Handles job status retrieval</li>
<li><code>GetJobResultHandler</code>: Handles job result retrieval</li>
<li><code>CancelRequestHandler</code>: Handles request cancellation</li>
</ul>
<p><strong>POC-Validated Queue Performance:</strong></p>
<ul>
<li><strong>Implementation</strong>: <code>asyncio.PriorityQueue</code> (async-native, stdlib)</li>
<li><strong>Throughput</strong>: 730,108 ops/sec (730x above 1,000 req/sec target)</li>
<li><strong>Latency</strong>: 0.7Î¼s enqueue, 1.7Î¼s dequeue (negligible)</li>
<li><strong>Priority Ordering</strong>: 100% correct under concurrent load</li>
<li><strong>Capacity</strong>: Massive headroom, queue will never be bottleneck</li>
</ul>
<p><strong>Priority Levels (Validated):</strong></p>
<ol>
<li><strong>CRITICAL (1)</strong>: SLA-bound, real-time inference</li>
<li><strong>HIGH (2)</strong>: User-facing, interactive requests</li>
<li><strong>NORMAL (3)</strong>: Batch processing, standard workload</li>
<li><strong>LOW (4)</strong>: Background tasks, analytics</li>
</ol>
<p>FIFO within same priority (timestamp-based ordering).</p>
<hr />
<h3 id="24-observability-context">2.4 Observability Context<a class="headerlink" href="#24-observability-context" title="Permanent link">&para;</a></h3>
<p><strong>Responsibility</strong>: Metrics collection, logging, tracing, and health reporting.</p>
<p><strong>Core Entities</strong>:</p>
<ul>
<li><code>Metric</code>: Time-series data point</li>
<li><code>LogEntry</code>: Structured log message</li>
<li><code>Trace</code>: Distributed tracing span</li>
</ul>
<p><strong>Value Objects</strong>:</p>
<ul>
<li><code>MetricType</code>: Enumeration (COUNTER, GAUGE, HISTOGRAM)</li>
<li><code>LogLevel</code>: Severity level</li>
<li><code>TraceId</code>: Correlation identifier</li>
</ul>
<p><strong>Services</strong>:</p>
<ul>
<li><code>MetricsCollector</code>: Gathers performance metrics</li>
<li><code>Logger</code>: Structured logging</li>
<li><code>Tracer</code>: Distributed tracing</li>
</ul>
<p><strong>Handlers</strong>:</p>
<ul>
<li><code>RecordMetricHandler</code>: Handles metric recording</li>
<li><code>LogEventHandler</code>: Handles event logging</li>
<li><code>CreateTraceHandler</code>: Handles distributed trace creation</li>
<li><code>ExportMetricsHandler</code>: Handles Prometheus metrics export</li>
<li><code>HealthCheckHandler</code>: Handles health check requests</li>
</ul>
<hr />
<h2 id="3-hexagonal-architecture">3. Hexagonal Architecture<a class="headerlink" href="#3-hexagonal-architecture" title="Permanent link">&para;</a></h2>
<h3 id="31-ports-interfaces">3.1 Ports (Interfaces)<a class="headerlink" href="#31-ports-interfaces" title="Permanent link">&para;</a></h3>
<h4 id="primary-ports-driving">Primary Ports (Driving)<a class="headerlink" href="#primary-ports-driving" title="Permanent link">&para;</a></h4>
<p>Application exposes these interfaces to the outside world:</p>
<pre><code class="language-python"># REST API Port
class IModelAPI(Protocol):
    def register_model(request: RegisterModelRequest) -&gt; ModelResponse
    def list_models(filters: ModelFilters) -&gt; List[ModelResponse]
    def infer(model_id: str, request: InferenceRequest) -&gt; InferenceResponse

# gRPC Port
class IInferenceService(Protocol):
    def Infer(request: InferenceRequest) -&gt; InferenceResponse
    def InferAsync(request: InferenceRequest) -&gt; JobReference

# CLI Port
class IModelMoraCLI(Protocol):
    def install(model_id: str, version: Optional[str]) -&gt; None
    def list_models(task_type: Optional[str]) -&gt; None
</code></pre>
<h4 id="secondary-ports-driven">Secondary Ports (Driven)<a class="headerlink" href="#secondary-ports-driven" title="Permanent link">&para;</a></h4>
<p>Application depends on these interfaces (implemented by adapters):</p>
<pre><code class="language-python"># Repository Ports
class IModelRepository(Protocol):
    def save(model: Model) -&gt; None
    def find_by_id(model_id: ModelId) -&gt; Optional[Model]
    def find_all(filters: dict) -&gt; List[Model]
    def delete(model_id: ModelId) -&gt; None

# External Service Ports
class IModelDownloader(Protocol):
    def download(model_id: str, version: str) -&gt; Path
    def validate_checksum(path: Path, expected: str) -&gt; bool

class IObjectStorage(Protocol):
    def store(data: bytes, key: str) -&gt; str
    def get_presigned_url(key: str, expiration: int) -&gt; str

# Infrastructure Ports
class IProcessManager(Protocol):
    def spawn_worker(model_id: str) -&gt; ProcessHandle
    def send_request(handle: ProcessHandle, data: dict) -&gt; dict
    def terminate(handle: ProcessHandle) -&gt; None

class IMetricsExporter(Protocol):
    def record_counter(name: str, value: float, labels: dict) -&gt; None
    def record_histogram(name: str, value: float, labels: dict) -&gt; None
</code></pre>
<h3 id="32-adapters">3.2 Adapters<a class="headerlink" href="#32-adapters" title="Permanent link">&para;</a></h3>
<h4 id="primary-adapters-input">Primary Adapters (Input)<a class="headerlink" href="#primary-adapters-input" title="Permanent link">&para;</a></h4>
<ul>
<li><code>FastAPIAdapter</code>: REST API implementation</li>
<li><code>GRPCAdapter</code>: gRPC service implementation</li>
<li><code>CLIAdapter</code>: Click-based command-line interface</li>
</ul>
<h4 id="secondary-adapters-output">Secondary Adapters (Output)<a class="headerlink" href="#secondary-adapters-output" title="Permanent link">&para;</a></h4>
<ul>
<li><code>PostgreSQLModelRepository</code>: SQL database for model metadata</li>
<li><code>HuggingFaceDownloader</code>: Downloads from HF Hub</li>
<li><code>S3ObjectStorage</code>: AWS S3/MinIO for result storage</li>
<li><code>MultiprocessingManager</code>: Python multiprocessing for workers</li>
<li><code>PrometheusExporter</code>: Metrics export for Prometheus</li>
</ul>
<hr />
<h2 id="4-component-architecture">4. Component Architecture<a class="headerlink" href="#4-component-architecture" title="Permanent link">&para;</a></h2>
<h3 id="41-high-level-component-diagram">4.1 High-Level Component Diagram<a class="headerlink" href="#41-high-level-component-diagram" title="Permanent link">&para;</a></h3>
<div class='puml-container'><div class="puml light" style=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="DESCRIPTION" height="725px" preserveAspectRatio="xMidYMid meet" style="width:2063px;height:725px;background:#FFFFFF;" version="1.1" viewBox="0 0 2063 725" width="2063px" zoomAndPan="magnify" class="diagram"><defs/><g><g class="cluster" data-entity="api" data-source-line="1660" data-uid="ent0002" id="cluster_api"><rect fill="none" height="204.78" style="stroke:#444444;stroke-width:1;stroke-dasharray:7,7;" width="724" x="824" y="7"/><text fill="#444444" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="85.7969" x="827" y="43.8516">API Layer</text><text fill="#444444" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="75.416" x="827" y="58.7637">[container]</text></g><g class="cluster" data-entity="app" data-source-line="1660" data-uid="ent0006" id="cluster_app"><rect fill="none" height="204.78" style="stroke:#444444;stroke-width:1;stroke-dasharray:7,7;" width="935" x="829" y="260.78"/><text fill="#444444" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="157.7891" x="832" y="297.6316">Application Layer</text><text fill="#444444" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="75.416" x="832" y="312.5437">[container]</text></g><g class="cluster" data-entity="domain" data-source-line="1660" data-uid="ent0011" id="cluster_domain"><rect fill="none" height="204.78" style="stroke:#444444;stroke-width:1;stroke-dasharray:7,7;" width="684" x="7" y="514.56"/><text fill="#444444" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="124.3516" x="10" y="551.4116">Domain Layer</text><text fill="#444444" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="75.416" x="10" y="566.3237">[container]</text></g><g class="cluster" data-entity="infra" data-source-line="1660" data-uid="ent0015" id="cluster_infra"><rect fill="none" height="204.78" style="stroke:#444444;stroke-width:1;stroke-dasharray:7,7;" width="1076" x="715" y="514.56"/><text fill="#444444" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="182.4453" x="718" y="551.4116">Infrastructure Layer</text><text fill="#444444" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="75.416" x="718" y="566.3237">[container]</text></g><g class="cluster" data-entity="workers" data-source-line="1660" data-uid="ent0021" id="cluster_workers"><rect fill="none" height="188.48" style="stroke:#444444;stroke-width:1;stroke-dasharray:7,7;" width="242" x="1815" y="522.71"/><text fill="#444444" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="161.8516" x="1818" y="559.5616">Worker Processes</text><text fill="#444444" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="75.416" x="1818" y="574.4737">[container]</text></g><g class="entity" data-entity="rest_api" data-source-line="68" data-uid="ent0003" id="entity_rest_api"><rect fill="#85BBF0" height="117.7813" style="stroke:#78A8D8;stroke-width:0.5;" width="214.8789" x="1064.56" y="78"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="96.332" x="1123.8334" y="100.9951">Â«componentÂ»</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="45.6875" x="1131.3393" y="119.1484">REST</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="5.5703" x="1177.0268" y="119.1484">Â </text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="30.0625" x="1182.5971" y="119.1484">API</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="53.5605" x="1145.2192" y="134.0605">[FastAPI]</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1169.7744" y="149.8857">Â </text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36.0732" x="1081.1806" y="166.1826">HTTP</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1117.2538" y="166.1826">Â </text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69.3711" x="1121.704" y="166.1826">endpoints</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1191.0751" y="166.1826">Â </text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="19.25" x="1195.5253" y="166.1826">for</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1214.7753" y="166.1826">Â </text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43.5928" x="1219.2255" y="166.1826">model</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93.7822" x="1074.56" y="182.4795">management</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1168.3422" y="182.4795">Â </text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26.3389" x="1172.7924" y="182.4795">and</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1199.1313" y="182.4795">Â </text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65.8574" x="1203.5815" y="182.4795">inference</text></g><g class="entity" data-entity="grpc_api" data-source-line="68" data-uid="ent0004" id="entity_grpc_api"><rect fill="#85BBF0" height="117.7813" style="stroke:#78A8D8;stroke-width:0.5;" width="217.4424" x="1314.28" y="78"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="96.332" x="1374.8352" y="100.9951">Â«componentÂ»</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="47.2422" x="1381.5637" y="119.1484">gRPC</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="5.5703" x="1428.8059" y="119.1484">Â </text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="30.0625" x="1434.3762" y="119.1484">API</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="46.8047" x="1399.5988" y="134.0605">[grpcio]</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1420.7761" y="149.8857">Â </text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127.1348" x="1324.28" y="166.1826">High-performance</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1451.4148" y="166.1826">Â </text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65.8574" x="1455.865" y="166.1826">inference</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50.1484" x="1397.927" y="182.4795">service</text></g><g class="entity" data-entity="cli" data-source-line="68" data-uid="ent0005" id="entity_cli"><rect fill="#85BBF0" height="101.4844" style="stroke:#78A8D8;stroke-width:0.5;" width="189.1621" x="840.42" y="86.14"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="96.332" x="886.835" y="109.1351">Â«componentÂ»</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="27.8906" x="921.0557" y="127.2884">CLI</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="37.957" x="916.0225" y="142.2005">[Click]</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="932.776" y="158.0257">Â </text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102.2725" x="850.42" y="174.3226">Command-line</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="952.6925" y="174.3226">Â </text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62.4395" x="957.1427" y="174.3226">interface</text></g><g class="entity" data-entity="registry_svc" data-source-line="68" data-uid="ent0007" id="entity_registry_svc"><rect fill="#85BBF0" height="101.4844" style="stroke:#78A8D8;stroke-width:0.5;" width="216.4033" x="844.8" y="339.93"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="96.332" x="904.8356" y="362.9251">Â«componentÂ»</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="75.6016" x="879.1579" y="381.0784">Registry</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="5.5703" x="954.7595" y="381.0784">Â </text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="66.5156" x="960.3298" y="381.0784">Service</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="50.959" x="927.5222" y="395.9905">[Python]</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="950.7766" y="411.8157">Â </text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42.0342" x="854.8" y="428.1126">Model</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="896.8342" y="428.1126">Â </text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51.6865" x="901.2844" y="428.1126">catalog</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="952.9709" y="428.1126">Â </text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93.7822" x="957.4211" y="428.1126">management</text></g><g class="entity" data-entity="lifecycle_svc" data-source-line="68" data-uid="ent0008" id="entity_lifecycle_svc"><rect fill="#85BBF0" height="117.7813" style="stroke:#78A8D8;stroke-width:0.5;" width="192.0879" x="1095.96" y="331.78"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="96.332" x="1143.8379" y="354.7751">Â«componentÂ»</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="79.2266" x="1116.3477" y="372.9284">Lifecycle</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="5.5703" x="1195.5743" y="372.9284">Â </text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="66.5156" x="1201.1446" y="372.9284">Service</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="50.959" x="1166.5245" y="387.8405">[Python]</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1189.7788" y="403.6657">Â </text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42.0342" x="1105.96" y="419.9626">Model</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1147.9942" y="419.9626">Â </text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125.6035" x="1152.4444" y="419.9626">loading/unloading</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93.4404" x="1145.2837" y="436.2595">orchestration</text></g><g class="entity" data-entity="inference_svc" data-source-line="68" data-uid="ent0009" id="entity_inference_svc"><rect fill="#85BBF0" height="117.7813" style="stroke:#78A8D8;stroke-width:0.5;" width="177.7109" x="1323.14" y="331.78"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="96.332" x="1363.8295" y="354.7751">Â«componentÂ»</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="85.625" x="1333.14" y="372.9284">Inference</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="5.5703" x="1418.765" y="372.9284">Â </text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="66.5156" x="1424.3353" y="372.9284">Service</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="50.959" x="1386.516" y="387.8405">[Python]</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1409.7704" y="403.6657">Â </text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57.4971" x="1337.1796" y="419.9626">Request</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1394.6766" y="419.9626">Â </text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56.8955" x="1399.1268" y="419.9626">queuing</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1456.0223" y="419.9626">Â </text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26.3389" x="1460.4725" y="419.9626">and</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68.8994" x="1377.5458" y="436.2595">execution</text></g><g class="entity" data-entity="observability_svc" data-source-line="68" data-uid="ent0010" id="entity_observability_svc"><rect fill="#85BBF0" height="101.4844" style="stroke:#78A8D8;stroke-width:0.5;" width="212.6172" x="1535.69" y="339.93"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="96.332" x="1593.8326" y="362.9251">Â«componentÂ»</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="120.5313" x="1545.69" y="381.0784">Observability</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="5.5703" x="1666.2213" y="381.0784">Â </text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="66.5156" x="1671.7916" y="381.0784">Service</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="50.959" x="1616.5191" y="395.9905">[Python]</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1639.7735" y="411.8157">Â </text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50.8184" x="1573.0308" y="428.1126">Metrics</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1623.8492" y="428.1126">Â </text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26.3389" x="1628.2994" y="428.1126">and</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1654.6382" y="428.1126">Â </text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51.8779" x="1659.0884" y="428.1126">logging</text></g><g class="entity" data-entity="registry_domain" data-source-line="68" data-uid="ent0012" id="entity_registry_domain"><rect fill="#85BBF0" height="117.7813" style="stroke:#78A8D8;stroke-width:0.5;" width="214.8926" x="22.55" y="585.56"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="96.332" x="81.8303" y="608.5551">Â«componentÂ»</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="75.6016" x="55.1018" y="626.7084">Registry</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="5.5703" x="130.7033" y="626.7084">Â </text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="68.6172" x="136.2736" y="626.7084">Domain</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="50.959" x="104.5168" y="641.6205">[Python]</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="127.7712" y="657.4457">Â </text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42.0342" x="32.55" y="673.7426">Model</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="74.5842" y="673.7426">Â </text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52.1514" x="79.0344" y="673.7426">entities</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="131.1857" y="673.7426">Â </text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26.3389" x="135.6359" y="673.7426">and</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="161.9748" y="673.7426">Â </text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61.0176" x="166.425" y="673.7426">business</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="34.4258" x="112.7834" y="690.0395">rules</text></g><g class="entity" data-entity="lifecycle_domain" data-source-line="68" data-uid="ent0013" id="entity_lifecycle_domain"><rect fill="#85BBF0" height="117.7813" style="stroke:#78A8D8;stroke-width:0.5;" width="175.1689" x="272.42" y="585.56"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="96.332" x="311.8385" y="608.5551">Â«componentÂ»</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="79.2266" x="283.2974" y="626.7084">Lifecycle</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="5.5703" x="362.524" y="626.7084">Â </text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="68.6172" x="368.0943" y="626.7084">Domain</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="50.959" x="334.525" y="641.6205">[Python]</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="357.7794" y="657.4457">Â </text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56.9365" x="282.42" y="673.7426">Memory</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="339.3565" y="673.7426">Â </text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93.7822" x="343.8067" y="673.7426">management</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52.7256" x="333.6417" y="690.0395">policies</text></g><g class="entity" data-entity="inference_domain" data-source-line="68" data-uid="ent0014" id="entity_inference_domain"><rect fill="#85BBF0" height="117.7813" style="stroke:#78A8D8;stroke-width:0.5;" width="192.9082" x="482.55" y="585.56"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="96.332" x="530.8381" y="608.5551">Â«componentÂ»</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="85.625" x="499.0979" y="626.7084">Inference</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="5.5703" x="584.7229" y="626.7084">Â </text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="68.6172" x="590.2932" y="626.7084">Domain</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="50.959" x="553.5246" y="641.6205">[Python]</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="576.779" y="657.4457">Â </text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61.8926" x="492.55" y="673.7426">Batching</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="554.4426" y="673.7426">Â </text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26.3389" x="558.8928" y="673.7426">and</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="585.2316" y="673.7426">Â </text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75.7764" x="589.6818" y="673.7426">scheduling</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32.9287" x="562.5397" y="690.0395">logic</text></g><g class="entity" data-entity="db_adapter" data-source-line="68" data-uid="ent0016" id="entity_db_adapter"><rect fill="#85BBF0" height="101.4844" style="stroke:#78A8D8;stroke-width:0.5;" width="186.2227" x="981.89" y="593.71"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="96.332" x="1026.8353" y="616.7051">Â«componentÂ»</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="85.1484" x="993.4037" y="634.8584">Database</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="5.5703" x="1078.5521" y="634.8584">Â </text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="72.4766" x="1084.1224" y="634.8584">Adapter</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="85.0313" x="1032.4857" y="649.7705">[SQLAlchemy]</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1072.7762" y="665.5957">Â </text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80.7529" x="991.89" y="681.8926">PostgreSQL</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1072.6429" y="681.8926">Â </text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81.0195" x="1077.0931" y="681.8926">persistence</text></g><g class="entity" data-entity="hf_adapter" data-source-line="68" data-uid="ent0017" id="entity_hf_adapter"><rect fill="#85BBF0" height="101.4844" style="stroke:#78A8D8;stroke-width:0.5;" width="216.125" x="730.94" y="593.71"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="96.332" x="790.8365" y="616.7051">Â«componentÂ»</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="118.0781" x="740.94" y="634.8584">HuggingFace</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="5.5703" x="859.0181" y="634.8584">Â </text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="72.4766" x="864.5884" y="634.8584">Adapter</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="86.9707" x="795.5171" y="649.7705">[transformers]</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="836.7774" y="665.5957">Â </text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42.0342" x="771.0875" y="681.8926">Model</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="813.1216" y="681.8926">Â </text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89.3457" x="817.5718" y="681.8926">downloading</text></g><g class="entity" data-entity="storage_adapter" data-source-line="68" data-uid="ent0018" id="entity_storage_adapter"><rect fill="#85BBF0" height="101.4844" style="stroke:#78A8D8;stroke-width:0.5;" width="169.2031" x="1406.4" y="593.71"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="96.332" x="1442.8355" y="616.7051">Â«componentÂ»</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="71.1563" x="1416.4" y="634.8584">Storage</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="5.5703" x="1487.5563" y="634.8584">Â </text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="72.4766" x="1493.1266" y="634.8584">Adapter</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="44.0039" x="1468.9996" y="649.7705">[boto3]</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1488.7765" y="665.5957">Â </text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62.501" x="1419.0738" y="681.8926">S3/MinIO</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1481.5748" y="681.8926">Â </text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76.9043" x="1486.025" y="681.8926">integration</text></g><g class="entity" data-entity="process_adapter" data-source-line="68" data-uid="ent0019" id="entity_process_adapter"><rect fill="#85BBF0" height="117.7813" style="stroke:#78A8D8;stroke-width:0.5;" width="168.0391" x="1202.98" y="585.56"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="96.332" x="1238.8335" y="608.5551">Â«componentÂ»</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="69.9922" x="1212.98" y="626.7084">Process</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="5.5703" x="1282.9722" y="626.7084">Â </text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="72.4766" x="1288.5425" y="626.7084">Adapter</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="104.9648" x="1234.5171" y="641.6205">[multiprocessing]</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1284.7744" y="657.4457">Â </text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50.6406" x="1232.4009" y="673.7426">Worker</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1283.0415" y="673.7426">Â </text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54.1064" x="1287.4917" y="673.7426">process</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93.7822" x="1240.1084" y="690.0395">management</text></g><g class="entity" data-entity="metrics_adapter" data-source-line="68" data-uid="ent0020" id="entity_metrics_adapter"><rect fill="#85BBF0" height="101.4844" style="stroke:#78A8D8;stroke-width:0.5;" width="164.8516" x="1610.57" y="593.71"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="96.332" x="1644.8298" y="616.7051">Â«componentÂ»</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="66.8047" x="1620.57" y="634.8584">Metrics</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="5.5703" x="1687.3747" y="634.8584">Â </text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="72.4766" x="1692.945" y="634.8584">Adapter</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="120.8379" x="1632.5768" y="649.7705">[prometheus_client]</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1690.7707" y="665.5957">Â </text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50.8184" x="1642.5637" y="681.8926">Metrics</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1693.382" y="681.8926">Â </text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="45.5957" x="1697.8322" y="681.8926">export</text></g><g class="entity" data-entity="model_worker" data-source-line="68" data-uid="ent0022" id="entity_model_worker"><rect fill="#85BBF0" height="101.4844" style="stroke:#78A8D8;stroke-width:0.5;" width="209.752" x="1831.12" y="593.71"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="96.332" x="1887.83" y="616.7051">Â«componentÂ»</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="54.7031" x="1872.9022" y="634.8584">Model</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="5.5703" x="1927.6054" y="634.8584">Â </text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="65.9141" x="1933.1757" y="634.8584">Worker</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="50.959" x="1910.5165" y="649.7705">[Python]</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1933.7709" y="665.5957">Â </text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55.4463" x="1841.12" y="681.8926">Isolated</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1896.5663" y="681.8926">Â </text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54.1064" x="1901.0165" y="681.8926">process</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1955.1229" y="681.8926">Â </text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="23.2559" x="1959.5731" y="681.8926">per</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1982.829" y="681.8926">Â </text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43.5928" x="1987.2792" y="681.8926">model</text></g><g class="link" data-entity-1="rest_api" data-entity-2="registry_svc" data-link-type="dependency" data-source-line="1773" data-uid="lnk23" id="link_rest_api_registry_svc"><path d="M1121.48,195.97 C1083.71,239.39 1037.85,292.1237 1001.86,333.5037" fill="none" id="rest_api-to-registry_svc" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="996.61,339.54,1004.1237,335.4725,999.5964,331.5349,996.61,339.54" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="34.8486" x="1089" y="240.8469">Uses</text></g><g class="link" data-entity-1="rest_api" data-entity-2="inference_svc" data-link-type="dependency" data-source-line="1773" data-uid="lnk24" id="link_rest_api_inference_svc"><path d="M1245.37,196.14 C1265.77,213.56 1287.41,233.24 1306,252.78 C1329.2,277.17 1347.6133,300.0026 1366.3633,325.1926" fill="none" id="rest_api-to-inference_svc" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="1371.14,331.61,1368.7698,323.4013,1363.9567,326.9839,1371.14,331.61" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="34.8486" x="1297" y="240.8469">Uses</text></g><g class="link" data-entity-1="grpc_api" data-entity-2="inference_svc" data-link-type="dependency" data-source-line="1773" data-uid="lnk25" id="link_grpc_api_inference_svc"><path d="M1420.46,195.97 C1418.69,236.63 1416.6696,282.7576 1414.8896,323.4476" fill="none" id="grpc_api-to-inference_svc" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="1414.54,331.44,1417.8868,323.5788,1411.8925,323.3165,1414.54,331.44" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="34.8486" x="1419" y="240.8469">Uses</text></g><g class="link" data-entity-1="cli" data-entity-2="registry_svc" data-link-type="dependency" data-source-line="1773" data-uid="lnk26" id="link_cli_registry_svc"><path d="M938.58,187.93 C941.73,231.96 945.7087,287.7404 948.8587,331.7404" fill="none" id="cli-to-registry_svc" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="949.43,339.72,951.8511,331.5262,945.8664,331.9546,949.43,339.72" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="34.8486" x="943" y="240.8469">Uses</text></g><g class="link" data-entity-1="registry_svc" data-entity-2="registry_domain" data-link-type="dependency" data-source-line="1773" data-uid="lnk27" id="link_registry_svc_registry_domain"><path d="M844.41,400.81 C674.48,416.57 354.79,452.44 255,506.56 C220.63,525.2 195.637,550.6617 173.697,578.9117" fill="none" id="registry_svc-to-registry_domain" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="168.79,585.23,176.0664,580.7518,171.3277,577.0716,168.79,585.23" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="34.8486" x="309" y="494.6269">Uses</text></g><g class="link" data-entity-1="lifecycle_svc" data-entity-2="lifecycle_domain" data-link-type="dependency" data-source-line="1773" data-uid="lnk28" id="link_lifecycle_svc_lifecycle_domain"><path d="M1124.81,449.99 C1110.52,459.53 1094.92,468.07 1079,473.56 C1056.19,481.42 886.1,480.36 862,481.56 C773.71,485.97 543.01,464.98 465,506.56 C432.36,523.96 410.9499,549.6088 393.2099,578.5588" fill="none" id="lifecycle_svc-to-lifecycle_domain" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="389.03,585.38,395.7678,580.1263,390.6519,576.9914,389.03,585.38" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="34.8486" x="863" y="494.6269">Uses</text></g><g class="link" data-entity-1="inference_svc" data-entity-2="inference_domain" data-link-type="dependency" data-source-line="1773" data-uid="lnk29" id="link_inference_svc_inference_domain"><path d="M1346.05,449.98 C1317.45,470.82 1282.24,491.03 1246,498.56 C1217.11,504.56 742.15,495.02 715,506.56 C676.61,522.87 648.458,549.5019 624.458,578.9119" fill="none" id="inference_svc-to-inference_domain" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="619.4,585.11,626.7823,580.8086,622.1337,577.0151,619.4,585.11" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="34.8486" x="1292" y="494.6269">Uses</text></g><g class="link" data-entity-1="registry_svc" data-entity-2="db_adapter" data-link-type="dependency" data-source-line="1773" data-uid="lnk30" id="link_registry_svc_db_adapter"><path d="M977.25,441.71 C998.58,485.74 1025.9916,542.3006 1047.3116,586.3006" fill="none" id="registry_svc-to-db_adapter" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="1050.8,593.5,1050.0113,584.9925,1044.6118,587.6088,1050.8,593.5" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="34.8486" x="1004" y="494.6269">Uses</text></g><g class="link" data-entity-1="registry_svc" data-entity-2="hf_adapter" data-link-type="dependency" data-source-line="1773" data-uid="lnk31" id="link_registry_svc_hf_adapter"><path d="M930.34,441.71 C910.41,485.74 884.8394,542.2121 864.9194,586.2121" fill="none" id="registry_svc-to-hf_adapter" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="861.62,593.5,867.6524,587.4494,862.1865,584.9748,861.62,593.5" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="34.8486" x="910" y="494.6269">Uses</text></g><g class="link" data-entity-1="lifecycle_svc" data-entity-2="process_adapter" data-link-type="dependency" data-source-line="1773" data-uid="lnk32" id="link_lifecycle_svc_process_adapter"><path d="M1195.59,449.98 C1197.66,466.01 1200.91,483.19 1206,498.56 C1215.97,528.65 1228.1995,552.7788 1243.6095,578.3388" fill="none" id="lifecycle_svc-to-process_adapter" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="1247.74,585.19,1246.1786,576.7899,1241.0403,579.8878,1247.74,585.19" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="34.8486" x="1207" y="494.6269">Uses</text></g><g class="link" data-entity-1="inference_svc" data-entity-2="storage_adapter" data-link-type="dependency" data-source-line="1773" data-uid="lnk33" id="link_inference_svc_storage_adapter"><path d="M1373.9,450.04 C1367.99,466.31 1366.33,483.61 1375,498.56 C1378.6,504.76 1383.63,501.81 1389,506.56 C1417.18,531.51 1438.0907,558.7248 1456.4607,586.5348" fill="none" id="inference_svc-to-storage_adapter" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="1460.87,593.21,1458.9639,584.8813,1453.9575,588.1883,1460.87,593.21" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="34.8486" x="1376" y="494.6269">Uses</text></g><g class="link" data-entity-1="observability_svc" data-entity-2="metrics_adapter" data-link-type="dependency" data-source-line="1773" data-uid="lnk34" id="link_observability_svc_metrics_adapter"><path d="M1664.28,441.76 C1669.18,454.52 1673.84,468.37 1677,481.56 C1685.81,518.36 1689.3394,553.0121 1691.1194,585.2821" fill="none" id="observability_svc-to-metrics_adapter" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="1691.56,593.27,1694.1148,585.1169,1688.1239,585.4474,1691.56,593.27" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="34.8486" x="1680" y="494.6269">Uses</text></g><g class="link" data-entity-1="lifecycle_svc" data-entity-2="model_worker" data-link-type="dependency" data-source-line="1773" data-uid="lnk35" id="link_lifecycle_svc_model_worker"><path d="M1260.63,449.94 C1274.85,459.35 1290.31,467.86 1306,473.56 C1351.66,490.13 1368.17,468.67 1415,481.56 C1431.29,486.04 1432.6,494.49 1449,498.56 C1485.89,507.72 1755.84,492.11 1791,506.56 C1834.55,524.46 1867.6046,555.8442 1893.8446,587.0842" fill="none" id="lifecycle_svc-to-model_worker" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="1898.99,593.21,1896.1418,585.1547,1891.5475,589.0137,1898.99,593.21" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="65.5967" x="1450" y="494.6269">Manages</text></g><g class="link" data-entity-1="inference_svc" data-entity-2="model_worker" data-link-type="dependency" data-source-line="1773" data-uid="lnk36" id="link_inference_svc_model_worker"><path d="M1480.68,449.92 C1508.37,471.98 1537.6,493.12 1554,498.56 C1604.02,515.15 1742.37,486.27 1791,506.56 C1834.45,524.68 1867.5044,556.0728 1893.7744,587.2428" fill="none" id="inference_svc-to-model_worker" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="1898.93,593.36,1896.0684,585.3095,1891.4805,589.1761,1898.93,593.36" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="44.478" x="1555" y="494.6269">Sends</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.5259" x="1599.478" y="494.6269">Â </text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="64.2954" x="1604.0039" y="494.6269">requests</text></g></g></svg></div><div class="puml dark" style=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="DESCRIPTION" height="725px" preserveAspectRatio="xMidYMid meet" style="width:2063px;height:725px;background:#1B1B1B;" version="1.1" viewBox="0 0 2063 725" width="2063px" zoomAndPan="magnify" class="diagram"><defs/><g><rect fill="#1B1B1B" height="725" style="stroke:none;stroke-width:1;" width="2063" x="0" y="0"/><g class="cluster" data-entity="api" data-source-line="1660" data-uid="ent0002" id="cluster_api"><rect fill="none" height="204.78" style="stroke:#FFFFFF;stroke-width:1;stroke-dasharray:7,7;" width="724" x="824" y="7"/><text fill="#FFFFFF" font-family="sans-serif" font-size="0" font-style="italic" lengthAdjust="spacing" textLength="0" x="1186" y="9">Â«container_boundaryÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="0" font-style="italic" lengthAdjust="spacing" textLength="0" x="1186" y="19">Â«boundaryÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="85.7969" x="827" y="43.8516">API Layer</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="75.416" x="827" y="58.7637">[container]</text></g><g class="cluster" data-entity="app" data-source-line="1660" data-uid="ent0006" id="cluster_app"><rect fill="none" height="204.78" style="stroke:#FFFFFF;stroke-width:1;stroke-dasharray:7,7;" width="935" x="829" y="260.78"/><text fill="#FFFFFF" font-family="sans-serif" font-size="0" font-style="italic" lengthAdjust="spacing" textLength="0" x="1296.5" y="262.78">Â«container_boundaryÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="0" font-style="italic" lengthAdjust="spacing" textLength="0" x="1296.5" y="272.78">Â«boundaryÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="157.7891" x="832" y="297.6316">Application Layer</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="75.416" x="832" y="312.5437">[container]</text></g><g class="cluster" data-entity="domain" data-source-line="1660" data-uid="ent0011" id="cluster_domain"><rect fill="none" height="204.78" style="stroke:#FFFFFF;stroke-width:1;stroke-dasharray:7,7;" width="684" x="7" y="514.56"/><text fill="#FFFFFF" font-family="sans-serif" font-size="0" font-style="italic" lengthAdjust="spacing" textLength="0" x="349" y="516.56">Â«container_boundaryÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="0" font-style="italic" lengthAdjust="spacing" textLength="0" x="349" y="526.56">Â«boundaryÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="124.3516" x="10" y="551.4116">Domain Layer</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="75.416" x="10" y="566.3237">[container]</text></g><g class="cluster" data-entity="infra" data-source-line="1660" data-uid="ent0015" id="cluster_infra"><rect fill="none" height="204.78" style="stroke:#FFFFFF;stroke-width:1;stroke-dasharray:7,7;" width="1076" x="715" y="514.56"/><text fill="#FFFFFF" font-family="sans-serif" font-size="0" font-style="italic" lengthAdjust="spacing" textLength="0" x="1253" y="516.56">Â«container_boundaryÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="0" font-style="italic" lengthAdjust="spacing" textLength="0" x="1253" y="526.56">Â«boundaryÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="182.4453" x="718" y="551.4116">Infrastructure Layer</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="75.416" x="718" y="566.3237">[container]</text></g><g class="cluster" data-entity="workers" data-source-line="1660" data-uid="ent0021" id="cluster_workers"><rect fill="none" height="188.48" style="stroke:#FFFFFF;stroke-width:1;stroke-dasharray:7,7;" width="242" x="1815" y="522.71"/><text fill="#FFFFFF" font-family="sans-serif" font-size="0" font-style="italic" lengthAdjust="spacing" textLength="0" x="1936" y="524.71">Â«container_boundaryÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="0" font-style="italic" lengthAdjust="spacing" textLength="0" x="1936" y="534.71">Â«boundaryÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="161.8516" x="1818" y="559.5616">Worker Processes</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="75.416" x="1818" y="574.4737">[container]</text></g><g class="entity" data-entity="rest_api" data-source-line="68" data-uid="ent0003" id="entity_rest_api"><rect fill="#7BB1E6" height="117.7813" style="stroke:#7BB1E6;stroke-width:0.5;" width="214.8789" x="1064.56" y="78"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="96.332" x="1123.8334" y="100.9951">Â«componentÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="45.6875" x="1131.3393" y="119.1484">REST</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="5.5703" x="1177.0268" y="119.1484">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="30.0625" x="1182.5971" y="119.1484">API</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="53.5605" x="1145.2192" y="134.0605">[FastAPI]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1169.7744" y="149.8857">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36.0732" x="1081.1806" y="166.1826">HTTP</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1117.2538" y="166.1826">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69.3711" x="1121.704" y="166.1826">endpoints</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1191.0751" y="166.1826">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="19.25" x="1195.5253" y="166.1826">for</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1214.7753" y="166.1826">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43.5928" x="1219.2255" y="166.1826">model</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93.7822" x="1074.56" y="182.4795">management</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1168.3422" y="182.4795">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26.3389" x="1172.7924" y="182.4795">and</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1199.1313" y="182.4795">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65.8574" x="1203.5815" y="182.4795">inference</text></g><g class="entity" data-entity="grpc_api" data-source-line="68" data-uid="ent0004" id="entity_grpc_api"><rect fill="#7BB1E6" height="117.7813" style="stroke:#7BB1E6;stroke-width:0.5;" width="217.4424" x="1314.28" y="78"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="96.332" x="1374.8352" y="100.9951">Â«componentÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="47.2422" x="1381.5637" y="119.1484">gRPC</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="5.5703" x="1428.8059" y="119.1484">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="30.0625" x="1434.3762" y="119.1484">API</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="46.8047" x="1399.5988" y="134.0605">[grpcio]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1420.7761" y="149.8857">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127.1348" x="1324.28" y="166.1826">High-performance</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1451.4148" y="166.1826">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65.8574" x="1455.865" y="166.1826">inference</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50.1484" x="1397.927" y="182.4795">service</text></g><g class="entity" data-entity="cli" data-source-line="68" data-uid="ent0005" id="entity_cli"><rect fill="#7BB1E6" height="101.4844" style="stroke:#7BB1E6;stroke-width:0.5;" width="189.1621" x="840.42" y="86.14"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="96.332" x="886.835" y="109.1351">Â«componentÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="27.8906" x="921.0557" y="127.2884">CLI</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="37.957" x="916.0225" y="142.2005">[Click]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="932.776" y="158.0257">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102.2725" x="850.42" y="174.3226">Command-line</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="952.6925" y="174.3226">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62.4395" x="957.1427" y="174.3226">interface</text></g><g class="entity" data-entity="registry_svc" data-source-line="68" data-uid="ent0007" id="entity_registry_svc"><rect fill="#7BB1E6" height="101.4844" style="stroke:#7BB1E6;stroke-width:0.5;" width="216.4033" x="844.8" y="339.93"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="96.332" x="904.8356" y="362.9251">Â«componentÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="75.6016" x="879.1579" y="381.0784">Registry</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="5.5703" x="954.7595" y="381.0784">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="66.5156" x="960.3298" y="381.0784">Service</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="50.959" x="927.5222" y="395.9905">[Python]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="950.7766" y="411.8157">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42.0342" x="854.8" y="428.1126">Model</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="896.8342" y="428.1126">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51.6865" x="901.2844" y="428.1126">catalog</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="952.9709" y="428.1126">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93.7822" x="957.4211" y="428.1126">management</text></g><g class="entity" data-entity="lifecycle_svc" data-source-line="68" data-uid="ent0008" id="entity_lifecycle_svc"><rect fill="#7BB1E6" height="117.7813" style="stroke:#7BB1E6;stroke-width:0.5;" width="192.0879" x="1095.96" y="331.78"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="96.332" x="1143.8379" y="354.7751">Â«componentÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="79.2266" x="1116.3477" y="372.9284">Lifecycle</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="5.5703" x="1195.5743" y="372.9284">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="66.5156" x="1201.1446" y="372.9284">Service</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="50.959" x="1166.5245" y="387.8405">[Python]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1189.7788" y="403.6657">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42.0342" x="1105.96" y="419.9626">Model</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1147.9942" y="419.9626">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125.6035" x="1152.4444" y="419.9626">loading/unloading</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93.4404" x="1145.2837" y="436.2595">orchestration</text></g><g class="entity" data-entity="inference_svc" data-source-line="68" data-uid="ent0009" id="entity_inference_svc"><rect fill="#7BB1E6" height="117.7813" style="stroke:#7BB1E6;stroke-width:0.5;" width="177.7109" x="1323.14" y="331.78"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="96.332" x="1363.8295" y="354.7751">Â«componentÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="85.625" x="1333.14" y="372.9284">Inference</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="5.5703" x="1418.765" y="372.9284">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="66.5156" x="1424.3353" y="372.9284">Service</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="50.959" x="1386.516" y="387.8405">[Python]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1409.7704" y="403.6657">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57.4971" x="1337.1796" y="419.9626">Request</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1394.6766" y="419.9626">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56.8955" x="1399.1268" y="419.9626">queuing</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1456.0223" y="419.9626">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26.3389" x="1460.4725" y="419.9626">and</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68.8994" x="1377.5458" y="436.2595">execution</text></g><g class="entity" data-entity="observability_svc" data-source-line="68" data-uid="ent0010" id="entity_observability_svc"><rect fill="#7BB1E6" height="101.4844" style="stroke:#7BB1E6;stroke-width:0.5;" width="212.6172" x="1535.69" y="339.93"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="96.332" x="1593.8326" y="362.9251">Â«componentÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="120.5313" x="1545.69" y="381.0784">Observability</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="5.5703" x="1666.2213" y="381.0784">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="66.5156" x="1671.7916" y="381.0784">Service</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="50.959" x="1616.5191" y="395.9905">[Python]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1639.7735" y="411.8157">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50.8184" x="1573.0308" y="428.1126">Metrics</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1623.8492" y="428.1126">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26.3389" x="1628.2994" y="428.1126">and</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1654.6382" y="428.1126">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51.8779" x="1659.0884" y="428.1126">logging</text></g><g class="entity" data-entity="registry_domain" data-source-line="68" data-uid="ent0012" id="entity_registry_domain"><rect fill="#7BB1E6" height="117.7813" style="stroke:#7BB1E6;stroke-width:0.5;" width="214.8926" x="22.55" y="585.56"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="96.332" x="81.8303" y="608.5551">Â«componentÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="75.6016" x="55.1018" y="626.7084">Registry</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="5.5703" x="130.7033" y="626.7084">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="68.6172" x="136.2736" y="626.7084">Domain</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="50.959" x="104.5168" y="641.6205">[Python]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="127.7712" y="657.4457">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42.0342" x="32.55" y="673.7426">Model</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="74.5842" y="673.7426">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52.1514" x="79.0344" y="673.7426">entities</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="131.1857" y="673.7426">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26.3389" x="135.6359" y="673.7426">and</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="161.9748" y="673.7426">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61.0176" x="166.425" y="673.7426">business</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="34.4258" x="112.7834" y="690.0395">rules</text></g><g class="entity" data-entity="lifecycle_domain" data-source-line="68" data-uid="ent0013" id="entity_lifecycle_domain"><rect fill="#7BB1E6" height="117.7813" style="stroke:#7BB1E6;stroke-width:0.5;" width="175.1689" x="272.42" y="585.56"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="96.332" x="311.8385" y="608.5551">Â«componentÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="79.2266" x="283.2974" y="626.7084">Lifecycle</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="5.5703" x="362.524" y="626.7084">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="68.6172" x="368.0943" y="626.7084">Domain</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="50.959" x="334.525" y="641.6205">[Python]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="357.7794" y="657.4457">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56.9365" x="282.42" y="673.7426">Memory</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="339.3565" y="673.7426">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93.7822" x="343.8067" y="673.7426">management</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52.7256" x="333.6417" y="690.0395">policies</text></g><g class="entity" data-entity="inference_domain" data-source-line="68" data-uid="ent0014" id="entity_inference_domain"><rect fill="#7BB1E6" height="117.7813" style="stroke:#7BB1E6;stroke-width:0.5;" width="192.9082" x="482.55" y="585.56"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="96.332" x="530.8381" y="608.5551">Â«componentÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="85.625" x="499.0979" y="626.7084">Inference</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="5.5703" x="584.7229" y="626.7084">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="68.6172" x="590.2932" y="626.7084">Domain</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="50.959" x="553.5246" y="641.6205">[Python]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="576.779" y="657.4457">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61.8926" x="492.55" y="673.7426">Batching</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="554.4426" y="673.7426">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26.3389" x="558.8928" y="673.7426">and</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="585.2316" y="673.7426">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75.7764" x="589.6818" y="673.7426">scheduling</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32.9287" x="562.5397" y="690.0395">logic</text></g><g class="entity" data-entity="db_adapter" data-source-line="68" data-uid="ent0016" id="entity_db_adapter"><rect fill="#7BB1E6" height="101.4844" style="stroke:#7BB1E6;stroke-width:0.5;" width="186.2227" x="981.89" y="593.71"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="96.332" x="1026.8353" y="616.7051">Â«componentÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="85.1484" x="993.4037" y="634.8584">Database</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="5.5703" x="1078.5521" y="634.8584">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="72.4766" x="1084.1224" y="634.8584">Adapter</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="85.0313" x="1032.4857" y="649.7705">[SQLAlchemy]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1072.7762" y="665.5957">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80.7529" x="991.89" y="681.8926">PostgreSQL</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1072.6429" y="681.8926">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81.0195" x="1077.0931" y="681.8926">persistence</text></g><g class="entity" data-entity="hf_adapter" data-source-line="68" data-uid="ent0017" id="entity_hf_adapter"><rect fill="#7BB1E6" height="101.4844" style="stroke:#7BB1E6;stroke-width:0.5;" width="216.125" x="730.94" y="593.71"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="96.332" x="790.8365" y="616.7051">Â«componentÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="118.0781" x="740.94" y="634.8584">HuggingFace</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="5.5703" x="859.0181" y="634.8584">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="72.4766" x="864.5884" y="634.8584">Adapter</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="86.9707" x="795.5171" y="649.7705">[transformers]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="836.7774" y="665.5957">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42.0342" x="771.0875" y="681.8926">Model</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="813.1216" y="681.8926">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89.3457" x="817.5718" y="681.8926">downloading</text></g><g class="entity" data-entity="storage_adapter" data-source-line="68" data-uid="ent0018" id="entity_storage_adapter"><rect fill="#7BB1E6" height="101.4844" style="stroke:#7BB1E6;stroke-width:0.5;" width="169.2031" x="1406.4" y="593.71"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="96.332" x="1442.8355" y="616.7051">Â«componentÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="71.1563" x="1416.4" y="634.8584">Storage</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="5.5703" x="1487.5563" y="634.8584">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="72.4766" x="1493.1266" y="634.8584">Adapter</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="44.0039" x="1468.9996" y="649.7705">[boto3]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1488.7765" y="665.5957">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62.501" x="1419.0738" y="681.8926">S3/MinIO</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1481.5748" y="681.8926">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76.9043" x="1486.025" y="681.8926">integration</text></g><g class="entity" data-entity="process_adapter" data-source-line="68" data-uid="ent0019" id="entity_process_adapter"><rect fill="#7BB1E6" height="117.7813" style="stroke:#7BB1E6;stroke-width:0.5;" width="168.0391" x="1202.98" y="585.56"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="96.332" x="1238.8335" y="608.5551">Â«componentÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="69.9922" x="1212.98" y="626.7084">Process</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="5.5703" x="1282.9722" y="626.7084">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="72.4766" x="1288.5425" y="626.7084">Adapter</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="104.9648" x="1234.5171" y="641.6205">[multiprocessing]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1284.7744" y="657.4457">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50.6406" x="1232.4009" y="673.7426">Worker</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1283.0415" y="673.7426">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54.1064" x="1287.4917" y="673.7426">process</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93.7822" x="1240.1084" y="690.0395">management</text></g><g class="entity" data-entity="metrics_adapter" data-source-line="68" data-uid="ent0020" id="entity_metrics_adapter"><rect fill="#7BB1E6" height="101.4844" style="stroke:#7BB1E6;stroke-width:0.5;" width="164.8516" x="1610.57" y="593.71"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="96.332" x="1644.8298" y="616.7051">Â«componentÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="66.8047" x="1620.57" y="634.8584">Metrics</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="5.5703" x="1687.3747" y="634.8584">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="72.4766" x="1692.945" y="634.8584">Adapter</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="120.8379" x="1632.5768" y="649.7705">[prometheus_client]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1690.7707" y="665.5957">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50.8184" x="1642.5637" y="681.8926">Metrics</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1693.382" y="681.8926">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="45.5957" x="1697.8322" y="681.8926">export</text></g><g class="entity" data-entity="model_worker" data-source-line="68" data-uid="ent0022" id="entity_model_worker"><rect fill="#7BB1E6" height="101.4844" style="stroke:#7BB1E6;stroke-width:0.5;" width="209.752" x="1831.12" y="593.71"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="96.332" x="1887.83" y="616.7051">Â«componentÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="54.7031" x="1872.9022" y="634.8584">Model</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="5.5703" x="1927.6054" y="634.8584">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="65.9141" x="1933.1757" y="634.8584">Worker</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="50.959" x="1910.5165" y="649.7705">[Python]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1933.7709" y="665.5957">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55.4463" x="1841.12" y="681.8926">Isolated</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1896.5663" y="681.8926">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54.1064" x="1901.0165" y="681.8926">process</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1955.1229" y="681.8926">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="23.2559" x="1959.5731" y="681.8926">per</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1982.829" y="681.8926">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43.5928" x="1987.2792" y="681.8926">model</text></g><g class="link" data-entity-1="rest_api" data-entity-2="registry_svc" data-link-type="dependency" data-source-line="1773" data-uid="lnk23" id="link_rest_api_registry_svc"><path d="M1121.48,195.97 C1083.71,239.39 1037.85,292.1237 1001.86,333.5037" fill="none" id="rest_api-to-registry_svc" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="996.61,339.54,1004.1237,335.4725,999.5964,331.5349,996.61,339.54" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="34.8486" x="1089" y="240.8469">Uses</text></g><g class="link" data-entity-1="rest_api" data-entity-2="inference_svc" data-link-type="dependency" data-source-line="1773" data-uid="lnk24" id="link_rest_api_inference_svc"><path d="M1245.37,196.14 C1265.77,213.56 1287.41,233.24 1306,252.78 C1329.2,277.17 1347.6133,300.0026 1366.3633,325.1926" fill="none" id="rest_api-to-inference_svc" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="1371.14,331.61,1368.7698,323.4013,1363.9567,326.9839,1371.14,331.61" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="34.8486" x="1297" y="240.8469">Uses</text></g><g class="link" data-entity-1="grpc_api" data-entity-2="inference_svc" data-link-type="dependency" data-source-line="1773" data-uid="lnk25" id="link_grpc_api_inference_svc"><path d="M1420.46,195.97 C1418.69,236.63 1416.6696,282.7576 1414.8896,323.4476" fill="none" id="grpc_api-to-inference_svc" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="1414.54,331.44,1417.8868,323.5788,1411.8925,323.3165,1414.54,331.44" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="34.8486" x="1419" y="240.8469">Uses</text></g><g class="link" data-entity-1="cli" data-entity-2="registry_svc" data-link-type="dependency" data-source-line="1773" data-uid="lnk26" id="link_cli_registry_svc"><path d="M938.58,187.93 C941.73,231.96 945.7087,287.7404 948.8587,331.7404" fill="none" id="cli-to-registry_svc" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="949.43,339.72,951.8511,331.5262,945.8664,331.9546,949.43,339.72" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="34.8486" x="943" y="240.8469">Uses</text></g><g class="link" data-entity-1="registry_svc" data-entity-2="registry_domain" data-link-type="dependency" data-source-line="1773" data-uid="lnk27" id="link_registry_svc_registry_domain"><path d="M844.41,400.81 C674.48,416.57 354.79,452.44 255,506.56 C220.63,525.2 195.637,550.6617 173.697,578.9117" fill="none" id="registry_svc-to-registry_domain" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="168.79,585.23,176.0664,580.7518,171.3277,577.0716,168.79,585.23" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="34.8486" x="309" y="494.6269">Uses</text></g><g class="link" data-entity-1="lifecycle_svc" data-entity-2="lifecycle_domain" data-link-type="dependency" data-source-line="1773" data-uid="lnk28" id="link_lifecycle_svc_lifecycle_domain"><path d="M1124.81,449.99 C1110.52,459.53 1094.92,468.07 1079,473.56 C1056.19,481.42 886.1,480.36 862,481.56 C773.71,485.97 543.01,464.98 465,506.56 C432.36,523.96 410.9499,549.6088 393.2099,578.5588" fill="none" id="lifecycle_svc-to-lifecycle_domain" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="389.03,585.38,395.7678,580.1263,390.6519,576.9914,389.03,585.38" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="34.8486" x="863" y="494.6269">Uses</text></g><g class="link" data-entity-1="inference_svc" data-entity-2="inference_domain" data-link-type="dependency" data-source-line="1773" data-uid="lnk29" id="link_inference_svc_inference_domain"><path d="M1346.05,449.98 C1317.45,470.82 1282.24,491.03 1246,498.56 C1217.11,504.56 742.15,495.02 715,506.56 C676.61,522.87 648.458,549.5019 624.458,578.9119" fill="none" id="inference_svc-to-inference_domain" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="619.4,585.11,626.7823,580.8086,622.1337,577.0151,619.4,585.11" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="34.8486" x="1292" y="494.6269">Uses</text></g><g class="link" data-entity-1="registry_svc" data-entity-2="db_adapter" data-link-type="dependency" data-source-line="1773" data-uid="lnk30" id="link_registry_svc_db_adapter"><path d="M977.25,441.71 C998.58,485.74 1025.9916,542.3006 1047.3116,586.3006" fill="none" id="registry_svc-to-db_adapter" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="1050.8,593.5,1050.0113,584.9925,1044.6118,587.6088,1050.8,593.5" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="34.8486" x="1004" y="494.6269">Uses</text></g><g class="link" data-entity-1="registry_svc" data-entity-2="hf_adapter" data-link-type="dependency" data-source-line="1773" data-uid="lnk31" id="link_registry_svc_hf_adapter"><path d="M930.34,441.71 C910.41,485.74 884.8394,542.2121 864.9194,586.2121" fill="none" id="registry_svc-to-hf_adapter" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="861.62,593.5,867.6524,587.4494,862.1865,584.9748,861.62,593.5" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="34.8486" x="910" y="494.6269">Uses</text></g><g class="link" data-entity-1="lifecycle_svc" data-entity-2="process_adapter" data-link-type="dependency" data-source-line="1773" data-uid="lnk32" id="link_lifecycle_svc_process_adapter"><path d="M1195.59,449.98 C1197.66,466.01 1200.91,483.19 1206,498.56 C1215.97,528.65 1228.1995,552.7788 1243.6095,578.3388" fill="none" id="lifecycle_svc-to-process_adapter" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="1247.74,585.19,1246.1786,576.7899,1241.0403,579.8878,1247.74,585.19" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="34.8486" x="1207" y="494.6269">Uses</text></g><g class="link" data-entity-1="inference_svc" data-entity-2="storage_adapter" data-link-type="dependency" data-source-line="1773" data-uid="lnk33" id="link_inference_svc_storage_adapter"><path d="M1373.9,450.04 C1367.99,466.31 1366.33,483.61 1375,498.56 C1378.6,504.76 1383.63,501.81 1389,506.56 C1417.18,531.51 1438.0907,558.7248 1456.4607,586.5348" fill="none" id="inference_svc-to-storage_adapter" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="1460.87,593.21,1458.9639,584.8813,1453.9575,588.1883,1460.87,593.21" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="34.8486" x="1376" y="494.6269">Uses</text></g><g class="link" data-entity-1="observability_svc" data-entity-2="metrics_adapter" data-link-type="dependency" data-source-line="1773" data-uid="lnk34" id="link_observability_svc_metrics_adapter"><path d="M1664.28,441.76 C1669.18,454.52 1673.84,468.37 1677,481.56 C1685.81,518.36 1689.3394,553.0121 1691.1194,585.2821" fill="none" id="observability_svc-to-metrics_adapter" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="1691.56,593.27,1694.1148,585.1169,1688.1239,585.4474,1691.56,593.27" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="34.8486" x="1680" y="494.6269">Uses</text></g><g class="link" data-entity-1="lifecycle_svc" data-entity-2="model_worker" data-link-type="dependency" data-source-line="1773" data-uid="lnk35" id="link_lifecycle_svc_model_worker"><path d="M1260.63,449.94 C1274.85,459.35 1290.31,467.86 1306,473.56 C1351.66,490.13 1368.17,468.67 1415,481.56 C1431.29,486.04 1432.6,494.49 1449,498.56 C1485.89,507.72 1755.84,492.11 1791,506.56 C1834.55,524.46 1867.6046,555.8442 1893.8446,587.0842" fill="none" id="lifecycle_svc-to-model_worker" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="1898.99,593.21,1896.1418,585.1547,1891.5475,589.0137,1898.99,593.21" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="65.5967" x="1450" y="494.6269">Manages</text></g><g class="link" data-entity-1="inference_svc" data-entity-2="model_worker" data-link-type="dependency" data-source-line="1773" data-uid="lnk36" id="link_inference_svc_model_worker"><path d="M1480.68,449.92 C1508.37,471.98 1537.6,493.12 1554,498.56 C1604.02,515.15 1742.37,486.27 1791,506.56 C1834.45,524.68 1867.5044,556.0728 1893.7744,587.2428" fill="none" id="inference_svc-to-model_worker" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="1898.93,593.36,1896.0684,585.3095,1891.4805,589.1761,1898.93,593.36" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="44.478" x="1555" y="494.6269">Sends</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.5259" x="1599.478" y="494.6269">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="64.2954" x="1604.0039" y="494.6269">requests</text></g></g></svg></div></div>

<h3 id="42-directory-structure">4.2 Directory Structure<a class="headerlink" href="#42-directory-structure" title="Permanent link">&para;</a></h3>
<pre><code class="language-bash">src/modelmora/
âââ registry/                                   # Registry Bounded Context
â   âââ domain/                                 # Domain Layer
â   â   âââ model.py                            # Model entity
â   â   âââ model_version.py                    # ModelVersion entity
â   â   âââ model_lock.py                       # ModelLock entity
â   â   âââ model_config.py                     # ModelConfig entity
â   â   âââ model_catalog.py                    # ModelCatalog aggregate
â   â   âââ model_id.py                         # ModelId value object
â   â   âââ task_type.py                        # TaskType value object
â   â   âââ checksum.py                         # Checksum value object
â   â   âââ resource_requirements.py            # ResourceRequirements value object
â   â   âââ i_model_repository.py               # IModelRepository interface
â   â   âââ i_lock_file_repository.py           # ILockFileRepository interface
â   â   âââ events/
â   â   â   âââ model_registered.py             # ModelRegistered event
â   â   â   âââ model_version_changed.py        # ModelVersionChanged event
â   â   â   âââ model_deleted.py                # ModelDeleted event
â   â   â   âââ model_download_requested.py     # ModelDownloadRequested event
â   â   âââ exceptions/
â   â       âââ model_not_found_exception.py    # ModelNotFoundException
â   â       âââ model_already_exists_exception.py  # ModelAlreadyExistsException
â   â       âââ invalid_model_exception.py      # InvalidModelException
â   â
â   âââ application/                            # Application Layer
â   â   âââ register_model/
â   â   â   âââ register_model_command.py       # RegisterModelCommand
â   â   â   âââ register_model_handler.py       # RegisterModelHandler
â   â   âââ list_models/
â   â   â   âââ list_models_command.py          # ListModelsCommand
â   â   â   âââ list_models_handler.py          # ListModelsHandler
â   â   âââ get_model/
â   â   â   âââ get_model_command.py            # GetModelCommand
â   â   â   âââ get_model_handler.py            # GetModelHandler
â   â   âââ update_model/
â   â   â   âââ update_model_command.py         # UpdateModelCommand
â   â   â   âââ update_model_handler.py         # UpdateModelHandler
â   â   âââ delete_model/
â   â   â   âââ delete_model_command.py         # DeleteModelCommand
â   â   â   âââ delete_model_handler.py         # DeleteModelHandler
â   â   âââ download_model/
â   â   â   âââ download_model_command.py       # DownloadModelCommand
â   â   â   âââ download_model_handler.py       # DownloadModelHandler
â   â   âââ generate_lock/
â   â   â   âââ generate_lock_command.py        # GenerateLockCommand
â   â   â   âââ generate_lock_handler.py        # GenerateLockHandler
â   â   âââ dto/
â   â       âââ model_response_dto.py           # ModelResponseDTO
â   â       âââ model_list_dto.py               # ModelListDTO
â   â       âââ lock_file_dto.py                # LockFileDTO
â   â
â   âââ infrastructure/                         # Infrastructure Layer
â       âââ sql/
â       â   âââ sql_model_repository.py         # PostgreSQL IModelRepository impl
â       â   âââ sql_lock_file_repository.py     # PostgreSQL ILockFileRepository impl
â       â   âââ models/
â       â   â   âââ model_orm.py                # SQLAlchemy Model ORM
â       â   â   âââ model_version_orm.py        # SQLAlchemy ModelVersion ORM
â       â   âââ migrations/
â       âââ downloaders/
â       â   âââ i_model_downloader.py           # IModelDownloader interface
â       â   âââ huggingface_downloader.py       # HuggingFace Hub implementation
â       â   âââ local_downloader.py             # Local filesystem implementation
â       âââ config/
â           âââ settings.py                     # Pydantic settings
â           âââ model_configs.yaml              # Curated metadata
â
âââ lifecycle/                                  # Lifecycle Bounded Context
â   âââ domain/                                 # Domain Layer
â   â   âââ loaded_model.py                     # LoadedModel entity
â   â   âââ model_process.py                    # ModelProcess entity
â   â   âââ memory_monitor.py                   # MemoryMonitor entity
â   â   âââ model_lifecycle_manager.py          # ModelLifecycleManager aggregate
â   â   âââ model_state.py                      # ModelState value object
â   â   âââ memory_usage.py                     # MemoryUsage value object
â   â   âââ health_status.py                    # HealthStatus value object
â   â   âââ model_loader.py                     # ModelLoader service
â   â   âââ health_checker.py                   # HealthChecker service
â   â   âââ i_process_manager.py                # IProcessManager interface
â   â   âââ policies/
â   â   â   âââ lru_eviction_policy.py          # LRUEvictionPolicy
â   â   â   âââ warmup_policy.py                # WarmupPolicy
â   â   âââ events/
â   â   â   âââ model_load_requested.py         # ModelLoadRequested event
â   â   â   âââ model_loaded.py                 # ModelLoaded event
â   â   â   âââ model_load_failed.py            # ModelLoadFailed event
â   â   â   âââ model_unloaded.py               # ModelUnloaded event
â   â   â   âââ model_evicted.py                # ModelEvicted event
â   â   â   âââ memory_threshold_exceeded.py    # MemoryThresholdExceeded event
â   â   âââ exceptions/
â   â       âââ model_load_failed_exception.py  # ModelLoadFailedException
â   â       âââ insufficient_memory_exception.py  # InsufficientMemoryException
â   â       âââ model_not_loaded_exception.py   # ModelNotLoadedException
â   â
â   âââ application/                            # Application Layer
â   â   âââ load_model/
â   â   â   âââ load_model_command.py           # LoadModelCommand
â   â   â   âââ load_model_handler.py           # LoadModelHandler
â   â   âââ unload_model/
â   â   â   âââ unload_model_command.py         # UnloadModelCommand
â   â   â   âââ unload_model_handler.py         # UnloadModelHandler
â   â   âââ warmup_model/
â   â   â   âââ warmup_model_command.py         # WarmupModelCommand
â   â   â   âââ warmup_model_handler.py         # WarmupModelHandler
â   â   âââ check_health/
â   â   â   âââ check_health_command.py         # CheckHealthCommand
â   â   â   âââ check_health_handler.py         # CheckHealthHandler
â   â   âââ evict_model/
â   â   â   âââ evict_model_command.py          # EvictModelCommand
â   â   â   âââ evict_model_handler.py          # EvictModelHandler
â   â   âââ dto/
â   â       âââ model_status_dto.py             # ModelStatusDTO
â   â       âââ health_check_dto.py             # HealthCheckDTO
â   â
â   âââ infrastructure/                         # Infrastructure Layer
â       âââ processing/
â       â   âââ multiprocess_manager.py         # IProcessManager implementation
â       â   âââ worker_pool.py                  # Worker pool management
â       â   âââ process_handle.py               # Process handle wrapper
â       âââ monitoring/
â           âââ system_memory_monitor.py        # System memory monitoring
â
âââ inference/                                  # Inference Bounded Context
â   âââ domain/                                 # Domain Layer
â   â   âââ inference_request.py                # InferenceRequest entity
â   â   âââ inference_job.py                    # InferenceJob entity
â   â   âââ batch.py                            # Batch entity
â   â   âââ inference_result.py                 # InferenceResult entity
â   â   âââ inference_queue.py                  # InferenceQueue aggregate
â   â   âââ job_id.py                           # JobId value object
â   â   âââ job_status.py                       # JobStatus value object
â   â   âââ priority.py                         # Priority value object
â   â   âââ input_data.py                       # InputData value object
â   â   âââ output_data.py                      # OutputData value object
â   â   âââ batch_accumulator.py                # BatchAccumulator service
â   â   âââ inference_executor.py               # InferenceExecutor service
â   â   âââ i_result_store.py                   # IResultStore interface
â   â   âââ policies/
â   â   â   âââ priority_policy.py              # PriorityPolicy
â   â   â   âââ batching_policy.py              # BatchingPolicy
â   â   â   âââ timeout_policy.py               # TimeoutPolicy
â   â   âââ events/
â   â   â   âââ inference_requested.py          # InferenceRequested event
â   â   â   âââ request_queued.py               # RequestQueued event
â   â   â   âââ batch_formed.py                 # BatchFormed event
â   â   â   âââ inference_started.py            # InferenceStarted event
â   â   â   âââ inference_completed.py          # InferenceCompleted event
â   â   â   âââ inference_failed.py             # InferenceFailed event
â   â   âââ exceptions/
â   â       âââ job_not_found_exception.py      # JobNotFoundException
â   â       âââ inference_timeout_exception.py  # InferenceTimeoutException
â   â       âââ invalid_input_exception.py      # InvalidInputException
â   â
â   âââ application/                            # Application Layer
â   â   âââ submit_request/
â   â   â   âââ submit_request_command.py       # SubmitRequestCommand
â   â   â   âââ submit_request_handler.py       # SubmitRequestHandler
â   â   âââ execute_batch/
â   â   â   âââ execute_batch_command.py        # ExecuteBatchCommand
â   â   â   âââ execute_batch_handler.py        # ExecuteBatchHandler
â   â   âââ get_job_status/
â   â   â   âââ get_job_status_command.py       # GetJobStatusCommand
â   â   â   âââ get_job_status_handler.py       # GetJobStatusHandler
â   â   âââ get_job_result/
â   â   â   âââ get_job_result_command.py       # GetJobResultCommand
â   â   â   âââ get_job_result_handler.py       # GetJobResultHandler
â   â   âââ cancel_request/
â   â   â   âââ cancel_request_command.py       # CancelRequestCommand
â   â   â   âââ cancel_request_handler.py       # CancelRequestHandler
â   â   âââ dto/
â   â       âââ inference_response_dto.py       # InferenceResponseDTO
â   â       âââ job_reference_dto.py            # JobReferenceDTO
â   â       âââ job_result_dto.py               # JobResultDTO
â   â
â   âââ infrastructure/                         # Infrastructure Layer
â       âââ storage/
â       â   âââ s3_result_store.py              # S3/MinIO IResultStore impl
â       â   âââ filesystem_result_store.py      # Local filesystem IResultStore impl
â       âââ queue/
â           âââ memory_queue.py                 # In-memory queue (MVP)
â           âââ redis_queue.py                  # Redis queue (production)
â
âââ observability/                              # Observability Bounded Context
â   âââ domain/                                 # Domain Layer
â   â   âââ metric.py                           # Metric entity
â   â   âââ log_entry.py                        # LogEntry entity
â   â   âââ trace.py                            # Trace entity
â   â   âââ metric_type.py                      # MetricType value object
â   â   âââ log_level.py                        # LogLevel value object
â   â   âââ trace_id.py                         # TraceId value object
â   â   âââ metrics_collector.py                # MetricsCollector service
â   â   âââ logger.py                           # Logger service
â   â   âââ tracer.py                           # Tracer service
â   â
â   âââ application/                            # Application Layer
â   â   âââ record_metric/
â   â   â   âââ record_metric_command.py        # RecordMetricCommand
â   â   â   âââ record_metric_handler.py        # RecordMetricHandler
â   â   âââ log_event/
â   â   â   âââ log_event_command.py            # LogEventCommand
â   â   â   âââ log_event_handler.py            # LogEventHandler
â   â   âââ create_trace/
â   â   â   âââ create_trace_command.py         # CreateTraceCommand
â   â   â   âââ create_trace_handler.py         # CreateTraceHandler
â   â   âââ dto/
â   â       âââ metric_dto.py                   # MetricDTO
â   â       âââ trace_dto.py                    # TraceDTO
â   â
â   âââ infrastructure/                         # Infrastructure Layer
â       âââ metrics/
â       â   âââ i_metrics_exporter.py           # IMetricsExporter interface
â       â   âââ prometheus_exporter.py          # Prometheus implementation
â       âââ logging/
â           âââ structured_logger.py            # Structured logging implementation
â
âââ presentation/                       # Presentation Layer (Cross-cutting)
â   âââ rest/
â   â   âââ main.py                     # FastAPI app
â   â   âââ routes/
â   â   â   âââ models.py               # Model registry endpoints
â   â   â   âââ inference.py            # Inference endpoints
â   â   â   âââ management.py           # Lifecycle management endpoints
â   â   â   âââ health.py               # Health check endpoints
â   â   âââ schemas.py                  # Pydantic request/response models
â   â   âââ dependencies.py             # FastAPI dependencies
â   â
â   âââ grpc/
â   â   âââ server.py                   # gRPC server
â   â   âââ inference_service_impl.py   # InferenceService implementation
â   â   âââ registry_service_impl.py    # RegistryService implementation
â   â   âââ management_service_impl.py  # ManagementService implementation
â   â   âââ protos/
â   â       âââ inference.proto
â   â       âââ registry.proto
â   â       âââ management.proto
â   â
â   âââ cli/
â       âââ main.py                     # Click app
â       âââ commands/
â           âââ install.py              # modelmora install
â           âââ list.py                 # modelmora list
â           âââ info.py                 # modelmora info
â           âââ lock.py                 # modelmora lock
â           âââ serve.py                # modelmora serve
â           âââ health.py               # modelmora health
â           âââ uninstall.py            # modelmora uninstall
â
âââ worker/                             # Worker Process (Cross-cutting)
â   âââ main.py                         # Worker entry point
â   âââ model_executor.py               # Model inference execution
â   âââ ipc.py                          # Inter-process communication
â   âââ handlers/
â       âââ txt2embed_handler.py        # Text embedding handler
â       âââ img2embed_handler.py        # Image embedding handler
â       âââ txt2img_handler.py          # Text-to-image handler
â       âââ img2txt_handler.py          # Image-to-text handler
â       âââ txt2txt_handler.py          # Text-to-text handler
â
âââ shared/                             # Shared Kernel (Cross-cutting)
    âââ logging.py                      # Logging utilities
    âââ types.py                        # Common types
    âââ constants.py                    # System constants
    âââ exceptions.py                   # Base exceptions
    âââ event_bus.py                    # Event bus implementation
</code></pre>
<hr />
<h2 id="5-key-workflows">5. Key Workflows<a class="headerlink" href="#5-key-workflows" title="Permanent link">&para;</a></h2>
<h3 id="51-model-registration-flow">5.1 Model Registration Flow<a class="headerlink" href="#51-model-registration-flow" title="Permanent link">&para;</a></h3>
<div class='puml-container'><div class="puml light" style=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="663px" preserveAspectRatio="xMidYMid meet" style="width:916px;height:663px;background:#FFFFFF;" version="1.1" viewBox="0 0 916 663" width="916px" zoomAndPan="magnify" class="diagram"><defs/><g><g><title>REST API</title><rect fill="#F1F1F1" height="461.9922" style="stroke:#181818;stroke-width:1;" width="10" x="185.8481" y="82.5625"/></g><g><title>Registry Service</title><rect fill="#F1F1F1" height="388.5938" style="stroke:#181818;stroke-width:1;" width="10" x="372.0923" y="111.6953"/></g><g><title>Model Repository</title><rect fill="#F1F1F1" height="87.3984" style="stroke:#181818;stroke-width:1;" width="10" x="616.1299" y="182.9609"/></g><g><title>Model Repository</title><rect fill="#F1F1F1" height="87.3984" style="stroke:#181818;stroke-width:1;" width="10" x="616.1299" y="341.625"/></g><g><title>Client</title><rect fill="#000000" fill-opacity="0.00000" height="591.6563" width="8" x="28.2651" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="32" x2="32" y1="36.2969" y2="627.9531"/></g><g><title>REST API</title><rect fill="#000000" fill-opacity="0.00000" height="591.6563" width="8" x="186.8481" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="190.543" x2="190.543" y1="36.2969" y2="627.9531"/></g><g><title>Registry Service</title><rect fill="#000000" fill-opacity="0.00000" height="591.6563" width="8" x="373.0923" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="377.0259" x2="377.0259" y1="36.2969" y2="627.9531"/></g><g><title>Model Repository</title><rect fill="#000000" fill-opacity="0.00000" height="591.6563" width="8" x="617.1299" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="620.3516" x2="620.3516" y1="36.2969" y2="627.9531"/></g><g><title>HF Downloader</title><rect fill="#000000" fill-opacity="0.00000" height="591.6563" width="8" x="755.4028" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="758.9082" x2="758.9082" y1="36.2969" y2="627.9531"/></g><g><title>Database</title><rect fill="#000000" fill-opacity="0.00000" height="591.6563" width="8" x="866.2979" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="869.8975" x2="869.8975" y1="36.2969" y2="627.9531"/></g><g class="participant participant-head" data-participant="Client"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="54.5303" x="5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40.5303" x="12" y="24.9951">Client</text></g><g class="participant participant-tail" data-participant="Client"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="54.5303" x="5" y="626.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40.5303" x="12" y="646.9482">Client</text></g><g class="participant participant-head" data-participant="API"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="76.6104" x="152.543" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62.6104" x="159.543" y="24.9951">REST API</text></g><g class="participant participant-tail" data-participant="API"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="76.6104" x="152.543" y="626.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62.6104" x="159.543" y="646.9482">REST API</text></g><g class="participant participant-head" data-participant="Registry"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="128.1328" x="313.0259" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114.1328" x="320.0259" y="24.9951">Registry Service</text></g><g class="participant participant-tail" data-participant="Registry"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="128.1328" x="313.0259" y="626.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114.1328" x="320.0259" y="646.9482">Registry Service</text></g><g class="participant participant-head" data-participant="Repo"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="135.5566" x="553.3516" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="121.5566" x="560.3516" y="24.9951">Model Repository</text></g><g class="participant participant-tail" data-participant="Repo"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="135.5566" x="553.3516" y="626.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="121.5566" x="560.3516" y="646.9482">Model Repository</text></g><g class="participant participant-head" data-participant="HF"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="120.9893" x="698.9082" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106.9893" x="705.9082" y="24.9951">HF Downloader</text></g><g class="participant participant-tail" data-participant="HF"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="120.9893" x="698.9082" y="626.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106.9893" x="705.9082" y="646.9482">HF Downloader</text></g><g class="participant participant-head" data-participant="DB"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="80.8008" x="829.8975" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66.8008" x="836.8975" y="24.9951">Database</text></g><g class="participant participant-tail" data-participant="DB"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="80.8008" x="829.8975" y="626.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66.8008" x="836.8975" y="646.9482">Database</text></g><g><title>REST API</title><rect fill="#F1F1F1" height="461.9922" style="stroke:#181818;stroke-width:1;" width="10" x="185.8481" y="82.5625"/></g><g><title>Registry Service</title><rect fill="#F1F1F1" height="388.5938" style="stroke:#181818;stroke-width:1;" width="10" x="372.0923" y="111.6953"/></g><g><title>Model Repository</title><rect fill="#F1F1F1" height="87.3984" style="stroke:#181818;stroke-width:1;" width="10" x="616.1299" y="182.9609"/></g><g><title>Model Repository</title><rect fill="#F1F1F1" height="87.3984" style="stroke:#181818;stroke-width:1;" width="10" x="616.1299" y="341.625"/></g><g class="message" data-participant-1="Client" data-participant-2="API"><polygon fill="#181818" points="173.8481,78.5625,183.8481,82.5625,173.8481,86.5625,177.8481,82.5625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="32.2651" x2="179.8481" y1="82.5625" y2="82.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134.583" x="39.2651" y="62.3638">POST /api/v1/models</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131.2632" x="39.2651" y="77.4966">{model_id, version}</text></g><g class="message" data-participant-1="API" data-participant-2="Registry"><polygon fill="#181818" points="360.0923,107.6953,370.0923,111.6953,360.0923,115.6953,364.0923,111.6953" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="195.8481" x2="366.0923" y1="111.6953" y2="111.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157.2441" x="202.8481" y="106.6294">register_model(request)</text></g><g class="message" data-participant-1="Registry" data-participant-2="Registry"><line style="stroke:#181818;stroke-width:1;" x1="382.0923" x2="424.0923" y1="140.8281" y2="140.8281"/><line style="stroke:#181818;stroke-width:1;" x1="424.0923" x2="424.0923" y1="140.8281" y2="153.8281"/><line style="stroke:#181818;stroke-width:1;" x1="383.0923" x2="424.0923" y1="153.8281" y2="153.8281"/><polygon fill="#181818" points="393.0923,149.8281,383.0923,153.8281,393.0923,157.8281,389.0923,153.8281" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="178.8262" x="389.0923" y="135.7622">validate_model_metadata()</text></g><g class="message" data-participant-1="Registry" data-participant-2="Repo"><polygon fill="#181818" points="604.1299,178.9609,614.1299,182.9609,604.1299,186.9609,608.1299,182.9609" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="382.0923" x2="610.1299" y1="182.9609" y2="182.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134.4751" x="389.0923" y="177.895">find_by_id(model_id)</text></g><g class="message" data-participant-1="Repo" data-participant-2="DB"><polygon fill="#181818" points="858.2979,208.0938,868.2979,212.0938,858.2979,216.0938,862.2979,212.0938" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="626.1299" x2="864.2979" y1="212.0938" y2="212.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153.0483" x="633.1299" y="207.0278">SELECT * FROM models</text></g><g class="message" data-participant-1="DB" data-participant-2="Repo"><polygon fill="#181818" points="637.1299,237.2266,627.1299,241.2266,637.1299,245.2266,633.1299,241.2266" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="631.1299" x2="869.2979" y1="241.2266" y2="241.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="23.7021" x="643.1299" y="236.1606">null</text></g><g class="message" data-participant-1="Repo" data-participant-2="Registry"><polygon fill="#181818" points="393.0923,266.3594,383.0923,270.3594,393.0923,274.3594,389.0923,270.3594" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="387.0923" x2="620.1299" y1="270.3594" y2="270.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="33.9155" x="399.0923" y="265.2935">None</text></g><g class="message" data-participant-1="Registry" data-participant-2="Registry"><line style="stroke:#181818;stroke-width:1;" x1="382.0923" x2="424.0923" y1="299.4922" y2="299.4922"/><line style="stroke:#181818;stroke-width:1;" x1="424.0923" x2="424.0923" y1="299.4922" y2="312.4922"/><line style="stroke:#181818;stroke-width:1;" x1="383.0923" x2="424.0923" y1="312.4922" y2="312.4922"/><polygon fill="#181818" points="393.0923,308.4922,383.0923,312.4922,393.0923,316.4922,389.0923,312.4922" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142.9111" x="389.0923" y="294.4263">create_model_entity()</text></g><g class="message" data-participant-1="Registry" data-participant-2="Repo"><polygon fill="#181818" points="604.1299,337.625,614.1299,341.625,604.1299,345.625,608.1299,341.625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="382.0923" x2="610.1299" y1="341.625" y2="341.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="81.0532" x="389.0923" y="336.5591">save(model)</text></g><g class="message" data-participant-1="Repo" data-participant-2="DB"><polygon fill="#181818" points="858.2979,366.7578,868.2979,370.7578,858.2979,374.7578,862.2979,370.7578" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="626.1299" x2="864.2979" y1="370.7578" y2="370.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134.2466" x="633.1299" y="365.6919">INSERT INTO models</text></g><g class="message" data-participant-1="DB" data-participant-2="Repo"><polygon fill="#181818" points="637.1299,395.8906,627.1299,399.8906,637.1299,403.8906,633.1299,399.8906" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="631.1299" x2="869.2979" y1="399.8906" y2="399.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50.8511" x="643.1299" y="394.8247">success</text></g><g class="message" data-participant-1="Repo" data-participant-2="Registry"><polygon fill="#181818" points="393.0923,425.0234,383.0923,429.0234,393.0923,433.0234,389.0923,429.0234" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="387.0923" x2="620.1299" y1="429.0234" y2="429.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40.479" x="399.0923" y="423.9575">model</text></g><g class="message" data-participant-1="Registry" data-participant-2="Registry"><line style="stroke:#181818;stroke-width:1;" x1="382.0923" x2="424.0923" y1="458.1563" y2="458.1563"/><line style="stroke:#181818;stroke-width:1;" x1="424.0923" x2="424.0923" y1="458.1563" y2="471.1563"/><line style="stroke:#181818;stroke-width:1;" x1="383.0923" x2="424.0923" y1="471.1563" y2="471.1563"/><polygon fill="#181818" points="393.0923,467.1563,383.0923,471.1563,393.0923,475.1563,389.0923,471.1563" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="210.0376" x="389.0923" y="453.0903">publish_event(ModelRegistered)</text></g><g class="message" data-participant-1="Registry" data-participant-2="API"><polygon fill="#181818" points="206.8481,496.2891,196.8481,500.2891,206.8481,504.2891,202.8481,500.2891" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="200.8481" x2="376.0923" y1="500.2891" y2="500.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102.0513" x="212.8481" y="495.2231">ModelResponse</text></g><g class="message" data-participant-1="API" data-participant-2="Client"><polygon fill="#181818" points="43.2651,540.5547,33.2651,544.5547,43.2651,548.5547,39.2651,544.5547" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="37.2651" x2="189.8481" y1="544.5547" y2="544.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80.6787" x="49.2651" y="524.356">201 Created</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123.5952" x="49.2651" y="539.4888">{model_id, status}</text></g><path d="M37,557.5547 L37,612.5547 L345,612.5547 L345,567.5547 L335,557.5547 L37,557.5547" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M335,557.5547 L335,567.5547 L345,567.5547 L335,557.5547" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="287.79" x="43" y="574.6216">Model is registered but not downloaded yet.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="277.0688" x="43" y="589.7544">Download happens lazily on first inference</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="236.4438" x="43" y="604.8872">or explicitly via /download endpoint.</text></g></svg></div><div class="puml dark" style=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="663px" preserveAspectRatio="xMidYMid meet" style="width:916px;height:663px;background:#1B1B1B;" version="1.1" viewBox="0 0 916 663" width="916px" zoomAndPan="magnify" class="diagram"><defs/><g><rect fill="#1B1B1B" height="663" style="stroke:none;stroke-width:1;" width="916" x="0" y="0"/><g><title>REST API</title><rect fill="#313139" height="461.9922" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="185.8481" y="82.5625"/></g><g><title>Registry Service</title><rect fill="#313139" height="388.5938" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="372.0923" y="111.6953"/></g><g><title>Model Repository</title><rect fill="#313139" height="87.3984" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="616.1299" y="182.9609"/></g><g><title>Model Repository</title><rect fill="#313139" height="87.3984" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="616.1299" y="341.625"/></g><g><title>Client</title><rect fill="#000000" fill-opacity="0.00000" height="591.6563" width="8" x="28.2651" y="36.2969"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="32" x2="32" y1="36.2969" y2="627.9531"/></g><g><title>REST API</title><rect fill="#000000" fill-opacity="0.00000" height="591.6563" width="8" x="186.8481" y="36.2969"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="190.543" x2="190.543" y1="36.2969" y2="627.9531"/></g><g><title>Registry Service</title><rect fill="#000000" fill-opacity="0.00000" height="591.6563" width="8" x="373.0923" y="36.2969"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="377.0259" x2="377.0259" y1="36.2969" y2="627.9531"/></g><g><title>Model Repository</title><rect fill="#000000" fill-opacity="0.00000" height="591.6563" width="8" x="617.1299" y="36.2969"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="620.3516" x2="620.3516" y1="36.2969" y2="627.9531"/></g><g><title>HF Downloader</title><rect fill="#000000" fill-opacity="0.00000" height="591.6563" width="8" x="755.4028" y="36.2969"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="758.9082" x2="758.9082" y1="36.2969" y2="627.9531"/></g><g><title>Database</title><rect fill="#000000" fill-opacity="0.00000" height="591.6563" width="8" x="866.2979" y="36.2969"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="869.8975" x2="869.8975" y1="36.2969" y2="627.9531"/></g><g class="participant participant-head" data-participant="Client"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="54.5303" x="5" y="5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40.5303" x="12" y="24.9951">Client</text></g><g class="participant participant-tail" data-participant="Client"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="54.5303" x="5" y="626.9531"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40.5303" x="12" y="646.9482">Client</text></g><g class="participant participant-head" data-participant="API"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="76.6104" x="152.543" y="5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62.6104" x="159.543" y="24.9951">REST API</text></g><g class="participant participant-tail" data-participant="API"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="76.6104" x="152.543" y="626.9531"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62.6104" x="159.543" y="646.9482">REST API</text></g><g class="participant participant-head" data-participant="Registry"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="128.1328" x="313.0259" y="5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114.1328" x="320.0259" y="24.9951">Registry Service</text></g><g class="participant participant-tail" data-participant="Registry"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="128.1328" x="313.0259" y="626.9531"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114.1328" x="320.0259" y="646.9482">Registry Service</text></g><g class="participant participant-head" data-participant="Repo"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="135.5566" x="553.3516" y="5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="121.5566" x="560.3516" y="24.9951">Model Repository</text></g><g class="participant participant-tail" data-participant="Repo"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="135.5566" x="553.3516" y="626.9531"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="121.5566" x="560.3516" y="646.9482">Model Repository</text></g><g class="participant participant-head" data-participant="HF"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="120.9893" x="698.9082" y="5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106.9893" x="705.9082" y="24.9951">HF Downloader</text></g><g class="participant participant-tail" data-participant="HF"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="120.9893" x="698.9082" y="626.9531"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106.9893" x="705.9082" y="646.9482">HF Downloader</text></g><g class="participant participant-head" data-participant="DB"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="80.8008" x="829.8975" y="5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66.8008" x="836.8975" y="24.9951">Database</text></g><g class="participant participant-tail" data-participant="DB"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="80.8008" x="829.8975" y="626.9531"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66.8008" x="836.8975" y="646.9482">Database</text></g><g><title>REST API</title><rect fill="#313139" height="461.9922" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="185.8481" y="82.5625"/></g><g><title>Registry Service</title><rect fill="#313139" height="388.5938" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="372.0923" y="111.6953"/></g><g><title>Model Repository</title><rect fill="#313139" height="87.3984" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="616.1299" y="182.9609"/></g><g><title>Model Repository</title><rect fill="#313139" height="87.3984" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="616.1299" y="341.625"/></g><g class="message" data-participant-1="Client" data-participant-2="API"><polygon fill="#E7E7E7" points="173.8481,78.5625,183.8481,82.5625,173.8481,86.5625,177.8481,82.5625" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="32.2651" x2="179.8481" y1="82.5625" y2="82.5625"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134.583" x="39.2651" y="62.3638">POST /api/v1/models</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131.2632" x="39.2651" y="77.4966">{model_id, version}</text></g><g class="message" data-participant-1="API" data-participant-2="Registry"><polygon fill="#E7E7E7" points="360.0923,107.6953,370.0923,111.6953,360.0923,115.6953,364.0923,111.6953" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="195.8481" x2="366.0923" y1="111.6953" y2="111.6953"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157.2441" x="202.8481" y="106.6294">register_model(request)</text></g><g class="message" data-participant-1="Registry" data-participant-2="Registry"><line style="stroke:#E7E7E7;stroke-width:1;" x1="382.0923" x2="424.0923" y1="140.8281" y2="140.8281"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="424.0923" x2="424.0923" y1="140.8281" y2="153.8281"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="383.0923" x2="424.0923" y1="153.8281" y2="153.8281"/><polygon fill="#E7E7E7" points="393.0923,149.8281,383.0923,153.8281,393.0923,157.8281,389.0923,153.8281" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="178.8262" x="389.0923" y="135.7622">validate_model_metadata()</text></g><g class="message" data-participant-1="Registry" data-participant-2="Repo"><polygon fill="#E7E7E7" points="604.1299,178.9609,614.1299,182.9609,604.1299,186.9609,608.1299,182.9609" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="382.0923" x2="610.1299" y1="182.9609" y2="182.9609"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134.4751" x="389.0923" y="177.895">find_by_id(model_id)</text></g><g class="message" data-participant-1="Repo" data-participant-2="DB"><polygon fill="#E7E7E7" points="858.2979,208.0938,868.2979,212.0938,858.2979,216.0938,862.2979,212.0938" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="626.1299" x2="864.2979" y1="212.0938" y2="212.0938"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153.0483" x="633.1299" y="207.0278">SELECT * FROM models</text></g><g class="message" data-participant-1="DB" data-participant-2="Repo"><polygon fill="#E7E7E7" points="637.1299,237.2266,627.1299,241.2266,637.1299,245.2266,633.1299,241.2266" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="631.1299" x2="869.2979" y1="241.2266" y2="241.2266"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="23.7021" x="643.1299" y="236.1606">null</text></g><g class="message" data-participant-1="Repo" data-participant-2="Registry"><polygon fill="#E7E7E7" points="393.0923,266.3594,383.0923,270.3594,393.0923,274.3594,389.0923,270.3594" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="387.0923" x2="620.1299" y1="270.3594" y2="270.3594"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="33.9155" x="399.0923" y="265.2935">None</text></g><g class="message" data-participant-1="Registry" data-participant-2="Registry"><line style="stroke:#E7E7E7;stroke-width:1;" x1="382.0923" x2="424.0923" y1="299.4922" y2="299.4922"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="424.0923" x2="424.0923" y1="299.4922" y2="312.4922"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="383.0923" x2="424.0923" y1="312.4922" y2="312.4922"/><polygon fill="#E7E7E7" points="393.0923,308.4922,383.0923,312.4922,393.0923,316.4922,389.0923,312.4922" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142.9111" x="389.0923" y="294.4263">create_model_entity()</text></g><g class="message" data-participant-1="Registry" data-participant-2="Repo"><polygon fill="#E7E7E7" points="604.1299,337.625,614.1299,341.625,604.1299,345.625,608.1299,341.625" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="382.0923" x2="610.1299" y1="341.625" y2="341.625"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="81.0532" x="389.0923" y="336.5591">save(model)</text></g><g class="message" data-participant-1="Repo" data-participant-2="DB"><polygon fill="#E7E7E7" points="858.2979,366.7578,868.2979,370.7578,858.2979,374.7578,862.2979,370.7578" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="626.1299" x2="864.2979" y1="370.7578" y2="370.7578"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134.2466" x="633.1299" y="365.6919">INSERT INTO models</text></g><g class="message" data-participant-1="DB" data-participant-2="Repo"><polygon fill="#E7E7E7" points="637.1299,395.8906,627.1299,399.8906,637.1299,403.8906,633.1299,399.8906" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="631.1299" x2="869.2979" y1="399.8906" y2="399.8906"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50.8511" x="643.1299" y="394.8247">success</text></g><g class="message" data-participant-1="Repo" data-participant-2="Registry"><polygon fill="#E7E7E7" points="393.0923,425.0234,383.0923,429.0234,393.0923,433.0234,389.0923,429.0234" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="387.0923" x2="620.1299" y1="429.0234" y2="429.0234"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40.479" x="399.0923" y="423.9575">model</text></g><g class="message" data-participant-1="Registry" data-participant-2="Registry"><line style="stroke:#E7E7E7;stroke-width:1;" x1="382.0923" x2="424.0923" y1="458.1563" y2="458.1563"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="424.0923" x2="424.0923" y1="458.1563" y2="471.1563"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="383.0923" x2="424.0923" y1="471.1563" y2="471.1563"/><polygon fill="#E7E7E7" points="393.0923,467.1563,383.0923,471.1563,393.0923,475.1563,389.0923,471.1563" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="210.0376" x="389.0923" y="453.0903">publish_event(ModelRegistered)</text></g><g class="message" data-participant-1="Registry" data-participant-2="API"><polygon fill="#E7E7E7" points="206.8481,496.2891,196.8481,500.2891,206.8481,504.2891,202.8481,500.2891" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="200.8481" x2="376.0923" y1="500.2891" y2="500.2891"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102.0513" x="212.8481" y="495.2231">ModelResponse</text></g><g class="message" data-participant-1="API" data-participant-2="Client"><polygon fill="#E7E7E7" points="43.2651,540.5547,33.2651,544.5547,43.2651,548.5547,39.2651,544.5547" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="37.2651" x2="189.8481" y1="544.5547" y2="544.5547"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80.6787" x="49.2651" y="524.356">201 Created</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123.5952" x="49.2651" y="539.4888">{model_id, status}</text></g><path d="M37,557.5547 L37,612.5547 L345,612.5547 L345,567.5547 L335,557.5547 L37,557.5547" fill="#714137" style="stroke:#E7E7E7;stroke-width:0.5;"/><path d="M335,557.5547 L335,567.5547 L345,567.5547 L335,557.5547" fill="#714137" style="stroke:#E7E7E7;stroke-width:0.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="287.79" x="43" y="574.6216">Model is registered but not downloaded yet.</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="277.0688" x="43" y="589.7544">Download happens lazily on first inference</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="236.4438" x="43" y="604.8872">or explicitly via /download endpoint.</text></g></svg></div></div>

<h3 id="52-lazy-model-loading-flow">5.2 Lazy Model Loading Flow<a class="headerlink" href="#52-lazy-model-loading-flow" title="Permanent link">&para;</a></h3>
<div class='puml-container'><div class="puml light" style=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="1039px" preserveAspectRatio="xMidYMid meet" style="width:1296px;height:1039px;background:#FFFFFF;" version="1.1" viewBox="0 0 1296 1039" width="1296px" zoomAndPan="magnify" class="diagram"><defs/><g><g><title>REST API</title><rect fill="#F1F1F1" height="903.75" style="stroke:#181818;stroke-width:1;" width="10" x="225.6099" y="82.5625"/></g><g><title>Inference Service</title><rect fill="#F1F1F1" height="830.3516" style="stroke:#181818;stroke-width:1;" width="10" x="461.9814" y="111.6953"/></g><g><title>Lifecycle Service</title><rect fill="#F1F1F1" height="529.1563" style="stroke:#181818;stroke-width:1;" width="10" x="702.0728" y="140.8281"/></g><g><title>Process Manager</title><rect fill="#F1F1F1" height="58.2656" style="stroke:#181818;stroke-width:1;" width="10" x="923.3306" y="320.4922"/></g><g><title>Process Manager</title><rect fill="#F1F1F1" height="183.8281" style="stroke:#181818;stroke-width:1;" width="10" x="923.3306" y="414.8906"/></g><g><title>Process Manager</title><rect fill="#F1F1F1" height="129.5313" style="stroke:#181818;stroke-width:1;" width="10" x="923.3306" y="783.3828"/></g><g><title>Model Worker</title><rect fill="#F1F1F1" height="429.7578" style="stroke:#181818;stroke-width:1;" width="10" x="1105.0566" y="454.0234"/></g><rect fill="none" height="146.6641" style="stroke:#000000;stroke-width:1.5;" width="544.3491" x="631.27" y="240.0938"/><g><title>Client</title><rect fill="#000000" fill-opacity="0.00000" height="968.0156" width="8" x="28.2651" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="32" x2="32" y1="36.2969" y2="1004.3125"/></g><g><title>REST API</title><rect fill="#000000" fill-opacity="0.00000" height="968.0156" width="8" x="226.6099" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="230.3047" x2="230.3047" y1="36.2969" y2="1004.3125"/></g><g><title>Inference Service</title><rect fill="#000000" fill-opacity="0.00000" height="968.0156" width="8" x="462.9814" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="466.8374" x2="466.8374" y1="36.2969" y2="1004.3125"/></g><g><title>Lifecycle Service</title><rect fill="#000000" fill-opacity="0.00000" height="968.0156" width="8" x="703.0728" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="706.27" x2="706.27" y1="36.2969" y2="1004.3125"/></g><g><title>Process Manager</title><rect fill="#000000" fill-opacity="0.00000" height="968.0156" width="8" x="924.3306" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="927.5913" x2="927.5913" y1="36.2969" y2="1004.3125"/></g><g><title>Model Worker</title><rect fill="#000000" fill-opacity="0.00000" height="550.7734" width="8" x="1106.0566" y="453.5391"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1109.4941" x2="1109.4941" y1="453.5391" y2="1004.3125"/></g><g class="participant participant-head" data-participant="Client"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="54.5303" x="5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40.5303" x="12" y="24.9951">Client</text></g><g class="participant participant-tail" data-participant="Client"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="54.5303" x="5" y="1003.3125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40.5303" x="12" y="1023.3076">Client</text></g><g class="participant participant-head" data-participant="API"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="76.6104" x="192.3047" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62.6104" x="199.3047" y="24.9951">REST API</text></g><g class="participant participant-tail" data-participant="API"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="76.6104" x="192.3047" y="1003.3125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62.6104" x="199.3047" y="1023.3076">REST API</text></g><g class="participant participant-head" data-participant="Inference"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="136.2881" x="398.8374" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122.2881" x="405.8374" y="24.9951">Inference Service</text></g><g class="participant participant-tail" data-participant="Inference"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="136.2881" x="398.8374" y="1003.3125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122.2881" x="405.8374" y="1023.3076">Inference Service</text></g><g class="participant participant-head" data-participant="Lifecycle"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="131.6055" x="641.27" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117.6055" x="648.27" y="24.9951">Lifecycle Service</text></g><g class="participant participant-tail" data-participant="Lifecycle"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="131.6055" x="641.27" y="1003.3125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117.6055" x="648.27" y="1023.3076">Lifecycle Service</text></g><g class="participant participant-head" data-participant="ProcMgr"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="133.4785" x="861.5913" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119.4785" x="868.5913" y="24.9951">Process Manager</text></g><g class="participant participant-tail" data-participant="ProcMgr"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="133.4785" x="861.5913" y="1003.3125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119.4785" x="868.5913" y="1023.3076">Process Manager</text></g><g class="participant participant-tail" data-participant="Worker"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="111.125" x="1054.4941" y="1003.3125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97.125" x="1061.4941" y="1023.3076">Model Worker</text></g><g><title>REST API</title><rect fill="#F1F1F1" height="903.75" style="stroke:#181818;stroke-width:1;" width="10" x="225.6099" y="82.5625"/></g><g><title>Inference Service</title><rect fill="#F1F1F1" height="830.3516" style="stroke:#181818;stroke-width:1;" width="10" x="461.9814" y="111.6953"/></g><g><title>Lifecycle Service</title><rect fill="#F1F1F1" height="529.1563" style="stroke:#181818;stroke-width:1;" width="10" x="702.0728" y="140.8281"/></g><g><title>Process Manager</title><rect fill="#F1F1F1" height="58.2656" style="stroke:#181818;stroke-width:1;" width="10" x="923.3306" y="320.4922"/></g><g><title>Process Manager</title><rect fill="#F1F1F1" height="183.8281" style="stroke:#181818;stroke-width:1;" width="10" x="923.3306" y="414.8906"/></g><g><title>Process Manager</title><rect fill="#F1F1F1" height="129.5313" style="stroke:#181818;stroke-width:1;" width="10" x="923.3306" y="783.3828"/></g><g><title>Model Worker</title><rect fill="#F1F1F1" height="429.7578" style="stroke:#181818;stroke-width:1;" width="10" x="1105.0566" y="454.0234"/></g><g class="message" data-participant-1="Client" data-participant-2="API"><polygon fill="#181818" points="213.6099,78.5625,223.6099,82.5625,213.6099,86.5625,217.6099,82.5625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="32.2651" x2="219.6099" y1="82.5625" y2="82.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174.3447" x="39.2651" y="62.3638">POST /api/v1/infer/model-x</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85.7632" x="39.2651" y="77.4966">{input_data}</text></g><g class="message" data-participant-1="API" data-participant-2="Inference"><polygon fill="#181818" points="449.9814,107.6953,459.9814,111.6953,449.9814,115.6953,453.9814,111.6953" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="235.6099" x2="455.9814" y1="111.6953" y2="111.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="207.3716" x="242.6099" y="106.6294">submit_request(model_id, data)</text></g><g class="message" data-participant-1="Inference" data-participant-2="Lifecycle"><polygon fill="#181818" points="690.0728,136.8281,700.0728,140.8281,690.0728,144.8281,694.0728,140.8281" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="471.9814" x2="696.0728" y1="140.8281" y2="140.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="211.0913" x="478.9814" y="135.7622">ensure_model_loaded(model_id)</text></g><g class="message" data-participant-1="Lifecycle" data-participant-2="Lifecycle"><line style="stroke:#181818;stroke-width:1;" x1="712.0728" x2="754.0728" y1="169.9609" y2="169.9609"/><line style="stroke:#181818;stroke-width:1;" x1="754.0728" x2="754.0728" y1="169.9609" y2="182.9609"/><line style="stroke:#181818;stroke-width:1;" x1="713.0728" x2="754.0728" y1="182.9609" y2="182.9609"/><polygon fill="#181818" points="723.0728,178.9609,713.0728,182.9609,723.0728,186.9609,719.0728,182.9609" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113.4263" x="719.0728" y="164.895">check_if_loaded()</text></g><path d="M854.4263,157.3281 L854.4263,182.3281 L1013.4263,182.3281 L1013.4263,167.3281 L1003.4263,157.3281 L854.4263,157.3281" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1003.4263,157.3281 L1003.4263,167.3281 L1013.4263,167.3281 L1003.4263,157.3281" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138.8867" x="860.4263" y="174.395">Model not in memory</text><g class="message" data-participant-1="Lifecycle" data-participant-2="Lifecycle"><line style="stroke:#181818;stroke-width:1;" x1="712.0728" x2="754.0728" y1="212.0938" y2="212.0938"/><line style="stroke:#181818;stroke-width:1;" x1="754.0728" x2="754.0728" y1="212.0938" y2="225.0938"/><line style="stroke:#181818;stroke-width:1;" x1="713.0728" x2="754.0728" y1="225.0938" y2="225.0938"/><polygon fill="#181818" points="723.0728,221.0938,713.0728,225.0938,723.0728,229.0938,719.0728,225.0938" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174.1987" x="719.0728" y="207.0278">check_memory_available()</text></g><path d="M631.27,240.0938 L695.7129,240.0938 L695.7129,247.2266 L685.7129,257.2266 L631.27,257.2266 L631.27,240.0938" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="146.6641" style="stroke:#000000;stroke-width:1.5;" width="544.3491" x="631.27" y="240.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="646.27" y="253.1606">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="186.4951" x="710.7129" y="252.3042">[Memory threshold exceeded]</text><g class="message" data-participant-1="Lifecycle" data-participant-2="Lifecycle"><line style="stroke:#181818;stroke-width:1;" x1="712.0728" x2="754.0728" y1="278.3594" y2="278.3594"/><line style="stroke:#181818;stroke-width:1;" x1="754.0728" x2="754.0728" y1="278.3594" y2="291.3594"/><line style="stroke:#181818;stroke-width:1;" x1="713.0728" x2="754.0728" y1="291.3594" y2="291.3594"/><polygon fill="#181818" points="723.0728,287.3594,713.0728,291.3594,723.0728,295.3594,719.0728,291.3594" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112.3662" x="719.0728" y="273.2935">evict_lru_model()</text></g><g class="message" data-participant-1="Lifecycle" data-participant-2="ProcMgr"><polygon fill="#181818" points="911.3306,316.4922,921.3306,320.4922,911.3306,324.4922,915.3306,320.4922" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="712.0728" x2="917.3306" y1="320.4922" y2="320.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192.2578" x="719.0728" y="315.4263">terminate_worker(old_model)</text></g><g class="message" data-participant-1="ProcMgr" data-participant-2="Worker"><polygon fill="#181818" points="1098.0566,345.625,1108.0566,349.625,1098.0566,353.625,1102.0566,349.625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="933.3306" x2="1104.0566" y1="349.625" y2="349.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58.5635" x="940.3306" y="344.5591">SIGTERM</text></g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1101.0566" x2="1119.0566" y1="340.625" y2="358.625"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1101.0566" x2="1119.0566" y1="358.625" y2="340.625"/><g class="message" data-participant-1="ProcMgr" data-participant-2="Lifecycle"><polygon fill="#181818" points="723.0728,374.7578,713.0728,378.7578,723.0728,382.7578,719.0728,378.7578" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="717.0728" x2="927.3306" y1="378.7578" y2="378.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72.2681" x="729.0728" y="373.6919">terminated</text></g><g class="message" data-participant-1="Lifecycle" data-participant-2="ProcMgr"><polygon fill="#181818" points="911.3306,410.8906,921.3306,414.8906,911.3306,418.8906,915.3306,414.8906" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="712.0728" x2="917.3306" y1="414.8906" y2="414.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162.1509" x="719.0728" y="409.8247">spawn_worker(model_id)</text></g><g class="message" data-participant-1="ProcMgr" data-participant-2="Worker"><polygon fill="#181818" points="1042.4941,440.0234,1052.4941,444.0234,1042.4941,448.0234,1046.4941,444.0234" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="933.3306" x2="1048.4941" y1="444.0234" y2="444.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97.1636" x="940.3306" y="438.9575">start_process()</text></g><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="111.125" x="1054.4941" y="422.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97.125" x="1061.4941" y="442.8857">Model Worker</text><g class="message" data-participant-1="Worker" data-participant-2="Worker"><line style="stroke:#181818;stroke-width:1;" x1="1115.0566" x2="1157.0566" y1="485.3203" y2="485.3203"/><line style="stroke:#181818;stroke-width:1;" x1="1157.0566" x2="1157.0566" y1="485.3203" y2="498.3203"/><line style="stroke:#181818;stroke-width:1;" x1="1116.0566" x2="1157.0566" y1="498.3203" y2="498.3203"/><polygon fill="#181818" points="1126.0566,494.3203,1116.0566,498.3203,1126.0566,502.3203,1122.0566,498.3203" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166.9434" x="1122.0566" y="480.2544">load_model_from_cache()</text></g><g class="message" data-participant-1="Worker" data-participant-2="Worker"><line style="stroke:#181818;stroke-width:1;" x1="1115.0566" x2="1157.0566" y1="527.4531" y2="527.4531"/><line style="stroke:#181818;stroke-width:1;" x1="1157.0566" x2="1157.0566" y1="527.4531" y2="540.4531"/><line style="stroke:#181818;stroke-width:1;" x1="1116.0566" x2="1157.0566" y1="540.4531" y2="540.4531"/><polygon fill="#181818" points="1126.0566,536.4531,1116.0566,540.4531,1126.0566,544.4531,1122.0566,540.4531" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159.2183" x="1122.0566" y="522.3872">run_warmup_inference()</text></g><g class="message" data-participant-1="Worker" data-participant-2="ProcMgr"><polygon fill="#181818" points="944.3306,565.5859,934.3306,569.5859,944.3306,573.5859,940.3306,569.5859" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="938.3306" x2="1104.0566" y1="569.5859" y2="569.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="37.2544" x="950.3306" y="564.52">ready</text></g><g class="message" data-participant-1="ProcMgr" data-participant-2="Lifecycle"><polygon fill="#181818" points="723.0728,594.7188,713.0728,598.7188,723.0728,602.7188,719.0728,598.7188" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="717.0728" x2="927.3306" y1="598.7188" y2="598.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95.6719" x="729.0728" y="593.6528">ProcessHandle</text></g><g class="message" data-participant-1="Lifecycle" data-participant-2="Lifecycle"><line style="stroke:#181818;stroke-width:1;" x1="712.0728" x2="754.0728" y1="627.8516" y2="627.8516"/><line style="stroke:#181818;stroke-width:1;" x1="754.0728" x2="754.0728" y1="627.8516" y2="640.8516"/><line style="stroke:#181818;stroke-width:1;" x1="713.0728" x2="754.0728" y1="640.8516" y2="640.8516"/><polygon fill="#181818" points="723.0728,636.8516,713.0728,640.8516,723.0728,644.8516,719.0728,640.8516" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115.4194" x="719.0728" y="622.7856">mark_as_loaded()</text></g><g class="message" data-participant-1="Lifecycle" data-participant-2="Inference"><polygon fill="#181818" points="482.9814,665.9844,472.9814,669.9844,482.9814,673.9844,478.9814,669.9844" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="476.9814" x2="706.0728" y1="669.9844" y2="669.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84.2334" x="488.9814" y="664.9185">model_ready</text></g><g class="message" data-participant-1="Inference" data-participant-2="Inference"><line style="stroke:#181818;stroke-width:1;" x1="471.9814" x2="513.9814" y1="699.1172" y2="699.1172"/><line style="stroke:#181818;stroke-width:1;" x1="513.9814" x2="513.9814" y1="699.1172" y2="712.1172"/><line style="stroke:#181818;stroke-width:1;" x1="472.9814" x2="513.9814" y1="712.1172" y2="712.1172"/><polygon fill="#181818" points="482.9814,708.1172,472.9814,712.1172,482.9814,716.1172,478.9814,712.1172" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151.0933" x="478.9814" y="694.0513">add_to_queue(request)</text></g><g class="message" data-participant-1="Inference" data-participant-2="Inference"><line style="stroke:#181818;stroke-width:1;" x1="471.9814" x2="513.9814" y1="741.25" y2="741.25"/><line style="stroke:#181818;stroke-width:1;" x1="513.9814" x2="513.9814" y1="741.25" y2="754.25"/><line style="stroke:#181818;stroke-width:1;" x1="472.9814" x2="513.9814" y1="754.25" y2="754.25"/><polygon fill="#181818" points="482.9814,750.25,472.9814,754.25,482.9814,758.25,478.9814,754.25" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83.8843" x="478.9814" y="736.1841">form_batch()</text></g><g class="message" data-participant-1="Inference" data-participant-2="ProcMgr"><polygon fill="#181818" points="911.3306,779.3828,921.3306,783.3828,911.3306,787.3828,915.3306,783.3828" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="471.9814" x2="917.3306" y1="783.3828" y2="783.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192.1626" x="478.9814" y="778.3169">send_batch_to_worker(batch)</text></g><g class="message" data-participant-1="ProcMgr" data-participant-2="Worker"><polygon fill="#181818" points="1093.0566,808.5156,1103.0566,812.5156,1093.0566,816.5156,1097.0566,812.5156" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="933.3306" x2="1099.0566" y1="812.5156" y2="812.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101.7466" x="940.3306" y="807.4497">IPC: batch_data</text></g><g class="message" data-participant-1="Worker" data-participant-2="Worker"><line style="stroke:#181818;stroke-width:1;" x1="1115.0566" x2="1157.0566" y1="841.6484" y2="841.6484"/><line style="stroke:#181818;stroke-width:1;" x1="1157.0566" x2="1157.0566" y1="841.6484" y2="854.6484"/><line style="stroke:#181818;stroke-width:1;" x1="1116.0566" x2="1157.0566" y1="854.6484" y2="854.6484"/><polygon fill="#181818" points="1126.0566,850.6484,1116.0566,854.6484,1126.0566,858.6484,1122.0566,854.6484" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129.9683" x="1122.0566" y="836.5825">execute_inference()</text></g><g class="message" data-participant-1="Worker" data-participant-2="ProcMgr"><polygon fill="#181818" points="944.3306,879.7813,934.3306,883.7813,944.3306,887.7813,940.3306,883.7813" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="938.3306" x2="1109.0566" y1="883.7813" y2="883.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="43.8369" x="950.3306" y="878.7153">results</text></g><g class="message" data-participant-1="ProcMgr" data-participant-2="Inference"><polygon fill="#181818" points="482.9814,908.9141,472.9814,912.9141,482.9814,916.9141,478.9814,912.9141" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="476.9814" x2="927.3306" y1="912.9141" y2="912.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="43.8369" x="488.9814" y="907.8481">results</text></g><g class="message" data-participant-1="Inference" data-participant-2="API"><polygon fill="#181818" points="246.6099,938.0469,236.6099,942.0469,246.6099,946.0469,242.6099,942.0469" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="240.6099" x2="465.9814" y1="942.0469" y2="942.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124.395" x="252.6099" y="936.981">InferenceResponse</text></g><g class="message" data-participant-1="API" data-participant-2="Client"><polygon fill="#181818" points="43.2651,982.3125,33.2651,986.3125,43.2651,990.3125,39.2651,986.3125" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="37.2651" x2="229.6099" y1="986.3125" y2="986.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="47.7026" x="49.2651" y="966.1138">200 OK</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53.606" x="49.2651" y="981.2466">{result}</text></g></g></svg></div><div class="puml dark" style=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="1039px" preserveAspectRatio="xMidYMid meet" style="width:1296px;height:1039px;background:#1B1B1B;" version="1.1" viewBox="0 0 1296 1039" width="1296px" zoomAndPan="magnify" class="diagram"><defs/><g><rect fill="#1B1B1B" height="1039" style="stroke:none;stroke-width:1;" width="1296" x="0" y="0"/><g><title>REST API</title><rect fill="#313139" height="903.75" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="225.6099" y="82.5625"/></g><g><title>Inference Service</title><rect fill="#313139" height="830.3516" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="461.9814" y="111.6953"/></g><g><title>Lifecycle Service</title><rect fill="#313139" height="529.1563" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="702.0728" y="140.8281"/></g><g><title>Process Manager</title><rect fill="#313139" height="58.2656" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="923.3306" y="320.4922"/></g><g><title>Process Manager</title><rect fill="#313139" height="183.8281" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="923.3306" y="414.8906"/></g><g><title>Process Manager</title><rect fill="#313139" height="129.5313" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="923.3306" y="783.3828"/></g><g><title>Model Worker</title><rect fill="#313139" height="429.7578" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="1105.0566" y="454.0234"/></g><rect fill="none" height="146.6641" style="stroke:#FFFFFF;stroke-width:1.5;" width="544.3491" x="631.27" y="240.0938"/><g><title>Client</title><rect fill="#000000" fill-opacity="0.00000" height="968.0156" width="8" x="28.2651" y="36.2969"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="32" x2="32" y1="36.2969" y2="1004.3125"/></g><g><title>REST API</title><rect fill="#000000" fill-opacity="0.00000" height="968.0156" width="8" x="226.6099" y="36.2969"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="230.3047" x2="230.3047" y1="36.2969" y2="1004.3125"/></g><g><title>Inference Service</title><rect fill="#000000" fill-opacity="0.00000" height="968.0156" width="8" x="462.9814" y="36.2969"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="466.8374" x2="466.8374" y1="36.2969" y2="1004.3125"/></g><g><title>Lifecycle Service</title><rect fill="#000000" fill-opacity="0.00000" height="968.0156" width="8" x="703.0728" y="36.2969"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="706.27" x2="706.27" y1="36.2969" y2="1004.3125"/></g><g><title>Process Manager</title><rect fill="#000000" fill-opacity="0.00000" height="968.0156" width="8" x="924.3306" y="36.2969"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="927.5913" x2="927.5913" y1="36.2969" y2="1004.3125"/></g><g><title>Model Worker</title><rect fill="#000000" fill-opacity="0.00000" height="550.7734" width="8" x="1106.0566" y="453.5391"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="1109.4941" x2="1109.4941" y1="453.5391" y2="1004.3125"/></g><g class="participant participant-head" data-participant="Client"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="54.5303" x="5" y="5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40.5303" x="12" y="24.9951">Client</text></g><g class="participant participant-tail" data-participant="Client"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="54.5303" x="5" y="1003.3125"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40.5303" x="12" y="1023.3076">Client</text></g><g class="participant participant-head" data-participant="API"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="76.6104" x="192.3047" y="5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62.6104" x="199.3047" y="24.9951">REST API</text></g><g class="participant participant-tail" data-participant="API"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="76.6104" x="192.3047" y="1003.3125"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62.6104" x="199.3047" y="1023.3076">REST API</text></g><g class="participant participant-head" data-participant="Inference"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="136.2881" x="398.8374" y="5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122.2881" x="405.8374" y="24.9951">Inference Service</text></g><g class="participant participant-tail" data-participant="Inference"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="136.2881" x="398.8374" y="1003.3125"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122.2881" x="405.8374" y="1023.3076">Inference Service</text></g><g class="participant participant-head" data-participant="Lifecycle"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="131.6055" x="641.27" y="5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117.6055" x="648.27" y="24.9951">Lifecycle Service</text></g><g class="participant participant-tail" data-participant="Lifecycle"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="131.6055" x="641.27" y="1003.3125"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117.6055" x="648.27" y="1023.3076">Lifecycle Service</text></g><g class="participant participant-head" data-participant="ProcMgr"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="133.4785" x="861.5913" y="5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119.4785" x="868.5913" y="24.9951">Process Manager</text></g><g class="participant participant-tail" data-participant="ProcMgr"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="133.4785" x="861.5913" y="1003.3125"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119.4785" x="868.5913" y="1023.3076">Process Manager</text></g><g class="participant participant-tail" data-participant="Worker"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="111.125" x="1054.4941" y="1003.3125"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97.125" x="1061.4941" y="1023.3076">Model Worker</text></g><g><title>REST API</title><rect fill="#313139" height="903.75" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="225.6099" y="82.5625"/></g><g><title>Inference Service</title><rect fill="#313139" height="830.3516" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="461.9814" y="111.6953"/></g><g><title>Lifecycle Service</title><rect fill="#313139" height="529.1563" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="702.0728" y="140.8281"/></g><g><title>Process Manager</title><rect fill="#313139" height="58.2656" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="923.3306" y="320.4922"/></g><g><title>Process Manager</title><rect fill="#313139" height="183.8281" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="923.3306" y="414.8906"/></g><g><title>Process Manager</title><rect fill="#313139" height="129.5313" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="923.3306" y="783.3828"/></g><g><title>Model Worker</title><rect fill="#313139" height="429.7578" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="1105.0566" y="454.0234"/></g><g class="message" data-participant-1="Client" data-participant-2="API"><polygon fill="#E7E7E7" points="213.6099,78.5625,223.6099,82.5625,213.6099,86.5625,217.6099,82.5625" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="32.2651" x2="219.6099" y1="82.5625" y2="82.5625"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174.3447" x="39.2651" y="62.3638">POST /api/v1/infer/model-x</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85.7632" x="39.2651" y="77.4966">{input_data}</text></g><g class="message" data-participant-1="API" data-participant-2="Inference"><polygon fill="#E7E7E7" points="449.9814,107.6953,459.9814,111.6953,449.9814,115.6953,453.9814,111.6953" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="235.6099" x2="455.9814" y1="111.6953" y2="111.6953"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="207.3716" x="242.6099" y="106.6294">submit_request(model_id, data)</text></g><g class="message" data-participant-1="Inference" data-participant-2="Lifecycle"><polygon fill="#E7E7E7" points="690.0728,136.8281,700.0728,140.8281,690.0728,144.8281,694.0728,140.8281" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="471.9814" x2="696.0728" y1="140.8281" y2="140.8281"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="211.0913" x="478.9814" y="135.7622">ensure_model_loaded(model_id)</text></g><g class="message" data-participant-1="Lifecycle" data-participant-2="Lifecycle"><line style="stroke:#E7E7E7;stroke-width:1;" x1="712.0728" x2="754.0728" y1="169.9609" y2="169.9609"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="754.0728" x2="754.0728" y1="169.9609" y2="182.9609"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="713.0728" x2="754.0728" y1="182.9609" y2="182.9609"/><polygon fill="#E7E7E7" points="723.0728,178.9609,713.0728,182.9609,723.0728,186.9609,719.0728,182.9609" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113.4263" x="719.0728" y="164.895">check_if_loaded()</text></g><path d="M854.4263,157.3281 L854.4263,182.3281 L1013.4263,182.3281 L1013.4263,167.3281 L1003.4263,157.3281 L854.4263,157.3281" fill="#714137" style="stroke:#E7E7E7;stroke-width:0.5;"/><path d="M1003.4263,157.3281 L1003.4263,167.3281 L1013.4263,167.3281 L1003.4263,157.3281" fill="#714137" style="stroke:#E7E7E7;stroke-width:0.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138.8867" x="860.4263" y="174.395">Model not in memory</text><g class="message" data-participant-1="Lifecycle" data-participant-2="Lifecycle"><line style="stroke:#E7E7E7;stroke-width:1;" x1="712.0728" x2="754.0728" y1="212.0938" y2="212.0938"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="754.0728" x2="754.0728" y1="212.0938" y2="225.0938"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="713.0728" x2="754.0728" y1="225.0938" y2="225.0938"/><polygon fill="#E7E7E7" points="723.0728,221.0938,713.0728,225.0938,723.0728,229.0938,719.0728,225.0938" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174.1987" x="719.0728" y="207.0278">check_memory_available()</text></g><path d="M631.27,240.0938 L695.7129,240.0938 L695.7129,247.2266 L685.7129,257.2266 L631.27,257.2266 L631.27,240.0938" fill="#555555" style="stroke:#FFFFFF;stroke-width:1.5;"/><rect fill="none" height="146.6641" style="stroke:#FFFFFF;stroke-width:1.5;" width="544.3491" x="631.27" y="240.0938"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="646.27" y="253.1606">alt</text><text fill="#FFFFFF" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="186.4951" x="710.7129" y="252.3042">[Memory threshold exceeded]</text><g class="message" data-participant-1="Lifecycle" data-participant-2="Lifecycle"><line style="stroke:#E7E7E7;stroke-width:1;" x1="712.0728" x2="754.0728" y1="278.3594" y2="278.3594"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="754.0728" x2="754.0728" y1="278.3594" y2="291.3594"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="713.0728" x2="754.0728" y1="291.3594" y2="291.3594"/><polygon fill="#E7E7E7" points="723.0728,287.3594,713.0728,291.3594,723.0728,295.3594,719.0728,291.3594" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112.3662" x="719.0728" y="273.2935">evict_lru_model()</text></g><g class="message" data-participant-1="Lifecycle" data-participant-2="ProcMgr"><polygon fill="#E7E7E7" points="911.3306,316.4922,921.3306,320.4922,911.3306,324.4922,915.3306,320.4922" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="712.0728" x2="917.3306" y1="320.4922" y2="320.4922"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192.2578" x="719.0728" y="315.4263">terminate_worker(old_model)</text></g><g class="message" data-participant-1="ProcMgr" data-participant-2="Worker"><polygon fill="#E7E7E7" points="1098.0566,345.625,1108.0566,349.625,1098.0566,353.625,1102.0566,349.625" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="933.3306" x2="1104.0566" y1="349.625" y2="349.625"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58.5635" x="940.3306" y="344.5591">SIGTERM</text></g><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="1101.0566" x2="1119.0566" y1="340.625" y2="358.625"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="1101.0566" x2="1119.0566" y1="358.625" y2="340.625"/><g class="message" data-participant-1="ProcMgr" data-participant-2="Lifecycle"><polygon fill="#E7E7E7" points="723.0728,374.7578,713.0728,378.7578,723.0728,382.7578,719.0728,378.7578" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="717.0728" x2="927.3306" y1="378.7578" y2="378.7578"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72.2681" x="729.0728" y="373.6919">terminated</text></g><g class="message" data-participant-1="Lifecycle" data-participant-2="ProcMgr"><polygon fill="#E7E7E7" points="911.3306,410.8906,921.3306,414.8906,911.3306,418.8906,915.3306,414.8906" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="712.0728" x2="917.3306" y1="414.8906" y2="414.8906"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162.1509" x="719.0728" y="409.8247">spawn_worker(model_id)</text></g><g class="message" data-participant-1="ProcMgr" data-participant-2="Worker"><polygon fill="#E7E7E7" points="1042.4941,440.0234,1052.4941,444.0234,1042.4941,448.0234,1046.4941,444.0234" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="933.3306" x2="1048.4941" y1="444.0234" y2="444.0234"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97.1636" x="940.3306" y="438.9575">start_process()</text></g><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="111.125" x="1054.4941" y="422.8906"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97.125" x="1061.4941" y="442.8857">Model Worker</text><g class="message" data-participant-1="Worker" data-participant-2="Worker"><line style="stroke:#E7E7E7;stroke-width:1;" x1="1115.0566" x2="1157.0566" y1="485.3203" y2="485.3203"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="1157.0566" x2="1157.0566" y1="485.3203" y2="498.3203"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="1116.0566" x2="1157.0566" y1="498.3203" y2="498.3203"/><polygon fill="#E7E7E7" points="1126.0566,494.3203,1116.0566,498.3203,1126.0566,502.3203,1122.0566,498.3203" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166.9434" x="1122.0566" y="480.2544">load_model_from_cache()</text></g><g class="message" data-participant-1="Worker" data-participant-2="Worker"><line style="stroke:#E7E7E7;stroke-width:1;" x1="1115.0566" x2="1157.0566" y1="527.4531" y2="527.4531"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="1157.0566" x2="1157.0566" y1="527.4531" y2="540.4531"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="1116.0566" x2="1157.0566" y1="540.4531" y2="540.4531"/><polygon fill="#E7E7E7" points="1126.0566,536.4531,1116.0566,540.4531,1126.0566,544.4531,1122.0566,540.4531" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159.2183" x="1122.0566" y="522.3872">run_warmup_inference()</text></g><g class="message" data-participant-1="Worker" data-participant-2="ProcMgr"><polygon fill="#E7E7E7" points="944.3306,565.5859,934.3306,569.5859,944.3306,573.5859,940.3306,569.5859" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="938.3306" x2="1104.0566" y1="569.5859" y2="569.5859"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="37.2544" x="950.3306" y="564.52">ready</text></g><g class="message" data-participant-1="ProcMgr" data-participant-2="Lifecycle"><polygon fill="#E7E7E7" points="723.0728,594.7188,713.0728,598.7188,723.0728,602.7188,719.0728,598.7188" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="717.0728" x2="927.3306" y1="598.7188" y2="598.7188"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95.6719" x="729.0728" y="593.6528">ProcessHandle</text></g><g class="message" data-participant-1="Lifecycle" data-participant-2="Lifecycle"><line style="stroke:#E7E7E7;stroke-width:1;" x1="712.0728" x2="754.0728" y1="627.8516" y2="627.8516"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="754.0728" x2="754.0728" y1="627.8516" y2="640.8516"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="713.0728" x2="754.0728" y1="640.8516" y2="640.8516"/><polygon fill="#E7E7E7" points="723.0728,636.8516,713.0728,640.8516,723.0728,644.8516,719.0728,640.8516" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115.4194" x="719.0728" y="622.7856">mark_as_loaded()</text></g><g class="message" data-participant-1="Lifecycle" data-participant-2="Inference"><polygon fill="#E7E7E7" points="482.9814,665.9844,472.9814,669.9844,482.9814,673.9844,478.9814,669.9844" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="476.9814" x2="706.0728" y1="669.9844" y2="669.9844"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84.2334" x="488.9814" y="664.9185">model_ready</text></g><g class="message" data-participant-1="Inference" data-participant-2="Inference"><line style="stroke:#E7E7E7;stroke-width:1;" x1="471.9814" x2="513.9814" y1="699.1172" y2="699.1172"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="513.9814" x2="513.9814" y1="699.1172" y2="712.1172"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="472.9814" x2="513.9814" y1="712.1172" y2="712.1172"/><polygon fill="#E7E7E7" points="482.9814,708.1172,472.9814,712.1172,482.9814,716.1172,478.9814,712.1172" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151.0933" x="478.9814" y="694.0513">add_to_queue(request)</text></g><g class="message" data-participant-1="Inference" data-participant-2="Inference"><line style="stroke:#E7E7E7;stroke-width:1;" x1="471.9814" x2="513.9814" y1="741.25" y2="741.25"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="513.9814" x2="513.9814" y1="741.25" y2="754.25"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="472.9814" x2="513.9814" y1="754.25" y2="754.25"/><polygon fill="#E7E7E7" points="482.9814,750.25,472.9814,754.25,482.9814,758.25,478.9814,754.25" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83.8843" x="478.9814" y="736.1841">form_batch()</text></g><g class="message" data-participant-1="Inference" data-participant-2="ProcMgr"><polygon fill="#E7E7E7" points="911.3306,779.3828,921.3306,783.3828,911.3306,787.3828,915.3306,783.3828" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="471.9814" x2="917.3306" y1="783.3828" y2="783.3828"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192.1626" x="478.9814" y="778.3169">send_batch_to_worker(batch)</text></g><g class="message" data-participant-1="ProcMgr" data-participant-2="Worker"><polygon fill="#E7E7E7" points="1093.0566,808.5156,1103.0566,812.5156,1093.0566,816.5156,1097.0566,812.5156" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="933.3306" x2="1099.0566" y1="812.5156" y2="812.5156"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101.7466" x="940.3306" y="807.4497">IPC: batch_data</text></g><g class="message" data-participant-1="Worker" data-participant-2="Worker"><line style="stroke:#E7E7E7;stroke-width:1;" x1="1115.0566" x2="1157.0566" y1="841.6484" y2="841.6484"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="1157.0566" x2="1157.0566" y1="841.6484" y2="854.6484"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="1116.0566" x2="1157.0566" y1="854.6484" y2="854.6484"/><polygon fill="#E7E7E7" points="1126.0566,850.6484,1116.0566,854.6484,1126.0566,858.6484,1122.0566,854.6484" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129.9683" x="1122.0566" y="836.5825">execute_inference()</text></g><g class="message" data-participant-1="Worker" data-participant-2="ProcMgr"><polygon fill="#E7E7E7" points="944.3306,879.7813,934.3306,883.7813,944.3306,887.7813,940.3306,883.7813" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="938.3306" x2="1109.0566" y1="883.7813" y2="883.7813"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="43.8369" x="950.3306" y="878.7153">results</text></g><g class="message" data-participant-1="ProcMgr" data-participant-2="Inference"><polygon fill="#E7E7E7" points="482.9814,908.9141,472.9814,912.9141,482.9814,916.9141,478.9814,912.9141" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="476.9814" x2="927.3306" y1="912.9141" y2="912.9141"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="43.8369" x="488.9814" y="907.8481">results</text></g><g class="message" data-participant-1="Inference" data-participant-2="API"><polygon fill="#E7E7E7" points="246.6099,938.0469,236.6099,942.0469,246.6099,946.0469,242.6099,942.0469" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="240.6099" x2="465.9814" y1="942.0469" y2="942.0469"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124.395" x="252.6099" y="936.981">InferenceResponse</text></g><g class="message" data-participant-1="API" data-participant-2="Client"><polygon fill="#E7E7E7" points="43.2651,982.3125,33.2651,986.3125,43.2651,990.3125,39.2651,986.3125" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="37.2651" x2="229.6099" y1="986.3125" y2="986.3125"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="47.7026" x="49.2651" y="966.1138">200 OK</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53.606" x="49.2651" y="981.2466">{result}</text></g></g></svg></div></div>

<h3 id="53-asynchronous-inference-flow">5.3 Asynchronous Inference Flow<a class="headerlink" href="#53-asynchronous-inference-flow" title="Permanent link">&para;</a></h3>
<div class='puml-container'><div class="puml light" style=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="1105px" preserveAspectRatio="xMidYMid meet" style="width:1248px;height:1105px;background:#FFFFFF;" version="1.1" viewBox="0 0 1248 1105" width="1248px" zoomAndPan="magnify" class="diagram"><defs/><g><g><title>REST API</title><rect fill="#F1F1F1" height="245.0625" style="stroke:#181818;stroke-width:1;" width="10" x="267.8091" y="67.4297"/></g><g><title>REST API</title><rect fill="#F1F1F1" height="102.5313" style="stroke:#181818;stroke-width:1;" width="10" x="267.8091" y="818.5"/></g><g><title>REST API</title><rect fill="#F1F1F1" height="102.5313" style="stroke:#181818;stroke-width:1;" width="10" x="267.8091" y="950.1641"/></g><g><title>Inference Service</title><rect fill="#F1F1F1" height="171.6641" style="stroke:#181818;stroke-width:1;" width="10" x="555.3281" y="96.5625"/></g><g><title>Inference Service</title><rect fill="#F1F1F1" height="324" style="stroke:#181818;stroke-width:1;" width="10" x="555.3281" y="417.5625"/></g><g><title>Inference Service</title><rect fill="#F1F1F1" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="555.3281" y="847.6328"/></g><g><title>Inference Service</title><rect fill="#F1F1F1" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="555.3281" y="979.2969"/></g><g><title>Queue</title><rect fill="#F1F1F1" height="71.2656" style="stroke:#181818;stroke-width:1;" width="10" x="798.0264" y="167.8281"/></g><g><title>Worker Process</title><rect fill="#F1F1F1" height="71.2656" style="stroke:#181818;stroke-width:1;" width="10" x="1021.1294" y="446.6953"/></g><g><title>Result Store</title><rect fill="#F1F1F1" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="1176.3569" y="571.2266"/></g><rect fill="none" height="174.4688" style="stroke:#000000;stroke-width:1.5;" width="758.9966" x="482.1841" y="532.9609"/><g><title>Client</title><rect fill="#000000" fill-opacity="0.00000" height="319.3281" width="8" x="28.2651" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="32" x2="32" y1="36.2969" y2="355.625"/></g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="32" x2="32" y1="355.625" y2="396.4297"/><g><title>Client</title><rect fill="#000000" fill-opacity="0.00000" height="360.1328" width="8" x="28.2651" y="396.4297"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="32" x2="32" y1="396.4297" y2="756.5625"/></g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="32" x2="32" y1="756.5625" y2="797.3672"/><g><title>Client</title><rect fill="#000000" fill-opacity="0.00000" height="273.3281" width="8" x="28.2651" y="797.3672"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="32" x2="32" y1="797.3672" y2="1070.6953"/></g><g><title>REST API</title><rect fill="#000000" fill-opacity="0.00000" height="319.3281" width="8" x="268.8091" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="272.5039" x2="272.5039" y1="36.2969" y2="355.625"/></g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="272.5039" x2="272.5039" y1="355.625" y2="396.4297"/><g><title>REST API</title><rect fill="#000000" fill-opacity="0.00000" height="360.1328" width="8" x="268.8091" y="396.4297"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="272.5039" x2="272.5039" y1="396.4297" y2="756.5625"/></g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="272.5039" x2="272.5039" y1="756.5625" y2="797.3672"/><g><title>REST API</title><rect fill="#000000" fill-opacity="0.00000" height="273.3281" width="8" x="268.8091" y="797.3672"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="272.5039" x2="272.5039" y1="797.3672" y2="1070.6953"/></g><g><title>Inference Service</title><rect fill="#000000" fill-opacity="0.00000" height="319.3281" width="8" x="556.3281" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="560.1841" x2="560.1841" y1="36.2969" y2="355.625"/></g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="560.1841" x2="560.1841" y1="355.625" y2="396.4297"/><g><title>Inference Service</title><rect fill="#000000" fill-opacity="0.00000" height="360.1328" width="8" x="556.3281" y="396.4297"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="560.1841" x2="560.1841" y1="396.4297" y2="756.5625"/></g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="560.1841" x2="560.1841" y1="756.5625" y2="797.3672"/><g><title>Inference Service</title><rect fill="#000000" fill-opacity="0.00000" height="273.3281" width="8" x="556.3281" y="797.3672"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="560.1841" x2="560.1841" y1="797.3672" y2="1070.6953"/></g><g><title>Queue</title><rect fill="#000000" fill-opacity="0.00000" height="319.3281" width="8" x="799.0264" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="802.0303" x2="802.0303" y1="36.2969" y2="355.625"/></g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="802.0303" x2="802.0303" y1="355.625" y2="396.4297"/><g><title>Queue</title><rect fill="#000000" fill-opacity="0.00000" height="360.1328" width="8" x="799.0264" y="396.4297"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="802.0303" x2="802.0303" y1="396.4297" y2="756.5625"/></g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="802.0303" x2="802.0303" y1="756.5625" y2="797.3672"/><g><title>Queue</title><rect fill="#000000" fill-opacity="0.00000" height="273.3281" width="8" x="799.0264" y="797.3672"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="802.0303" x2="802.0303" y1="797.3672" y2="1070.6953"/></g><g><title>Worker Process</title><rect fill="#000000" fill-opacity="0.00000" height="319.3281" width="8" x="1022.1294" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1025.7529" x2="1025.7529" y1="36.2969" y2="355.625"/></g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1025.7529" x2="1025.7529" y1="355.625" y2="396.4297"/><g><title>Worker Process</title><rect fill="#000000" fill-opacity="0.00000" height="360.1328" width="8" x="1022.1294" y="396.4297"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1025.7529" x2="1025.7529" y1="396.4297" y2="756.5625"/></g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1025.7529" x2="1025.7529" y1="756.5625" y2="797.3672"/><g><title>Worker Process</title><rect fill="#000000" fill-opacity="0.00000" height="273.3281" width="8" x="1022.1294" y="797.3672"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1025.7529" x2="1025.7529" y1="797.3672" y2="1070.6953"/></g><g><title>Result Store</title><rect fill="#000000" fill-opacity="0.00000" height="319.3281" width="8" x="1177.3569" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1180.5332" x2="1180.5332" y1="36.2969" y2="355.625"/></g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1180.5332" x2="1180.5332" y1="355.625" y2="396.4297"/><g><title>Result Store</title><rect fill="#000000" fill-opacity="0.00000" height="360.1328" width="8" x="1177.3569" y="396.4297"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1180.5332" x2="1180.5332" y1="396.4297" y2="756.5625"/></g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1180.5332" x2="1180.5332" y1="756.5625" y2="797.3672"/><g><title>Result Store</title><rect fill="#000000" fill-opacity="0.00000" height="273.3281" width="8" x="1177.3569" y="797.3672"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1180.5332" x2="1180.5332" y1="797.3672" y2="1070.6953"/></g><g class="participant participant-head" data-participant="Client"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="54.5303" x="5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40.5303" x="12" y="24.9951">Client</text></g><g class="participant participant-tail" data-participant="Client"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="54.5303" x="5" y="1069.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40.5303" x="12" y="1089.6904">Client</text></g><g class="participant participant-head" data-participant="API"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="76.6104" x="234.5039" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62.6104" x="241.5039" y="24.9951">REST API</text></g><g class="participant participant-tail" data-participant="API"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="76.6104" x="234.5039" y="1069.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62.6104" x="241.5039" y="1089.6904">REST API</text></g><g class="participant participant-head" data-participant="Inference"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="136.2881" x="492.1841" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122.2881" x="499.1841" y="24.9951">Inference Service</text></g><g class="participant participant-tail" data-participant="Inference"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="136.2881" x="492.1841" y="1069.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122.2881" x="499.1841" y="1089.6904">Inference Service</text></g><g class="participant participant-head" data-participant="Queue"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="59.9922" x="773.0303" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="45.9922" x="780.0303" y="24.9951">Queue</text></g><g class="participant participant-tail" data-participant="Queue"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="59.9922" x="773.0303" y="1069.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="45.9922" x="780.0303" y="1089.6904">Queue</text></g><g class="participant participant-head" data-participant="Worker"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="122.7529" x="964.7529" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108.7529" x="971.7529" y="24.9951">Worker Process</text></g><g class="participant participant-tail" data-participant="Worker"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="122.7529" x="964.7529" y="1069.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108.7529" x="971.7529" y="1089.6904">Worker Process</text></g><g class="participant participant-head" data-participant="Storage"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="99.6475" x="1131.5332" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85.6475" x="1138.5332" y="24.9951">Result Store</text></g><g class="participant participant-tail" data-participant="Storage"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="99.6475" x="1131.5332" y="1069.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85.6475" x="1138.5332" y="1089.6904">Result Store</text></g><g><title>REST API</title><rect fill="#F1F1F1" height="245.0625" style="stroke:#181818;stroke-width:1;" width="10" x="267.8091" y="67.4297"/></g><g><title>REST API</title><rect fill="#F1F1F1" height="102.5313" style="stroke:#181818;stroke-width:1;" width="10" x="267.8091" y="818.5"/></g><g><title>REST API</title><rect fill="#F1F1F1" height="102.5313" style="stroke:#181818;stroke-width:1;" width="10" x="267.8091" y="950.1641"/></g><g><title>Inference Service</title><rect fill="#F1F1F1" height="171.6641" style="stroke:#181818;stroke-width:1;" width="10" x="555.3281" y="96.5625"/></g><g><title>Inference Service</title><rect fill="#F1F1F1" height="324" style="stroke:#181818;stroke-width:1;" width="10" x="555.3281" y="417.5625"/></g><g><title>Inference Service</title><rect fill="#F1F1F1" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="555.3281" y="847.6328"/></g><g><title>Inference Service</title><rect fill="#F1F1F1" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="555.3281" y="979.2969"/></g><g><title>Queue</title><rect fill="#F1F1F1" height="71.2656" style="stroke:#181818;stroke-width:1;" width="10" x="798.0264" y="167.8281"/></g><g><title>Worker Process</title><rect fill="#F1F1F1" height="71.2656" style="stroke:#181818;stroke-width:1;" width="10" x="1021.1294" y="446.6953"/></g><g><title>Result Store</title><rect fill="#F1F1F1" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="1176.3569" y="571.2266"/></g><g class="message" data-participant-1="Client" data-participant-2="API"><polygon fill="#181818" points="255.8091,63.4297,265.8091,67.4297,255.8091,71.4297,259.8091,67.4297" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="32.2651" x2="261.8091" y1="67.4297" y2="67.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="216.5439" x="39.2651" y="62.3638">POST /api/v1/infer/model-x/async</text></g><g class="message" data-participant-1="API" data-participant-2="Inference"><polygon fill="#181818" points="543.3281,92.5625,553.3281,96.5625,543.3281,100.5625,547.3281,96.5625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="277.8091" x2="549.3281" y1="96.5625" y2="96.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="205.0039" x="284.8091" y="91.4966">submit_async_request(request)</text></g><g class="message" data-participant-1="Inference" data-participant-2="Inference"><line style="stroke:#181818;stroke-width:1;" x1="565.3281" x2="607.3281" y1="125.6953" y2="125.6953"/><line style="stroke:#181818;stroke-width:1;" x1="607.3281" x2="607.3281" y1="125.6953" y2="138.6953"/><line style="stroke:#181818;stroke-width:1;" x1="566.3281" x2="607.3281" y1="138.6953" y2="138.6953"/><polygon fill="#181818" points="576.3281,134.6953,566.3281,138.6953,576.3281,142.6953,572.3281,138.6953" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113.7183" x="572.3281" y="120.6294">generate_job_id()</text></g><g class="message" data-participant-1="Inference" data-participant-2="Queue"><polygon fill="#181818" points="786.0264,163.8281,796.0264,167.8281,786.0264,171.8281,790.0264,167.8281" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="565.3281" x2="792.0264" y1="167.8281" y2="167.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142.0986" x="572.3281" y="162.7622">enqueue(job, priority)</text></g><g class="message" data-participant-1="Queue" data-participant-2="Queue"><line style="stroke:#181818;stroke-width:1;" x1="808.0264" x2="850.0264" y1="196.9609" y2="196.9609"/><line style="stroke:#181818;stroke-width:1;" x1="850.0264" x2="850.0264" y1="196.9609" y2="209.9609"/><line style="stroke:#181818;stroke-width:1;" x1="809.0264" x2="850.0264" y1="209.9609" y2="209.9609"/><polygon fill="#181818" points="819.0264,205.9609,809.0264,209.9609,819.0264,213.9609,815.0264,209.9609" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="189.103" x="815.0264" y="191.895">sort_by_priority_and_model()</text></g><g class="message" data-participant-1="Queue" data-participant-2="Inference"><polygon fill="#181818" points="576.3281,235.0938,566.3281,239.0938,576.3281,243.0938,572.3281,239.0938" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="570.3281" x2="802.0264" y1="239.0938" y2="239.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="48.9785" x="582.3281" y="234.0278">queued</text></g><g class="message" data-participant-1="Inference" data-participant-2="API"><polygon fill="#181818" points="288.8091,264.2266,278.8091,268.2266,288.8091,272.2266,284.8091,268.2266" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="282.8091" x2="559.3281" y1="268.2266" y2="268.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="253.519" x="294.8091" y="263.1606">JobReference{job_id, status: QUEUED}</text></g><g class="message" data-participant-1="API" data-participant-2="Client"><polygon fill="#181818" points="43.2651,308.4922,33.2651,312.4922,43.2651,316.4922,39.2651,312.4922" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="37.2651" x2="271.8091" y1="312.4922" y2="312.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89.7305" x="49.2651" y="292.2935">202 Accepted</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="54.7231" x="49.2651" y="307.4263">{job_id}</text></g><path d="M37,325.4922 L37,350.4922 L216,350.4922 L216,335.4922 L206,325.4922 L37,325.4922" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M206,325.4922 L206,335.4922 L216,335.4922 L206,325.4922" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="158.7676" x="43" y="342.5591">Client can poll for status</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="128.5356" x="542.5432" y="379.8354">Background Processing</text><g class="message" data-participant-1="Queue" data-participant-2="Inference"><polygon fill="#181818" points="576.3281,413.5625,566.3281,417.5625,576.3281,421.5625,572.3281,417.5625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="570.3281" x2="802.0264" y1="417.5625" y2="417.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110.3223" x="582.3281" y="412.4966">dequeue_batch()</text></g><g class="message" data-participant-1="Inference" data-participant-2="Worker"><polygon fill="#181818" points="1009.1294,442.6953,1019.1294,446.6953,1009.1294,450.6953,1013.1294,446.6953" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="565.3281" x2="1015.1294" y1="446.6953" y2="446.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="161.9922" x="572.3281" y="441.6294">execute_batch(requests)</text></g><g class="message" data-participant-1="Worker" data-participant-2="Worker"><line style="stroke:#181818;stroke-width:1;" x1="1031.1294" x2="1073.1294" y1="475.8281" y2="475.8281"/><line style="stroke:#181818;stroke-width:1;" x1="1073.1294" x2="1073.1294" y1="475.8281" y2="488.8281"/><line style="stroke:#181818;stroke-width:1;" x1="1032.1294" x2="1073.1294" y1="488.8281" y2="488.8281"/><polygon fill="#181818" points="1042.1294,484.8281,1032.1294,488.8281,1042.1294,492.8281,1038.1294,488.8281" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121.2275" x="1038.1294" y="470.7622">model.infer(batch)</text></g><g class="message" data-participant-1="Worker" data-participant-2="Inference"><polygon fill="#181818" points="576.3281,513.9609,566.3281,517.9609,576.3281,521.9609,572.3281,517.9609" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="570.3281" x2="1025.1294" y1="517.9609" y2="517.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="43.8369" x="582.3281" y="512.895">results</text></g><path d="M482.1841,532.9609 L546.627,532.9609 L546.627,540.0938 L536.627,550.0938 L482.1841,550.0938 L482.1841,532.9609" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="174.4688" style="stroke:#000000;stroke-width:1.5;" width="758.9966" x="482.1841" y="532.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="497.1841" y="546.0278">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="168.9424" x="561.627" y="545.1714">[Large result (e.g., image)]</text><g class="message" data-participant-1="Inference" data-participant-2="Storage"><polygon fill="#181818" points="1164.3569,567.2266,1174.3569,571.2266,1164.3569,575.2266,1168.3569,571.2266" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="565.3281" x2="1170.3569" y1="571.2266" y2="571.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162.6016" x="572.3281" y="566.1606">store_result(job_id, data)</text></g><g class="message" data-participant-1="Storage" data-participant-2="Inference"><polygon fill="#181818" points="576.3281,596.3594,566.3281,600.3594,576.3281,604.3594,572.3281,600.3594" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="570.3281" x2="1180.3569" y1="600.3594" y2="600.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="60.7598" x="582.3281" y="595.2935">result_uri</text></g><g class="message" data-participant-1="Inference" data-participant-2="Inference"><line style="stroke:#181818;stroke-width:1;" x1="565.3281" x2="607.3281" y1="629.4922" y2="629.4922"/><line style="stroke:#181818;stroke-width:1;" x1="607.3281" x2="607.3281" y1="629.4922" y2="642.4922"/><line style="stroke:#181818;stroke-width:1;" x1="566.3281" x2="607.3281" y1="642.4922" y2="642.4922"/><polygon fill="#181818" points="576.3281,638.4922,566.3281,642.4922,576.3281,646.4922,572.3281,642.4922" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174.0972" x="572.3281" y="624.4263">save_job_result(job_id, uri)</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="482.1841" x2="1241.1807" y1="651.4922" y2="651.4922"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="199.5898" x="487.1841" y="661.7026">[Small result (e.g., embedding)]</text><g class="message" data-participant-1="Inference" data-participant-2="Inference"><line style="stroke:#181818;stroke-width:1;" x1="565.3281" x2="607.3281" y1="686.4297" y2="686.4297"/><line style="stroke:#181818;stroke-width:1;" x1="607.3281" x2="607.3281" y1="686.4297" y2="699.4297"/><line style="stroke:#181818;stroke-width:1;" x1="566.3281" x2="607.3281" y1="699.4297" y2="699.4297"/><polygon fill="#181818" points="576.3281,695.4297,566.3281,699.4297,576.3281,703.4297,572.3281,699.4297" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="186.1831" x="572.3281" y="681.3638">save_job_result(job_id, data)</text></g><g class="message" data-participant-1="Inference" data-participant-2="Inference"><line style="stroke:#181818;stroke-width:1;" x1="565.3281" x2="607.3281" y1="740.5625" y2="740.5625"/><line style="stroke:#181818;stroke-width:1;" x1="607.3281" x2="607.3281" y1="740.5625" y2="753.5625"/><line style="stroke:#181818;stroke-width:1;" x1="560.3281" x2="607.3281" y1="753.5625" y2="753.5625"/><polygon fill="#181818" points="570.3281,749.5625,560.3281,753.5625,570.3281,757.5625,566.3281,753.5625" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="208.6982" x="572.3281" y="735.4966">update_job_status(COMPLETED)</text></g><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="60.5483" x="576.5369" y="780.7729">Client Polls</text><g class="message" data-participant-1="Client" data-participant-2="API"><polygon fill="#181818" points="255.8091,814.5,265.8091,818.5,255.8091,822.5,259.8091,818.5" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="32.2651" x2="261.8091" y1="818.5" y2="818.5"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164.9883" x="39.2651" y="813.4341">GET /api/v1/jobs/{job_id}</text></g><g class="message" data-participant-1="API" data-participant-2="Inference"><polygon fill="#181818" points="543.3281,843.6328,553.3281,847.6328,543.3281,851.6328,547.3281,847.6328" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="277.8091" x2="549.3281" y1="847.6328" y2="847.6328"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142.4351" x="284.8091" y="842.5669">get_job_status(job_id)</text></g><g class="message" data-participant-1="Inference" data-participant-2="API"><polygon fill="#181818" points="288.8091,872.7656,278.8091,876.7656,288.8091,880.7656,284.8091,876.7656" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="282.8091" x2="559.3281" y1="876.7656" y2="876.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="206.4512" x="294.8091" y="871.6997">JobStatus{status: COMPLETED}</text></g><g class="message" data-participant-1="API" data-participant-2="Client"><polygon fill="#181818" points="43.2651,917.0313,33.2651,921.0313,43.2651,925.0313,39.2651,921.0313" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="37.2651" x2="271.8091" y1="921.0313" y2="921.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="47.7026" x="49.2651" y="900.8325">200 OK</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144.9868" x="49.2651" y="915.9653">{status: COMPLETED}</text></g><g class="message" data-participant-1="Client" data-participant-2="API"><polygon fill="#181818" points="255.8091,946.1641,265.8091,950.1641,255.8091,954.1641,259.8091,950.1641" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="32.2651" x2="261.8091" y1="950.1641" y2="950.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="206.4321" x="39.2651" y="945.0981">GET /api/v1/jobs/{job_id}/result</text></g><g class="message" data-participant-1="API" data-participant-2="Inference"><polygon fill="#181818" points="543.3281,975.2969,553.3281,979.2969,543.3281,983.2969,547.3281,979.2969" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="277.8091" x2="549.3281" y1="979.2969" y2="979.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139.5532" x="284.8091" y="974.231">get_job_result(job_id)</text></g><g class="message" data-participant-1="Inference" data-participant-2="API"><polygon fill="#181818" points="288.8091,1004.4297,278.8091,1008.4297,288.8091,1012.4297,284.8091,1008.4297" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="282.8091" x2="559.3281" y1="1008.4297" y2="1008.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="81.0088" x="294.8091" y="1003.3638">result or URI</text></g><g class="message" data-participant-1="API" data-participant-2="Client"><polygon fill="#181818" points="43.2651,1048.6953,33.2651,1052.6953,43.2651,1056.6953,39.2651,1052.6953" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="37.2651" x2="271.8091" y1="1052.6953" y2="1052.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="47.7026" x="49.2651" y="1032.4966">200 OK</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="163.5854" x="49.2651" y="1047.6294">{result or presigned_url}</text></g></g></svg></div><div class="puml dark" style=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="1105px" preserveAspectRatio="xMidYMid meet" style="width:1248px;height:1105px;background:#1B1B1B;" version="1.1" viewBox="0 0 1248 1105" width="1248px" zoomAndPan="magnify" class="diagram"><defs/><g><rect fill="#1B1B1B" height="1105" style="stroke:none;stroke-width:1;" width="1248" x="0" y="0"/><g><title>REST API</title><rect fill="#313139" height="245.0625" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="267.8091" y="67.4297"/></g><g><title>REST API</title><rect fill="#313139" height="102.5313" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="267.8091" y="818.5"/></g><g><title>REST API</title><rect fill="#313139" height="102.5313" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="267.8091" y="950.1641"/></g><g><title>Inference Service</title><rect fill="#313139" height="171.6641" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="555.3281" y="96.5625"/></g><g><title>Inference Service</title><rect fill="#313139" height="324" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="555.3281" y="417.5625"/></g><g><title>Inference Service</title><rect fill="#313139" height="29.1328" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="555.3281" y="847.6328"/></g><g><title>Inference Service</title><rect fill="#313139" height="29.1328" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="555.3281" y="979.2969"/></g><g><title>Queue</title><rect fill="#313139" height="71.2656" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="798.0264" y="167.8281"/></g><g><title>Worker Process</title><rect fill="#313139" height="71.2656" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="1021.1294" y="446.6953"/></g><g><title>Result Store</title><rect fill="#313139" height="29.1328" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="1176.3569" y="571.2266"/></g><rect fill="none" height="174.4688" style="stroke:#FFFFFF;stroke-width:1.5;" width="758.9966" x="482.1841" y="532.9609"/><g><title>Client</title><rect fill="#000000" fill-opacity="0.00000" height="319.3281" width="8" x="28.2651" y="36.2969"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="32" x2="32" y1="36.2969" y2="355.625"/></g><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="32" x2="32" y1="355.625" y2="396.4297"/><g><title>Client</title><rect fill="#000000" fill-opacity="0.00000" height="360.1328" width="8" x="28.2651" y="396.4297"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="32" x2="32" y1="396.4297" y2="756.5625"/></g><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="32" x2="32" y1="756.5625" y2="797.3672"/><g><title>Client</title><rect fill="#000000" fill-opacity="0.00000" height="273.3281" width="8" x="28.2651" y="797.3672"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="32" x2="32" y1="797.3672" y2="1070.6953"/></g><g><title>REST API</title><rect fill="#000000" fill-opacity="0.00000" height="319.3281" width="8" x="268.8091" y="36.2969"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="272.5039" x2="272.5039" y1="36.2969" y2="355.625"/></g><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="272.5039" x2="272.5039" y1="355.625" y2="396.4297"/><g><title>REST API</title><rect fill="#000000" fill-opacity="0.00000" height="360.1328" width="8" x="268.8091" y="396.4297"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="272.5039" x2="272.5039" y1="396.4297" y2="756.5625"/></g><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="272.5039" x2="272.5039" y1="756.5625" y2="797.3672"/><g><title>REST API</title><rect fill="#000000" fill-opacity="0.00000" height="273.3281" width="8" x="268.8091" y="797.3672"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="272.5039" x2="272.5039" y1="797.3672" y2="1070.6953"/></g><g><title>Inference Service</title><rect fill="#000000" fill-opacity="0.00000" height="319.3281" width="8" x="556.3281" y="36.2969"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="560.1841" x2="560.1841" y1="36.2969" y2="355.625"/></g><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="560.1841" x2="560.1841" y1="355.625" y2="396.4297"/><g><title>Inference Service</title><rect fill="#000000" fill-opacity="0.00000" height="360.1328" width="8" x="556.3281" y="396.4297"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="560.1841" x2="560.1841" y1="396.4297" y2="756.5625"/></g><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="560.1841" x2="560.1841" y1="756.5625" y2="797.3672"/><g><title>Inference Service</title><rect fill="#000000" fill-opacity="0.00000" height="273.3281" width="8" x="556.3281" y="797.3672"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="560.1841" x2="560.1841" y1="797.3672" y2="1070.6953"/></g><g><title>Queue</title><rect fill="#000000" fill-opacity="0.00000" height="319.3281" width="8" x="799.0264" y="36.2969"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="802.0303" x2="802.0303" y1="36.2969" y2="355.625"/></g><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="802.0303" x2="802.0303" y1="355.625" y2="396.4297"/><g><title>Queue</title><rect fill="#000000" fill-opacity="0.00000" height="360.1328" width="8" x="799.0264" y="396.4297"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="802.0303" x2="802.0303" y1="396.4297" y2="756.5625"/></g><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="802.0303" x2="802.0303" y1="756.5625" y2="797.3672"/><g><title>Queue</title><rect fill="#000000" fill-opacity="0.00000" height="273.3281" width="8" x="799.0264" y="797.3672"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="802.0303" x2="802.0303" y1="797.3672" y2="1070.6953"/></g><g><title>Worker Process</title><rect fill="#000000" fill-opacity="0.00000" height="319.3281" width="8" x="1022.1294" y="36.2969"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="1025.7529" x2="1025.7529" y1="36.2969" y2="355.625"/></g><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="1025.7529" x2="1025.7529" y1="355.625" y2="396.4297"/><g><title>Worker Process</title><rect fill="#000000" fill-opacity="0.00000" height="360.1328" width="8" x="1022.1294" y="396.4297"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="1025.7529" x2="1025.7529" y1="396.4297" y2="756.5625"/></g><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="1025.7529" x2="1025.7529" y1="756.5625" y2="797.3672"/><g><title>Worker Process</title><rect fill="#000000" fill-opacity="0.00000" height="273.3281" width="8" x="1022.1294" y="797.3672"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="1025.7529" x2="1025.7529" y1="797.3672" y2="1070.6953"/></g><g><title>Result Store</title><rect fill="#000000" fill-opacity="0.00000" height="319.3281" width="8" x="1177.3569" y="36.2969"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="1180.5332" x2="1180.5332" y1="36.2969" y2="355.625"/></g><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="1180.5332" x2="1180.5332" y1="355.625" y2="396.4297"/><g><title>Result Store</title><rect fill="#000000" fill-opacity="0.00000" height="360.1328" width="8" x="1177.3569" y="396.4297"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="1180.5332" x2="1180.5332" y1="396.4297" y2="756.5625"/></g><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="1180.5332" x2="1180.5332" y1="756.5625" y2="797.3672"/><g><title>Result Store</title><rect fill="#000000" fill-opacity="0.00000" height="273.3281" width="8" x="1177.3569" y="797.3672"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="1180.5332" x2="1180.5332" y1="797.3672" y2="1070.6953"/></g><g class="participant participant-head" data-participant="Client"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="54.5303" x="5" y="5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40.5303" x="12" y="24.9951">Client</text></g><g class="participant participant-tail" data-participant="Client"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="54.5303" x="5" y="1069.6953"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40.5303" x="12" y="1089.6904">Client</text></g><g class="participant participant-head" data-participant="API"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="76.6104" x="234.5039" y="5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62.6104" x="241.5039" y="24.9951">REST API</text></g><g class="participant participant-tail" data-participant="API"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="76.6104" x="234.5039" y="1069.6953"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62.6104" x="241.5039" y="1089.6904">REST API</text></g><g class="participant participant-head" data-participant="Inference"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="136.2881" x="492.1841" y="5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122.2881" x="499.1841" y="24.9951">Inference Service</text></g><g class="participant participant-tail" data-participant="Inference"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="136.2881" x="492.1841" y="1069.6953"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122.2881" x="499.1841" y="1089.6904">Inference Service</text></g><g class="participant participant-head" data-participant="Queue"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="59.9922" x="773.0303" y="5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="45.9922" x="780.0303" y="24.9951">Queue</text></g><g class="participant participant-tail" data-participant="Queue"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="59.9922" x="773.0303" y="1069.6953"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="45.9922" x="780.0303" y="1089.6904">Queue</text></g><g class="participant participant-head" data-participant="Worker"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="122.7529" x="964.7529" y="5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108.7529" x="971.7529" y="24.9951">Worker Process</text></g><g class="participant participant-tail" data-participant="Worker"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="122.7529" x="964.7529" y="1069.6953"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108.7529" x="971.7529" y="1089.6904">Worker Process</text></g><g class="participant participant-head" data-participant="Storage"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="99.6475" x="1131.5332" y="5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85.6475" x="1138.5332" y="24.9951">Result Store</text></g><g class="participant participant-tail" data-participant="Storage"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="99.6475" x="1131.5332" y="1069.6953"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85.6475" x="1138.5332" y="1089.6904">Result Store</text></g><g><title>REST API</title><rect fill="#313139" height="245.0625" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="267.8091" y="67.4297"/></g><g><title>REST API</title><rect fill="#313139" height="102.5313" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="267.8091" y="818.5"/></g><g><title>REST API</title><rect fill="#313139" height="102.5313" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="267.8091" y="950.1641"/></g><g><title>Inference Service</title><rect fill="#313139" height="171.6641" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="555.3281" y="96.5625"/></g><g><title>Inference Service</title><rect fill="#313139" height="324" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="555.3281" y="417.5625"/></g><g><title>Inference Service</title><rect fill="#313139" height="29.1328" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="555.3281" y="847.6328"/></g><g><title>Inference Service</title><rect fill="#313139" height="29.1328" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="555.3281" y="979.2969"/></g><g><title>Queue</title><rect fill="#313139" height="71.2656" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="798.0264" y="167.8281"/></g><g><title>Worker Process</title><rect fill="#313139" height="71.2656" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="1021.1294" y="446.6953"/></g><g><title>Result Store</title><rect fill="#313139" height="29.1328" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="1176.3569" y="571.2266"/></g><g class="message" data-participant-1="Client" data-participant-2="API"><polygon fill="#E7E7E7" points="255.8091,63.4297,265.8091,67.4297,255.8091,71.4297,259.8091,67.4297" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="32.2651" x2="261.8091" y1="67.4297" y2="67.4297"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="216.5439" x="39.2651" y="62.3638">POST /api/v1/infer/model-x/async</text></g><g class="message" data-participant-1="API" data-participant-2="Inference"><polygon fill="#E7E7E7" points="543.3281,92.5625,553.3281,96.5625,543.3281,100.5625,547.3281,96.5625" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="277.8091" x2="549.3281" y1="96.5625" y2="96.5625"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="205.0039" x="284.8091" y="91.4966">submit_async_request(request)</text></g><g class="message" data-participant-1="Inference" data-participant-2="Inference"><line style="stroke:#E7E7E7;stroke-width:1;" x1="565.3281" x2="607.3281" y1="125.6953" y2="125.6953"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="607.3281" x2="607.3281" y1="125.6953" y2="138.6953"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="566.3281" x2="607.3281" y1="138.6953" y2="138.6953"/><polygon fill="#E7E7E7" points="576.3281,134.6953,566.3281,138.6953,576.3281,142.6953,572.3281,138.6953" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113.7183" x="572.3281" y="120.6294">generate_job_id()</text></g><g class="message" data-participant-1="Inference" data-participant-2="Queue"><polygon fill="#E7E7E7" points="786.0264,163.8281,796.0264,167.8281,786.0264,171.8281,790.0264,167.8281" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="565.3281" x2="792.0264" y1="167.8281" y2="167.8281"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142.0986" x="572.3281" y="162.7622">enqueue(job, priority)</text></g><g class="message" data-participant-1="Queue" data-participant-2="Queue"><line style="stroke:#E7E7E7;stroke-width:1;" x1="808.0264" x2="850.0264" y1="196.9609" y2="196.9609"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="850.0264" x2="850.0264" y1="196.9609" y2="209.9609"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="809.0264" x2="850.0264" y1="209.9609" y2="209.9609"/><polygon fill="#E7E7E7" points="819.0264,205.9609,809.0264,209.9609,819.0264,213.9609,815.0264,209.9609" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="189.103" x="815.0264" y="191.895">sort_by_priority_and_model()</text></g><g class="message" data-participant-1="Queue" data-participant-2="Inference"><polygon fill="#E7E7E7" points="576.3281,235.0938,566.3281,239.0938,576.3281,243.0938,572.3281,239.0938" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="570.3281" x2="802.0264" y1="239.0938" y2="239.0938"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="48.9785" x="582.3281" y="234.0278">queued</text></g><g class="message" data-participant-1="Inference" data-participant-2="API"><polygon fill="#E7E7E7" points="288.8091,264.2266,278.8091,268.2266,288.8091,272.2266,284.8091,268.2266" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="282.8091" x2="559.3281" y1="268.2266" y2="268.2266"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="253.519" x="294.8091" y="263.1606">JobReference{job_id, status: QUEUED}</text></g><g class="message" data-participant-1="API" data-participant-2="Client"><polygon fill="#E7E7E7" points="43.2651,308.4922,33.2651,312.4922,43.2651,316.4922,39.2651,312.4922" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="37.2651" x2="271.8091" y1="312.4922" y2="312.4922"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89.7305" x="49.2651" y="292.2935">202 Accepted</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="54.7231" x="49.2651" y="307.4263">{job_id}</text></g><path d="M37,325.4922 L37,350.4922 L216,350.4922 L216,335.4922 L206,325.4922 L37,325.4922" fill="#714137" style="stroke:#E7E7E7;stroke-width:0.5;"/><path d="M206,325.4922 L206,335.4922 L216,335.4922 L206,325.4922" fill="#714137" style="stroke:#E7E7E7;stroke-width:0.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="158.7676" x="43" y="342.5591">Client can poll for status</text><text fill="#FFFFFF" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="128.5356" x="542.5432" y="379.8354">Background Processing</text><g class="message" data-participant-1="Queue" data-participant-2="Inference"><polygon fill="#E7E7E7" points="576.3281,413.5625,566.3281,417.5625,576.3281,421.5625,572.3281,417.5625" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="570.3281" x2="802.0264" y1="417.5625" y2="417.5625"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110.3223" x="582.3281" y="412.4966">dequeue_batch()</text></g><g class="message" data-participant-1="Inference" data-participant-2="Worker"><polygon fill="#E7E7E7" points="1009.1294,442.6953,1019.1294,446.6953,1009.1294,450.6953,1013.1294,446.6953" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="565.3281" x2="1015.1294" y1="446.6953" y2="446.6953"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="161.9922" x="572.3281" y="441.6294">execute_batch(requests)</text></g><g class="message" data-participant-1="Worker" data-participant-2="Worker"><line style="stroke:#E7E7E7;stroke-width:1;" x1="1031.1294" x2="1073.1294" y1="475.8281" y2="475.8281"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="1073.1294" x2="1073.1294" y1="475.8281" y2="488.8281"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="1032.1294" x2="1073.1294" y1="488.8281" y2="488.8281"/><polygon fill="#E7E7E7" points="1042.1294,484.8281,1032.1294,488.8281,1042.1294,492.8281,1038.1294,488.8281" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121.2275" x="1038.1294" y="470.7622">model.infer(batch)</text></g><g class="message" data-participant-1="Worker" data-participant-2="Inference"><polygon fill="#E7E7E7" points="576.3281,513.9609,566.3281,517.9609,576.3281,521.9609,572.3281,517.9609" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="570.3281" x2="1025.1294" y1="517.9609" y2="517.9609"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="43.8369" x="582.3281" y="512.895">results</text></g><path d="M482.1841,532.9609 L546.627,532.9609 L546.627,540.0938 L536.627,550.0938 L482.1841,550.0938 L482.1841,532.9609" fill="#555555" style="stroke:#FFFFFF;stroke-width:1.5;"/><rect fill="none" height="174.4688" style="stroke:#FFFFFF;stroke-width:1.5;" width="758.9966" x="482.1841" y="532.9609"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="497.1841" y="546.0278">alt</text><text fill="#FFFFFF" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="168.9424" x="561.627" y="545.1714">[Large result (e.g., image)]</text><g class="message" data-participant-1="Inference" data-participant-2="Storage"><polygon fill="#E7E7E7" points="1164.3569,567.2266,1174.3569,571.2266,1164.3569,575.2266,1168.3569,571.2266" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="565.3281" x2="1170.3569" y1="571.2266" y2="571.2266"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162.6016" x="572.3281" y="566.1606">store_result(job_id, data)</text></g><g class="message" data-participant-1="Storage" data-participant-2="Inference"><polygon fill="#E7E7E7" points="576.3281,596.3594,566.3281,600.3594,576.3281,604.3594,572.3281,600.3594" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="570.3281" x2="1180.3569" y1="600.3594" y2="600.3594"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="60.7598" x="582.3281" y="595.2935">result_uri</text></g><g class="message" data-participant-1="Inference" data-participant-2="Inference"><line style="stroke:#E7E7E7;stroke-width:1;" x1="565.3281" x2="607.3281" y1="629.4922" y2="629.4922"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="607.3281" x2="607.3281" y1="629.4922" y2="642.4922"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="566.3281" x2="607.3281" y1="642.4922" y2="642.4922"/><polygon fill="#E7E7E7" points="576.3281,638.4922,566.3281,642.4922,576.3281,646.4922,572.3281,642.4922" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174.0972" x="572.3281" y="624.4263">save_job_result(job_id, uri)</text></g><line style="stroke:#FFFFFF;stroke-width:1;stroke-dasharray:2,2;" x1="482.1841" x2="1241.1807" y1="651.4922" y2="651.4922"/><text fill="#FFFFFF" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="199.5898" x="487.1841" y="661.7026">[Small result (e.g., embedding)]</text><g class="message" data-participant-1="Inference" data-participant-2="Inference"><line style="stroke:#E7E7E7;stroke-width:1;" x1="565.3281" x2="607.3281" y1="686.4297" y2="686.4297"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="607.3281" x2="607.3281" y1="686.4297" y2="699.4297"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="566.3281" x2="607.3281" y1="699.4297" y2="699.4297"/><polygon fill="#E7E7E7" points="576.3281,695.4297,566.3281,699.4297,576.3281,703.4297,572.3281,699.4297" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="186.1831" x="572.3281" y="681.3638">save_job_result(job_id, data)</text></g><g class="message" data-participant-1="Inference" data-participant-2="Inference"><line style="stroke:#E7E7E7;stroke-width:1;" x1="565.3281" x2="607.3281" y1="740.5625" y2="740.5625"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="607.3281" x2="607.3281" y1="740.5625" y2="753.5625"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="560.3281" x2="607.3281" y1="753.5625" y2="753.5625"/><polygon fill="#E7E7E7" points="570.3281,749.5625,560.3281,753.5625,570.3281,757.5625,566.3281,753.5625" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="208.6982" x="572.3281" y="735.4966">update_job_status(COMPLETED)</text></g><text fill="#FFFFFF" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="60.5483" x="576.5369" y="780.7729">Client Polls</text><g class="message" data-participant-1="Client" data-participant-2="API"><polygon fill="#E7E7E7" points="255.8091,814.5,265.8091,818.5,255.8091,822.5,259.8091,818.5" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="32.2651" x2="261.8091" y1="818.5" y2="818.5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164.9883" x="39.2651" y="813.4341">GET /api/v1/jobs/{job_id}</text></g><g class="message" data-participant-1="API" data-participant-2="Inference"><polygon fill="#E7E7E7" points="543.3281,843.6328,553.3281,847.6328,543.3281,851.6328,547.3281,847.6328" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="277.8091" x2="549.3281" y1="847.6328" y2="847.6328"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142.4351" x="284.8091" y="842.5669">get_job_status(job_id)</text></g><g class="message" data-participant-1="Inference" data-participant-2="API"><polygon fill="#E7E7E7" points="288.8091,872.7656,278.8091,876.7656,288.8091,880.7656,284.8091,876.7656" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="282.8091" x2="559.3281" y1="876.7656" y2="876.7656"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="206.4512" x="294.8091" y="871.6997">JobStatus{status: COMPLETED}</text></g><g class="message" data-participant-1="API" data-participant-2="Client"><polygon fill="#E7E7E7" points="43.2651,917.0313,33.2651,921.0313,43.2651,925.0313,39.2651,921.0313" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="37.2651" x2="271.8091" y1="921.0313" y2="921.0313"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="47.7026" x="49.2651" y="900.8325">200 OK</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144.9868" x="49.2651" y="915.9653">{status: COMPLETED}</text></g><g class="message" data-participant-1="Client" data-participant-2="API"><polygon fill="#E7E7E7" points="255.8091,946.1641,265.8091,950.1641,255.8091,954.1641,259.8091,950.1641" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="32.2651" x2="261.8091" y1="950.1641" y2="950.1641"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="206.4321" x="39.2651" y="945.0981">GET /api/v1/jobs/{job_id}/result</text></g><g class="message" data-participant-1="API" data-participant-2="Inference"><polygon fill="#E7E7E7" points="543.3281,975.2969,553.3281,979.2969,543.3281,983.2969,547.3281,979.2969" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="277.8091" x2="549.3281" y1="979.2969" y2="979.2969"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139.5532" x="284.8091" y="974.231">get_job_result(job_id)</text></g><g class="message" data-participant-1="Inference" data-participant-2="API"><polygon fill="#E7E7E7" points="288.8091,1004.4297,278.8091,1008.4297,288.8091,1012.4297,284.8091,1008.4297" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="282.8091" x2="559.3281" y1="1008.4297" y2="1008.4297"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="81.0088" x="294.8091" y="1003.3638">result or URI</text></g><g class="message" data-participant-1="API" data-participant-2="Client"><polygon fill="#E7E7E7" points="43.2651,1048.6953,33.2651,1052.6953,43.2651,1056.6953,39.2651,1052.6953" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="37.2651" x2="271.8091" y1="1052.6953" y2="1052.6953"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="47.7026" x="49.2651" y="1032.4966">200 OK</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="163.5854" x="49.2651" y="1047.6294">{result or presigned_url}</text></g></g></svg></div></div>

<h3 id="54-batch-accumulation-flow">5.4 Batch Accumulation Flow<a class="headerlink" href="#54-batch-accumulation-flow" title="Permanent link">&para;</a></h3>
<div class='puml-container'><div class="puml light" style=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="949px" preserveAspectRatio="xMidYMid meet" style="width:1061px;height:949px;background:#FFFFFF;" version="1.1" viewBox="0 0 1061 949" width="1061px" zoomAndPan="magnify" class="diagram"><defs/><g><g><title>Inference Service</title><rect fill="#F1F1F1" height="129.5313" style="stroke:#181818;stroke-width:1;" width="10" x="394.731" y="67.4297"/></g><g><title>Inference Service</title><rect fill="#F1F1F1" height="87.3984" style="stroke:#181818;stroke-width:1;" width="10" x="394.731" y="266.8984"/></g><g><title>Inference Service</title><rect fill="#F1F1F1" height="129.5313" style="stroke:#181818;stroke-width:1;" width="10" x="394.731" y="424.2344"/></g><g><title>Inference Service</title><rect fill="#F1F1F1" height="87.3984" style="stroke:#181818;stroke-width:1;" width="10" x="394.731" y="808.3672"/></g><g><title>Batch Accumulator</title><rect fill="#F1F1F1" height="71.2656" style="stroke:#181818;stroke-width:1;" width="10" x="640.1987" y="96.5625"/></g><g><title>Batch Accumulator</title><rect fill="#F1F1F1" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="640.1987" y="296.0313"/></g><g><title>Batch Accumulator</title><rect fill="#F1F1F1" height="71.2656" style="stroke:#181818;stroke-width:1;" width="10" x="640.1987" y="453.3672"/></g><g><title>Batch Accumulator</title><rect fill="#F1F1F1" height="264.0625" style="stroke:#181818;stroke-width:1;" width="10" x="640.1987" y="631.7031"/></g><g><title>Worker</title><rect fill="#F1F1F1" height="71.2656" style="stroke:#181818;stroke-width:1;" width="10" x="916.311" y="707.9688"/></g><g><title>Request 1</title><rect fill="#000000" fill-opacity="0.00000" height="168.6641" width="8" x="43.4272" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="47" x2="47" y1="36.2969" y2="204.9609"/></g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="47" x2="47" y1="204.9609" y2="245.7656"/><g><title>Request 1</title><rect fill="#000000" fill-opacity="0.00000" height="116.5313" width="8" x="43.4272" y="245.7656"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="47" x2="47" y1="245.7656" y2="362.2969"/></g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="47" x2="47" y1="362.2969" y2="403.1016"/><g><title>Request 1</title><rect fill="#000000" fill-opacity="0.00000" height="158.6641" width="8" x="43.4272" y="403.1016"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="47" x2="47" y1="403.1016" y2="561.7656"/></g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="47" x2="47" y1="561.7656" y2="602.5703"/><g><title>Request 1</title><rect fill="#000000" fill-opacity="0.00000" height="311.1953" width="8" x="43.4272" y="602.5703"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="47" x2="47" y1="602.5703" y2="913.7656"/></g><g><title>Request 2</title><rect fill="#000000" fill-opacity="0.00000" height="168.6641" width="8" x="138.2817" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="141.8545" x2="141.8545" y1="36.2969" y2="204.9609"/></g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="141.8545" x2="141.8545" y1="204.9609" y2="245.7656"/><g><title>Request 2</title><rect fill="#000000" fill-opacity="0.00000" height="116.5313" width="8" x="138.2817" y="245.7656"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="141.8545" x2="141.8545" y1="245.7656" y2="362.2969"/></g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="141.8545" x2="141.8545" y1="362.2969" y2="403.1016"/><g><title>Request 2</title><rect fill="#000000" fill-opacity="0.00000" height="158.6641" width="8" x="138.2817" y="403.1016"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="141.8545" x2="141.8545" y1="403.1016" y2="561.7656"/></g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="141.8545" x2="141.8545" y1="561.7656" y2="602.5703"/><g><title>Request 2</title><rect fill="#000000" fill-opacity="0.00000" height="311.1953" width="8" x="138.2817" y="602.5703"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="141.8545" x2="141.8545" y1="602.5703" y2="913.7656"/></g><g><title>Request 3</title><rect fill="#000000" fill-opacity="0.00000" height="168.6641" width="8" x="233.1362" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="236.709" x2="236.709" y1="36.2969" y2="204.9609"/></g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="236.709" x2="236.709" y1="204.9609" y2="245.7656"/><g><title>Request 3</title><rect fill="#000000" fill-opacity="0.00000" height="116.5313" width="8" x="233.1362" y="245.7656"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="236.709" x2="236.709" y1="245.7656" y2="362.2969"/></g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="236.709" x2="236.709" y1="362.2969" y2="403.1016"/><g><title>Request 3</title><rect fill="#000000" fill-opacity="0.00000" height="158.6641" width="8" x="233.1362" y="403.1016"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="236.709" x2="236.709" y1="403.1016" y2="561.7656"/></g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="236.709" x2="236.709" y1="561.7656" y2="602.5703"/><g><title>Request 3</title><rect fill="#000000" fill-opacity="0.00000" height="311.1953" width="8" x="233.1362" y="602.5703"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="236.709" x2="236.709" y1="602.5703" y2="913.7656"/></g><g><title>Inference Service</title><rect fill="#000000" fill-opacity="0.00000" height="168.6641" width="8" x="395.731" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="399.5869" x2="399.5869" y1="36.2969" y2="204.9609"/></g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="399.5869" x2="399.5869" y1="204.9609" y2="245.7656"/><g><title>Inference Service</title><rect fill="#000000" fill-opacity="0.00000" height="116.5313" width="8" x="395.731" y="245.7656"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="399.5869" x2="399.5869" y1="245.7656" y2="362.2969"/></g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="399.5869" x2="399.5869" y1="362.2969" y2="403.1016"/><g><title>Inference Service</title><rect fill="#000000" fill-opacity="0.00000" height="158.6641" width="8" x="395.731" y="403.1016"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="399.5869" x2="399.5869" y1="403.1016" y2="561.7656"/></g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="399.5869" x2="399.5869" y1="561.7656" y2="602.5703"/><g><title>Inference Service</title><rect fill="#000000" fill-opacity="0.00000" height="311.1953" width="8" x="395.731" y="602.5703"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="399.5869" x2="399.5869" y1="602.5703" y2="913.7656"/></g><g><title>Batch Accumulator</title><rect fill="#000000" fill-opacity="0.00000" height="168.6641" width="8" x="641.1987" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="644.5347" x2="644.5347" y1="36.2969" y2="204.9609"/></g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="644.5347" x2="644.5347" y1="204.9609" y2="245.7656"/><g><title>Batch Accumulator</title><rect fill="#000000" fill-opacity="0.00000" height="116.5313" width="8" x="641.1987" y="245.7656"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="644.5347" x2="644.5347" y1="245.7656" y2="362.2969"/></g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="644.5347" x2="644.5347" y1="362.2969" y2="403.1016"/><g><title>Batch Accumulator</title><rect fill="#000000" fill-opacity="0.00000" height="158.6641" width="8" x="641.1987" y="403.1016"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="644.5347" x2="644.5347" y1="403.1016" y2="561.7656"/></g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="644.5347" x2="644.5347" y1="561.7656" y2="602.5703"/><g><title>Batch Accumulator</title><rect fill="#000000" fill-opacity="0.00000" height="311.1953" width="8" x="641.1987" y="602.5703"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="644.5347" x2="644.5347" y1="602.5703" y2="913.7656"/></g><g><title>Worker</title><rect fill="#000000" fill-opacity="0.00000" height="168.6641" width="8" x="917.311" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="920.9907" x2="920.9907" y1="36.2969" y2="204.9609"/></g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="920.9907" x2="920.9907" y1="204.9609" y2="245.7656"/><g><title>Worker</title><rect fill="#000000" fill-opacity="0.00000" height="116.5313" width="8" x="917.311" y="245.7656"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="920.9907" x2="920.9907" y1="245.7656" y2="362.2969"/></g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="920.9907" x2="920.9907" y1="362.2969" y2="403.1016"/><g><title>Worker</title><rect fill="#000000" fill-opacity="0.00000" height="158.6641" width="8" x="917.311" y="403.1016"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="920.9907" x2="920.9907" y1="403.1016" y2="561.7656"/></g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="920.9907" x2="920.9907" y1="561.7656" y2="602.5703"/><g><title>Worker</title><rect fill="#000000" fill-opacity="0.00000" height="311.1953" width="8" x="917.311" y="602.5703"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="920.9907" x2="920.9907" y1="602.5703" y2="913.7656"/></g><g class="participant participant-head" data-participant="R1"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="84.8545" x="5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70.8545" x="12" y="24.9951">Request 1</text></g><g class="participant participant-tail" data-participant="R1"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="84.8545" x="5" y="912.7656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70.8545" x="12" y="932.7607">Request 1</text></g><g class="participant participant-head" data-participant="R2"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="84.8545" x="99.8545" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70.8545" x="106.8545" y="24.9951">Request 2</text></g><g class="participant participant-tail" data-participant="R2"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="84.8545" x="99.8545" y="912.7656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70.8545" x="106.8545" y="932.7607">Request 2</text></g><g class="participant participant-head" data-participant="R3"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="84.8545" x="194.709" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70.8545" x="201.709" y="24.9951">Request 3</text></g><g class="participant participant-tail" data-participant="R3"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="84.8545" x="194.709" y="912.7656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70.8545" x="201.709" y="932.7607">Request 3</text></g><g class="participant participant-head" data-participant="Inference"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="136.2881" x="331.5869" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122.2881" x="338.5869" y="24.9951">Inference Service</text></g><g class="participant participant-tail" data-participant="Inference"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="136.2881" x="331.5869" y="912.7656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122.2881" x="338.5869" y="932.7607">Inference Service</text></g><g class="participant participant-head" data-participant="Batch"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="147.3281" x="571.5347" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133.3281" x="578.5347" y="24.9951">Batch Accumulator</text></g><g class="participant participant-tail" data-participant="Batch"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="147.3281" x="571.5347" y="912.7656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133.3281" x="578.5347" y="932.7607">Batch Accumulator</text></g><g class="participant participant-head" data-participant="Worker"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="64.6406" x="888.9907" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50.6406" x="895.9907" y="24.9951">Worker</text></g><g class="participant participant-tail" data-participant="Worker"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="64.6406" x="888.9907" y="912.7656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50.6406" x="895.9907" y="932.7607">Worker</text></g><g><title>Inference Service</title><rect fill="#F1F1F1" height="129.5313" style="stroke:#181818;stroke-width:1;" width="10" x="394.731" y="67.4297"/></g><g><title>Inference Service</title><rect fill="#F1F1F1" height="87.3984" style="stroke:#181818;stroke-width:1;" width="10" x="394.731" y="266.8984"/></g><g><title>Inference Service</title><rect fill="#F1F1F1" height="129.5313" style="stroke:#181818;stroke-width:1;" width="10" x="394.731" y="424.2344"/></g><g><title>Inference Service</title><rect fill="#F1F1F1" height="87.3984" style="stroke:#181818;stroke-width:1;" width="10" x="394.731" y="808.3672"/></g><g><title>Batch Accumulator</title><rect fill="#F1F1F1" height="71.2656" style="stroke:#181818;stroke-width:1;" width="10" x="640.1987" y="96.5625"/></g><g><title>Batch Accumulator</title><rect fill="#F1F1F1" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="640.1987" y="296.0313"/></g><g><title>Batch Accumulator</title><rect fill="#F1F1F1" height="71.2656" style="stroke:#181818;stroke-width:1;" width="10" x="640.1987" y="453.3672"/></g><g><title>Batch Accumulator</title><rect fill="#F1F1F1" height="264.0625" style="stroke:#181818;stroke-width:1;" width="10" x="640.1987" y="631.7031"/></g><g><title>Worker</title><rect fill="#F1F1F1" height="71.2656" style="stroke:#181818;stroke-width:1;" width="10" x="916.311" y="707.9688"/></g><g class="message" data-participant-1="R1" data-participant-2="Inference"><polygon fill="#181818" points="382.731,63.4297,392.731,67.4297,382.731,71.4297,386.731,67.4297" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="47.4272" x2="388.731" y1="67.4297" y2="67.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138.5947" x="54.4272" y="62.3638">infer(model-x, data1)</text></g><g class="message" data-participant-1="Inference" data-participant-2="Batch"><polygon fill="#181818" points="628.1987,92.5625,638.1987,96.5625,628.1987,100.5625,632.1987,96.5625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="404.731" x2="634.1987" y1="96.5625" y2="96.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="216.4678" x="411.731" y="91.4966">add_to_batch(model-x, request1)</text></g><g class="message" data-participant-1="Batch" data-participant-2="Batch"><line style="stroke:#181818;stroke-width:1;" x1="650.1987" x2="692.1987" y1="125.6953" y2="125.6953"/><line style="stroke:#181818;stroke-width:1;" x1="692.1987" x2="692.1987" y1="125.6953" y2="138.6953"/><line style="stroke:#181818;stroke-width:1;" x1="651.1987" x2="692.1987" y1="138.6953" y2="138.6953"/><polygon fill="#181818" points="661.1987,134.6953,651.1987,138.6953,661.1987,142.6953,657.1987,138.6953" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="242.1123" x="657.1987" y="120.6294">start_batch_timer(max_wait=100ms)</text></g><g class="message" data-participant-1="Batch" data-participant-2="Inference"><polygon fill="#181818" points="415.731,163.8281,405.731,167.8281,415.731,171.8281,411.731,167.8281" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="409.731" x2="644.1987" y1="167.8281" y2="167.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40.7202" x="421.731" y="162.7622">added</text></g><g class="message" data-participant-1="Inference" data-participant-2="R1"><polygon fill="#181818" points="58.4272,192.9609,48.4272,196.9609,58.4272,200.9609,54.4272,196.9609" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="52.4272" x2="398.731" y1="196.9609" y2="196.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="48.9785" x="64.4272" y="191.895">queued</text></g><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="59.3398" x="454.6992" y="229.1714">20ms later</text><g class="message" data-participant-1="R2" data-participant-2="Inference"><polygon fill="#181818" points="382.731,262.8984,392.731,266.8984,382.731,270.8984,386.731,266.8984" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="142.2817" x2="388.731" y1="266.8984" y2="266.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138.5947" x="149.2817" y="261.8325">infer(model-x, data2)</text></g><g class="message" data-participant-1="Inference" data-participant-2="Batch"><polygon fill="#181818" points="628.1987,292.0313,638.1987,296.0313,628.1987,300.0313,632.1987,296.0313" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="404.731" x2="634.1987" y1="296.0313" y2="296.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="216.4678" x="411.731" y="290.9653">add_to_batch(model-x, request2)</text></g><g class="message" data-participant-1="Batch" data-participant-2="Inference"><polygon fill="#181818" points="415.731,321.1641,405.731,325.1641,415.731,329.1641,411.731,325.1641" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="409.731" x2="644.1987" y1="325.1641" y2="325.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40.7202" x="421.731" y="320.0981">added</text></g><g class="message" data-participant-1="Inference" data-participant-2="R2"><polygon fill="#181818" points="153.2817,350.2969,143.2817,354.2969,153.2817,358.2969,149.2817,354.2969" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="147.2817" x2="398.731" y1="354.2969" y2="354.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="48.9785" x="159.2817" y="349.231">queued</text></g><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="59.3398" x="454.6992" y="386.5073">30ms later</text><g class="message" data-participant-1="R3" data-participant-2="Inference"><polygon fill="#181818" points="382.731,420.2344,392.731,424.2344,382.731,428.2344,386.731,424.2344" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="237.1362" x2="388.731" y1="424.2344" y2="424.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138.5947" x="244.1362" y="419.1685">infer(model-x, data3)</text></g><g class="message" data-participant-1="Inference" data-participant-2="Batch"><polygon fill="#181818" points="628.1987,449.3672,638.1987,453.3672,628.1987,457.3672,632.1987,453.3672" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="404.731" x2="634.1987" y1="453.3672" y2="453.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="216.4678" x="411.731" y="448.3013">add_to_batch(model-x, request3)</text></g><g class="message" data-participant-1="Batch" data-participant-2="Batch"><line style="stroke:#181818;stroke-width:1;" x1="650.1987" x2="692.1987" y1="482.5" y2="482.5"/><line style="stroke:#181818;stroke-width:1;" x1="692.1987" x2="692.1987" y1="482.5" y2="495.5"/><line style="stroke:#181818;stroke-width:1;" x1="651.1987" x2="692.1987" y1="495.5" y2="495.5"/><polygon fill="#181818" points="661.1987,491.5,651.1987,495.5,661.1987,499.5,657.1987,495.5" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123.1128" x="657.1987" y="477.4341">check_batch_size()</text></g><path d="M802.1128,469.8672 L802.1128,494.8672 L981.1128,494.8672 L981.1128,479.8672 L971.1128,469.8672 L802.1128,469.8672" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M971.1128,469.8672 L971.1128,479.8672 L981.1128,479.8672 L971.1128,469.8672" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="158.1519" x="808.1128" y="486.9341">Batch size = 3, max = 8</text><g class="message" data-participant-1="Batch" data-participant-2="Inference"><polygon fill="#181818" points="415.731,520.6328,405.731,524.6328,415.731,528.6328,411.731,524.6328" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="409.731" x2="644.1987" y1="524.6328" y2="524.6328"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40.7202" x="421.731" y="519.5669">added</text></g><g class="message" data-participant-1="Inference" data-participant-2="R3"><polygon fill="#181818" points="248.1362,549.7656,238.1362,553.7656,248.1362,557.7656,244.1362,553.7656" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="242.1362" x2="398.731" y1="553.7656" y2="553.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="48.9785" x="254.1362" y="548.6997">queued</text></g><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="137.5107" x="415.6138" y="585.9761">50ms later (100ms total)</text><g class="message" data-participant-1="Batch" data-participant-2="Batch"><line style="stroke:#181818;stroke-width:1;" x1="645.1987" x2="692.1987" y1="618.7031" y2="618.7031"/><line style="stroke:#181818;stroke-width:1;" x1="692.1987" x2="692.1987" y1="618.7031" y2="631.7031"/><line style="stroke:#181818;stroke-width:1;" x1="651.1987" x2="692.1987" y1="631.7031" y2="631.7031"/><polygon fill="#181818" points="661.1987,627.7031,651.1987,631.7031,661.1987,635.7031,657.1987,631.7031" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100.5088" x="657.1987" y="613.6372">timer_expired()</text></g><g class="message" data-participant-1="Batch" data-participant-2="Batch"><line style="stroke:#181818;stroke-width:1;" x1="650.1987" x2="692.1987" y1="665.8359" y2="665.8359"/><line style="stroke:#181818;stroke-width:1;" x1="692.1987" x2="692.1987" y1="665.8359" y2="678.8359"/><line style="stroke:#181818;stroke-width:1;" x1="651.1987" x2="692.1987" y1="678.8359" y2="678.8359"/><polygon fill="#181818" points="661.1987,674.8359,651.1987,678.8359,661.1987,682.8359,657.1987,678.8359" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125.1821" x="657.1987" y="660.77">preprocess_batch()</text></g><path d="M804.1821,653.2031 L804.1821,678.2031 L995.1821,678.2031 L995.1821,663.2031 L985.1821,653.2031 L804.1821,653.2031" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M985.1821,653.2031 L985.1821,663.2031 L995.1821,663.2031 L985.1821,653.2031" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170.5298" x="810.1821" y="670.27">Pad inputs, create tensors</text><g class="message" data-participant-1="Batch" data-participant-2="Worker"><polygon fill="#181818" points="904.311,703.9688,914.311,707.9688,904.311,711.9688,908.311,707.9688" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="650.1987" x2="910.311" y1="707.9688" y2="707.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="221.7871" x="657.1987" y="702.9028">execute_batch([req1, req2, req3])</text></g><g class="message" data-participant-1="Worker" data-participant-2="Worker"><line style="stroke:#181818;stroke-width:1;" x1="926.311" x2="968.311" y1="737.1016" y2="737.1016"/><line style="stroke:#181818;stroke-width:1;" x1="968.311" x2="968.311" y1="737.1016" y2="750.1016"/><line style="stroke:#181818;stroke-width:1;" x1="927.311" x2="968.311" y1="750.1016" y2="750.1016"/><polygon fill="#181818" points="937.311,746.1016,927.311,750.1016,937.311,754.1016,933.311,750.1016" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121.2275" x="933.311" y="732.0356">model.infer(batch)</text></g><g class="message" data-participant-1="Worker" data-participant-2="Batch"><polygon fill="#181818" points="661.1987,775.2344,651.1987,779.2344,661.1987,783.2344,657.1987,779.2344" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="655.1987" x2="920.311" y1="779.2344" y2="779.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162.6777" x="667.1987" y="774.1685">[result1, result2, result3]</text></g><g class="message" data-participant-1="Batch" data-participant-2="Inference"><polygon fill="#181818" points="415.731,804.3672,405.731,808.3672,415.731,812.3672,411.731,808.3672" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="409.731" x2="639.1987" y1="808.3672" y2="808.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122.7573" x="421.731" y="803.3013">distribute_results()</text></g><g class="message" data-participant-1="Inference" data-participant-2="R1"><polygon fill="#181818" points="58.4272,833.5,48.4272,837.5,58.4272,841.5,54.4272,837.5" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="52.4272" x2="393.731" y1="837.5" y2="837.5"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="45.335" x="64.4272" y="832.4341">result1</text></g><g class="message" data-participant-1="Inference" data-participant-2="R2"><polygon fill="#181818" points="153.2817,862.6328,143.2817,866.6328,153.2817,870.6328,149.2817,866.6328" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="147.2817" x2="393.731" y1="866.6328" y2="866.6328"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="45.335" x="159.2817" y="861.5669">result2</text></g><g class="message" data-participant-1="Inference" data-participant-2="R3"><polygon fill="#181818" points="248.1362,891.7656,238.1362,895.7656,248.1362,899.7656,244.1362,895.7656" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="242.1362" x2="398.731" y1="895.7656" y2="895.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="45.335" x="254.1362" y="890.6997">result3</text></g></g></svg></div><div class="puml dark" style=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="949px" preserveAspectRatio="xMidYMid meet" style="width:1061px;height:949px;background:#1B1B1B;" version="1.1" viewBox="0 0 1061 949" width="1061px" zoomAndPan="magnify" class="diagram"><defs/><g><rect fill="#1B1B1B" height="949" style="stroke:none;stroke-width:1;" width="1061" x="0" y="0"/><g><title>Inference Service</title><rect fill="#313139" height="129.5313" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="394.731" y="67.4297"/></g><g><title>Inference Service</title><rect fill="#313139" height="87.3984" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="394.731" y="266.8984"/></g><g><title>Inference Service</title><rect fill="#313139" height="129.5313" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="394.731" y="424.2344"/></g><g><title>Inference Service</title><rect fill="#313139" height="87.3984" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="394.731" y="808.3672"/></g><g><title>Batch Accumulator</title><rect fill="#313139" height="71.2656" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="640.1987" y="96.5625"/></g><g><title>Batch Accumulator</title><rect fill="#313139" height="29.1328" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="640.1987" y="296.0313"/></g><g><title>Batch Accumulator</title><rect fill="#313139" height="71.2656" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="640.1987" y="453.3672"/></g><g><title>Batch Accumulator</title><rect fill="#313139" height="264.0625" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="640.1987" y="631.7031"/></g><g><title>Worker</title><rect fill="#313139" height="71.2656" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="916.311" y="707.9688"/></g><g><title>Request 1</title><rect fill="#000000" fill-opacity="0.00000" height="168.6641" width="8" x="43.4272" y="36.2969"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="47" x2="47" y1="36.2969" y2="204.9609"/></g><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="47" x2="47" y1="204.9609" y2="245.7656"/><g><title>Request 1</title><rect fill="#000000" fill-opacity="0.00000" height="116.5313" width="8" x="43.4272" y="245.7656"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="47" x2="47" y1="245.7656" y2="362.2969"/></g><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="47" x2="47" y1="362.2969" y2="403.1016"/><g><title>Request 1</title><rect fill="#000000" fill-opacity="0.00000" height="158.6641" width="8" x="43.4272" y="403.1016"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="47" x2="47" y1="403.1016" y2="561.7656"/></g><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="47" x2="47" y1="561.7656" y2="602.5703"/><g><title>Request 1</title><rect fill="#000000" fill-opacity="0.00000" height="311.1953" width="8" x="43.4272" y="602.5703"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="47" x2="47" y1="602.5703" y2="913.7656"/></g><g><title>Request 2</title><rect fill="#000000" fill-opacity="0.00000" height="168.6641" width="8" x="138.2817" y="36.2969"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="141.8545" x2="141.8545" y1="36.2969" y2="204.9609"/></g><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="141.8545" x2="141.8545" y1="204.9609" y2="245.7656"/><g><title>Request 2</title><rect fill="#000000" fill-opacity="0.00000" height="116.5313" width="8" x="138.2817" y="245.7656"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="141.8545" x2="141.8545" y1="245.7656" y2="362.2969"/></g><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="141.8545" x2="141.8545" y1="362.2969" y2="403.1016"/><g><title>Request 2</title><rect fill="#000000" fill-opacity="0.00000" height="158.6641" width="8" x="138.2817" y="403.1016"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="141.8545" x2="141.8545" y1="403.1016" y2="561.7656"/></g><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="141.8545" x2="141.8545" y1="561.7656" y2="602.5703"/><g><title>Request 2</title><rect fill="#000000" fill-opacity="0.00000" height="311.1953" width="8" x="138.2817" y="602.5703"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="141.8545" x2="141.8545" y1="602.5703" y2="913.7656"/></g><g><title>Request 3</title><rect fill="#000000" fill-opacity="0.00000" height="168.6641" width="8" x="233.1362" y="36.2969"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="236.709" x2="236.709" y1="36.2969" y2="204.9609"/></g><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="236.709" x2="236.709" y1="204.9609" y2="245.7656"/><g><title>Request 3</title><rect fill="#000000" fill-opacity="0.00000" height="116.5313" width="8" x="233.1362" y="245.7656"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="236.709" x2="236.709" y1="245.7656" y2="362.2969"/></g><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="236.709" x2="236.709" y1="362.2969" y2="403.1016"/><g><title>Request 3</title><rect fill="#000000" fill-opacity="0.00000" height="158.6641" width="8" x="233.1362" y="403.1016"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="236.709" x2="236.709" y1="403.1016" y2="561.7656"/></g><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="236.709" x2="236.709" y1="561.7656" y2="602.5703"/><g><title>Request 3</title><rect fill="#000000" fill-opacity="0.00000" height="311.1953" width="8" x="233.1362" y="602.5703"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="236.709" x2="236.709" y1="602.5703" y2="913.7656"/></g><g><title>Inference Service</title><rect fill="#000000" fill-opacity="0.00000" height="168.6641" width="8" x="395.731" y="36.2969"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="399.5869" x2="399.5869" y1="36.2969" y2="204.9609"/></g><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="399.5869" x2="399.5869" y1="204.9609" y2="245.7656"/><g><title>Inference Service</title><rect fill="#000000" fill-opacity="0.00000" height="116.5313" width="8" x="395.731" y="245.7656"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="399.5869" x2="399.5869" y1="245.7656" y2="362.2969"/></g><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="399.5869" x2="399.5869" y1="362.2969" y2="403.1016"/><g><title>Inference Service</title><rect fill="#000000" fill-opacity="0.00000" height="158.6641" width="8" x="395.731" y="403.1016"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="399.5869" x2="399.5869" y1="403.1016" y2="561.7656"/></g><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="399.5869" x2="399.5869" y1="561.7656" y2="602.5703"/><g><title>Inference Service</title><rect fill="#000000" fill-opacity="0.00000" height="311.1953" width="8" x="395.731" y="602.5703"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="399.5869" x2="399.5869" y1="602.5703" y2="913.7656"/></g><g><title>Batch Accumulator</title><rect fill="#000000" fill-opacity="0.00000" height="168.6641" width="8" x="641.1987" y="36.2969"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="644.5347" x2="644.5347" y1="36.2969" y2="204.9609"/></g><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="644.5347" x2="644.5347" y1="204.9609" y2="245.7656"/><g><title>Batch Accumulator</title><rect fill="#000000" fill-opacity="0.00000" height="116.5313" width="8" x="641.1987" y="245.7656"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="644.5347" x2="644.5347" y1="245.7656" y2="362.2969"/></g><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="644.5347" x2="644.5347" y1="362.2969" y2="403.1016"/><g><title>Batch Accumulator</title><rect fill="#000000" fill-opacity="0.00000" height="158.6641" width="8" x="641.1987" y="403.1016"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="644.5347" x2="644.5347" y1="403.1016" y2="561.7656"/></g><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="644.5347" x2="644.5347" y1="561.7656" y2="602.5703"/><g><title>Batch Accumulator</title><rect fill="#000000" fill-opacity="0.00000" height="311.1953" width="8" x="641.1987" y="602.5703"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="644.5347" x2="644.5347" y1="602.5703" y2="913.7656"/></g><g><title>Worker</title><rect fill="#000000" fill-opacity="0.00000" height="168.6641" width="8" x="917.311" y="36.2969"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="920.9907" x2="920.9907" y1="36.2969" y2="204.9609"/></g><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="920.9907" x2="920.9907" y1="204.9609" y2="245.7656"/><g><title>Worker</title><rect fill="#000000" fill-opacity="0.00000" height="116.5313" width="8" x="917.311" y="245.7656"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="920.9907" x2="920.9907" y1="245.7656" y2="362.2969"/></g><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="920.9907" x2="920.9907" y1="362.2969" y2="403.1016"/><g><title>Worker</title><rect fill="#000000" fill-opacity="0.00000" height="158.6641" width="8" x="917.311" y="403.1016"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="920.9907" x2="920.9907" y1="403.1016" y2="561.7656"/></g><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="920.9907" x2="920.9907" y1="561.7656" y2="602.5703"/><g><title>Worker</title><rect fill="#000000" fill-opacity="0.00000" height="311.1953" width="8" x="917.311" y="602.5703"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="920.9907" x2="920.9907" y1="602.5703" y2="913.7656"/></g><g class="participant participant-head" data-participant="R1"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="84.8545" x="5" y="5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70.8545" x="12" y="24.9951">Request 1</text></g><g class="participant participant-tail" data-participant="R1"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="84.8545" x="5" y="912.7656"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70.8545" x="12" y="932.7607">Request 1</text></g><g class="participant participant-head" data-participant="R2"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="84.8545" x="99.8545" y="5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70.8545" x="106.8545" y="24.9951">Request 2</text></g><g class="participant participant-tail" data-participant="R2"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="84.8545" x="99.8545" y="912.7656"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70.8545" x="106.8545" y="932.7607">Request 2</text></g><g class="participant participant-head" data-participant="R3"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="84.8545" x="194.709" y="5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70.8545" x="201.709" y="24.9951">Request 3</text></g><g class="participant participant-tail" data-participant="R3"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="84.8545" x="194.709" y="912.7656"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70.8545" x="201.709" y="932.7607">Request 3</text></g><g class="participant participant-head" data-participant="Inference"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="136.2881" x="331.5869" y="5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122.2881" x="338.5869" y="24.9951">Inference Service</text></g><g class="participant participant-tail" data-participant="Inference"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="136.2881" x="331.5869" y="912.7656"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122.2881" x="338.5869" y="932.7607">Inference Service</text></g><g class="participant participant-head" data-participant="Batch"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="147.3281" x="571.5347" y="5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133.3281" x="578.5347" y="24.9951">Batch Accumulator</text></g><g class="participant participant-tail" data-participant="Batch"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="147.3281" x="571.5347" y="912.7656"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133.3281" x="578.5347" y="932.7607">Batch Accumulator</text></g><g class="participant participant-head" data-participant="Worker"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="64.6406" x="888.9907" y="5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50.6406" x="895.9907" y="24.9951">Worker</text></g><g class="participant participant-tail" data-participant="Worker"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="64.6406" x="888.9907" y="912.7656"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50.6406" x="895.9907" y="932.7607">Worker</text></g><g><title>Inference Service</title><rect fill="#313139" height="129.5313" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="394.731" y="67.4297"/></g><g><title>Inference Service</title><rect fill="#313139" height="87.3984" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="394.731" y="266.8984"/></g><g><title>Inference Service</title><rect fill="#313139" height="129.5313" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="394.731" y="424.2344"/></g><g><title>Inference Service</title><rect fill="#313139" height="87.3984" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="394.731" y="808.3672"/></g><g><title>Batch Accumulator</title><rect fill="#313139" height="71.2656" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="640.1987" y="96.5625"/></g><g><title>Batch Accumulator</title><rect fill="#313139" height="29.1328" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="640.1987" y="296.0313"/></g><g><title>Batch Accumulator</title><rect fill="#313139" height="71.2656" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="640.1987" y="453.3672"/></g><g><title>Batch Accumulator</title><rect fill="#313139" height="264.0625" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="640.1987" y="631.7031"/></g><g><title>Worker</title><rect fill="#313139" height="71.2656" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="916.311" y="707.9688"/></g><g class="message" data-participant-1="R1" data-participant-2="Inference"><polygon fill="#E7E7E7" points="382.731,63.4297,392.731,67.4297,382.731,71.4297,386.731,67.4297" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="47.4272" x2="388.731" y1="67.4297" y2="67.4297"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138.5947" x="54.4272" y="62.3638">infer(model-x, data1)</text></g><g class="message" data-participant-1="Inference" data-participant-2="Batch"><polygon fill="#E7E7E7" points="628.1987,92.5625,638.1987,96.5625,628.1987,100.5625,632.1987,96.5625" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="404.731" x2="634.1987" y1="96.5625" y2="96.5625"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="216.4678" x="411.731" y="91.4966">add_to_batch(model-x, request1)</text></g><g class="message" data-participant-1="Batch" data-participant-2="Batch"><line style="stroke:#E7E7E7;stroke-width:1;" x1="650.1987" x2="692.1987" y1="125.6953" y2="125.6953"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="692.1987" x2="692.1987" y1="125.6953" y2="138.6953"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="651.1987" x2="692.1987" y1="138.6953" y2="138.6953"/><polygon fill="#E7E7E7" points="661.1987,134.6953,651.1987,138.6953,661.1987,142.6953,657.1987,138.6953" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="242.1123" x="657.1987" y="120.6294">start_batch_timer(max_wait=100ms)</text></g><g class="message" data-participant-1="Batch" data-participant-2="Inference"><polygon fill="#E7E7E7" points="415.731,163.8281,405.731,167.8281,415.731,171.8281,411.731,167.8281" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="409.731" x2="644.1987" y1="167.8281" y2="167.8281"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40.7202" x="421.731" y="162.7622">added</text></g><g class="message" data-participant-1="Inference" data-participant-2="R1"><polygon fill="#E7E7E7" points="58.4272,192.9609,48.4272,196.9609,58.4272,200.9609,54.4272,196.9609" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="52.4272" x2="398.731" y1="196.9609" y2="196.9609"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="48.9785" x="64.4272" y="191.895">queued</text></g><text fill="#FFFFFF" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="59.3398" x="454.6992" y="229.1714">20ms later</text><g class="message" data-participant-1="R2" data-participant-2="Inference"><polygon fill="#E7E7E7" points="382.731,262.8984,392.731,266.8984,382.731,270.8984,386.731,266.8984" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="142.2817" x2="388.731" y1="266.8984" y2="266.8984"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138.5947" x="149.2817" y="261.8325">infer(model-x, data2)</text></g><g class="message" data-participant-1="Inference" data-participant-2="Batch"><polygon fill="#E7E7E7" points="628.1987,292.0313,638.1987,296.0313,628.1987,300.0313,632.1987,296.0313" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="404.731" x2="634.1987" y1="296.0313" y2="296.0313"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="216.4678" x="411.731" y="290.9653">add_to_batch(model-x, request2)</text></g><g class="message" data-participant-1="Batch" data-participant-2="Inference"><polygon fill="#E7E7E7" points="415.731,321.1641,405.731,325.1641,415.731,329.1641,411.731,325.1641" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="409.731" x2="644.1987" y1="325.1641" y2="325.1641"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40.7202" x="421.731" y="320.0981">added</text></g><g class="message" data-participant-1="Inference" data-participant-2="R2"><polygon fill="#E7E7E7" points="153.2817,350.2969,143.2817,354.2969,153.2817,358.2969,149.2817,354.2969" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="147.2817" x2="398.731" y1="354.2969" y2="354.2969"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="48.9785" x="159.2817" y="349.231">queued</text></g><text fill="#FFFFFF" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="59.3398" x="454.6992" y="386.5073">30ms later</text><g class="message" data-participant-1="R3" data-participant-2="Inference"><polygon fill="#E7E7E7" points="382.731,420.2344,392.731,424.2344,382.731,428.2344,386.731,424.2344" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="237.1362" x2="388.731" y1="424.2344" y2="424.2344"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138.5947" x="244.1362" y="419.1685">infer(model-x, data3)</text></g><g class="message" data-participant-1="Inference" data-participant-2="Batch"><polygon fill="#E7E7E7" points="628.1987,449.3672,638.1987,453.3672,628.1987,457.3672,632.1987,453.3672" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="404.731" x2="634.1987" y1="453.3672" y2="453.3672"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="216.4678" x="411.731" y="448.3013">add_to_batch(model-x, request3)</text></g><g class="message" data-participant-1="Batch" data-participant-2="Batch"><line style="stroke:#E7E7E7;stroke-width:1;" x1="650.1987" x2="692.1987" y1="482.5" y2="482.5"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="692.1987" x2="692.1987" y1="482.5" y2="495.5"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="651.1987" x2="692.1987" y1="495.5" y2="495.5"/><polygon fill="#E7E7E7" points="661.1987,491.5,651.1987,495.5,661.1987,499.5,657.1987,495.5" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123.1128" x="657.1987" y="477.4341">check_batch_size()</text></g><path d="M802.1128,469.8672 L802.1128,494.8672 L981.1128,494.8672 L981.1128,479.8672 L971.1128,469.8672 L802.1128,469.8672" fill="#714137" style="stroke:#E7E7E7;stroke-width:0.5;"/><path d="M971.1128,469.8672 L971.1128,479.8672 L981.1128,479.8672 L971.1128,469.8672" fill="#714137" style="stroke:#E7E7E7;stroke-width:0.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="158.1519" x="808.1128" y="486.9341">Batch size = 3, max = 8</text><g class="message" data-participant-1="Batch" data-participant-2="Inference"><polygon fill="#E7E7E7" points="415.731,520.6328,405.731,524.6328,415.731,528.6328,411.731,524.6328" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="409.731" x2="644.1987" y1="524.6328" y2="524.6328"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40.7202" x="421.731" y="519.5669">added</text></g><g class="message" data-participant-1="Inference" data-participant-2="R3"><polygon fill="#E7E7E7" points="248.1362,549.7656,238.1362,553.7656,248.1362,557.7656,244.1362,553.7656" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="242.1362" x2="398.731" y1="553.7656" y2="553.7656"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="48.9785" x="254.1362" y="548.6997">queued</text></g><text fill="#FFFFFF" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="137.5107" x="415.6138" y="585.9761">50ms later (100ms total)</text><g class="message" data-participant-1="Batch" data-participant-2="Batch"><line style="stroke:#E7E7E7;stroke-width:1;" x1="645.1987" x2="692.1987" y1="618.7031" y2="618.7031"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="692.1987" x2="692.1987" y1="618.7031" y2="631.7031"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="651.1987" x2="692.1987" y1="631.7031" y2="631.7031"/><polygon fill="#E7E7E7" points="661.1987,627.7031,651.1987,631.7031,661.1987,635.7031,657.1987,631.7031" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100.5088" x="657.1987" y="613.6372">timer_expired()</text></g><g class="message" data-participant-1="Batch" data-participant-2="Batch"><line style="stroke:#E7E7E7;stroke-width:1;" x1="650.1987" x2="692.1987" y1="665.8359" y2="665.8359"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="692.1987" x2="692.1987" y1="665.8359" y2="678.8359"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="651.1987" x2="692.1987" y1="678.8359" y2="678.8359"/><polygon fill="#E7E7E7" points="661.1987,674.8359,651.1987,678.8359,661.1987,682.8359,657.1987,678.8359" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125.1821" x="657.1987" y="660.77">preprocess_batch()</text></g><path d="M804.1821,653.2031 L804.1821,678.2031 L995.1821,678.2031 L995.1821,663.2031 L985.1821,653.2031 L804.1821,653.2031" fill="#714137" style="stroke:#E7E7E7;stroke-width:0.5;"/><path d="M985.1821,653.2031 L985.1821,663.2031 L995.1821,663.2031 L985.1821,653.2031" fill="#714137" style="stroke:#E7E7E7;stroke-width:0.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170.5298" x="810.1821" y="670.27">Pad inputs, create tensors</text><g class="message" data-participant-1="Batch" data-participant-2="Worker"><polygon fill="#E7E7E7" points="904.311,703.9688,914.311,707.9688,904.311,711.9688,908.311,707.9688" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="650.1987" x2="910.311" y1="707.9688" y2="707.9688"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="221.7871" x="657.1987" y="702.9028">execute_batch([req1, req2, req3])</text></g><g class="message" data-participant-1="Worker" data-participant-2="Worker"><line style="stroke:#E7E7E7;stroke-width:1;" x1="926.311" x2="968.311" y1="737.1016" y2="737.1016"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="968.311" x2="968.311" y1="737.1016" y2="750.1016"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="927.311" x2="968.311" y1="750.1016" y2="750.1016"/><polygon fill="#E7E7E7" points="937.311,746.1016,927.311,750.1016,937.311,754.1016,933.311,750.1016" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121.2275" x="933.311" y="732.0356">model.infer(batch)</text></g><g class="message" data-participant-1="Worker" data-participant-2="Batch"><polygon fill="#E7E7E7" points="661.1987,775.2344,651.1987,779.2344,661.1987,783.2344,657.1987,779.2344" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="655.1987" x2="920.311" y1="779.2344" y2="779.2344"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162.6777" x="667.1987" y="774.1685">[result1, result2, result3]</text></g><g class="message" data-participant-1="Batch" data-participant-2="Inference"><polygon fill="#E7E7E7" points="415.731,804.3672,405.731,808.3672,415.731,812.3672,411.731,808.3672" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="409.731" x2="639.1987" y1="808.3672" y2="808.3672"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122.7573" x="421.731" y="803.3013">distribute_results()</text></g><g class="message" data-participant-1="Inference" data-participant-2="R1"><polygon fill="#E7E7E7" points="58.4272,833.5,48.4272,837.5,58.4272,841.5,54.4272,837.5" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="52.4272" x2="393.731" y1="837.5" y2="837.5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="45.335" x="64.4272" y="832.4341">result1</text></g><g class="message" data-participant-1="Inference" data-participant-2="R2"><polygon fill="#E7E7E7" points="153.2817,862.6328,143.2817,866.6328,153.2817,870.6328,149.2817,866.6328" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="147.2817" x2="393.731" y1="866.6328" y2="866.6328"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="45.335" x="159.2817" y="861.5669">result2</text></g><g class="message" data-participant-1="Inference" data-participant-2="R3"><polygon fill="#E7E7E7" points="248.1362,891.7656,238.1362,895.7656,248.1362,899.7656,244.1362,895.7656" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="242.1362" x2="398.731" y1="895.7656" y2="895.7656"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="45.335" x="254.1362" y="890.6997">result3</text></g></g></svg></div></div>

<h3 id="55-lru-eviction-flow">5.5 LRU Eviction Flow<a class="headerlink" href="#55-lru-eviction-flow" title="Permanent link">&para;</a></h3>
<div class='puml-container'><div class="puml light" style=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="669px" preserveAspectRatio="xMidYMid meet" style="width:1100px;height:669px;background:#FFFFFF;" version="1.1" viewBox="0 0 1100 669" width="1100px" zoomAndPan="magnify" class="diagram"><defs/><g><g><title>Memory Monitor</title><rect fill="#F1F1F1" height="534.125" style="stroke:#181818;stroke-width:1;" width="10" x="64.3022" y="75.4297"/></g><g><title>Lifecycle Service</title><rect fill="#F1F1F1" height="464.8594" style="stroke:#181818;stroke-width:1;" width="10" x="295.6084" y="109.5625"/></g><g><title>LRU Policy</title><rect fill="#F1F1F1" height="79.3984" style="stroke:#181818;stroke-width:1;" width="10" x="519.4858" y="138.6953"/></g><g><title>Process Manager</title><rect fill="#F1F1F1" height="171.6641" style="stroke:#181818;stroke-width:1;" width="10" x="720.3149" y="289.3594"/></g><g><title>Worker Process</title><rect fill="#F1F1F1" height="113.3984" style="stroke:#181818;stroke-width:1;" width="10" x="905.6006" y="318.4922"/></g><g><title>Memory Monitor</title><rect fill="#000000" fill-opacity="0.00000" height="598.2578" width="8" x="65.3022" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="69" x2="69" y1="36.2969" y2="634.5547"/></g><g><title>Lifecycle Service</title><rect fill="#000000" fill-opacity="0.00000" height="598.2578" width="8" x="296.6084" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="299.8057" x2="299.8057" y1="36.2969" y2="634.5547"/></g><g><title>LRU Policy</title><rect fill="#000000" fill-opacity="0.00000" height="598.2578" width="8" x="520.4858" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="523.9888" x2="523.9888" y1="36.2969" y2="634.5547"/></g><g><title>Process Manager</title><rect fill="#000000" fill-opacity="0.00000" height="598.2578" width="8" x="721.3149" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="724.5757" x2="724.5757" y1="36.2969" y2="634.5547"/></g><g><title>Worker Process</title><rect fill="#000000" fill-opacity="0.00000" height="598.2578" width="8" x="906.6006" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="910.2241" x2="910.2241" y1="36.2969" y2="634.5547"/></g><g class="participant participant-head" data-participant="Monitor"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="128.6045" x="5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114.6045" x="12" y="24.9951">Memory Monitor</text></g><g class="participant participant-tail" data-participant="Monitor"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="128.6045" x="5" y="633.5547"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114.6045" x="12" y="653.5498">Memory Monitor</text></g><g class="participant participant-head" data-participant="Lifecycle"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="131.6055" x="234.8057" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117.6055" x="241.8057" y="24.9951">Lifecycle Service</text></g><g class="participant participant-tail" data-participant="Lifecycle"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="131.6055" x="234.8057" y="633.5547"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117.6055" x="241.8057" y="653.5498">Lifecycle Service</text></g><g class="participant participant-head" data-participant="Policy"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="86.9941" x="480.9888" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72.9941" x="487.9888" y="24.9951">LRU Policy</text></g><g class="participant participant-tail" data-participant="Policy"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="86.9941" x="480.9888" y="633.5547"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72.9941" x="487.9888" y="653.5498">LRU Policy</text></g><g class="participant participant-head" data-participant="ProcMgr"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="133.4785" x="658.5757" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119.4785" x="665.5757" y="24.9951">Process Manager</text></g><g class="participant participant-tail" data-participant="ProcMgr"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="133.4785" x="658.5757" y="633.5547"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119.4785" x="665.5757" y="653.5498">Process Manager</text></g><g class="participant participant-head" data-participant="Worker"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="122.7529" x="849.2241" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108.7529" x="856.2241" y="24.9951">Worker Process</text></g><g class="participant participant-tail" data-participant="Worker"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="122.7529" x="849.2241" y="633.5547"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108.7529" x="856.2241" y="653.5498">Worker Process</text></g><g><title>Memory Monitor</title><rect fill="#F1F1F1" height="534.125" style="stroke:#181818;stroke-width:1;" width="10" x="64.3022" y="75.4297"/></g><g><title>Lifecycle Service</title><rect fill="#F1F1F1" height="464.8594" style="stroke:#181818;stroke-width:1;" width="10" x="295.6084" y="109.5625"/></g><g><title>LRU Policy</title><rect fill="#F1F1F1" height="79.3984" style="stroke:#181818;stroke-width:1;" width="10" x="519.4858" y="138.6953"/></g><g><title>Process Manager</title><rect fill="#F1F1F1" height="171.6641" style="stroke:#181818;stroke-width:1;" width="10" x="720.3149" y="289.3594"/></g><g><title>Worker Process</title><rect fill="#F1F1F1" height="113.3984" style="stroke:#181818;stroke-width:1;" width="10" x="905.6006" y="318.4922"/></g><g class="message" data-participant-1="Monitor" data-participant-2="Monitor"><line style="stroke:#181818;stroke-width:1;" x1="69.3022" x2="116.3022" y1="62.4297" y2="62.4297"/><line style="stroke:#181818;stroke-width:1;" x1="116.3022" x2="116.3022" y1="62.4297" y2="75.4297"/><line style="stroke:#181818;stroke-width:1;" x1="75.3022" x2="116.3022" y1="75.4297" y2="75.4297"/><polygon fill="#181818" points="85.3022,71.4297,75.3022,75.4297,85.3022,79.4297,81.3022,75.4297" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154.7495" x="81.3022" y="57.3638">check_memory_usage()</text></g><path d="M247.7495,54.7969 L247.7495,79.7969 L451.7495,79.7969 L451.7495,64.7969 L441.7495,54.7969 L247.7495,54.7969" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M441.7495,54.7969 L441.7495,64.7969 L451.7495,64.7969 L441.7495,54.7969" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="183.0283" x="253.7495" y="71.8638">Memory usage: 95% of limit</text><g class="message" data-participant-1="Monitor" data-participant-2="Lifecycle"><polygon fill="#181818" points="283.6084,105.5625,293.6084,109.5625,283.6084,113.5625,287.6084,109.5625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="74.3022" x2="289.6084" y1="109.5625" y2="109.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="202.3062" x="81.3022" y="104.4966">memory_threshold_exceeded()</text></g><g class="message" data-participant-1="Lifecycle" data-participant-2="Policy"><polygon fill="#181818" points="507.4858,134.6953,517.4858,138.6953,507.4858,142.6953,511.4858,138.6953" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="305.6084" x2="513.4858" y1="138.6953" y2="138.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153.3467" x="312.6084" y="133.6294">select_model_to_evict()</text></g><g class="message" data-participant-1="Policy" data-participant-2="Policy"><line style="stroke:#181818;stroke-width:1;" x1="529.4858" x2="571.4858" y1="171.8945" y2="171.8945"/><line style="stroke:#181818;stroke-width:1;" x1="571.4858" x2="571.4858" y1="171.8945" y2="184.8945"/><line style="stroke:#181818;stroke-width:1;" x1="530.4858" x2="571.4858" y1="184.8945" y2="184.8945"/><polygon fill="#181818" points="540.4858,180.8945,530.4858,184.8945,540.4858,188.8945,536.4858,184.8945" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166.8291" x="536.4858" y="166.8286">get_least_recently_used()</text></g><path d="M724.8291,151.6953 L724.8291,191.6953 L1069.8291,191.6953 L1069.8291,161.6953 L1059.8291,151.6953 L724.8291,151.6953" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1059.8291,151.6953 L1059.8291,161.6953 L1069.8291,161.6953 L1059.8291,151.6953" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="324.9556" x="730.8291" y="168.7622">Models: [A: 2min ago, B: 5min ago, C: 10min ago]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100.8579" x="730.8291" y="183.895">Select: Model C</text><g class="message" data-participant-1="Policy" data-participant-2="Lifecycle"><polygon fill="#181818" points="316.6084,214.0938,306.6084,218.0938,316.6084,222.0938,312.6084,218.0938" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="310.6084" x2="523.4858" y1="218.0938" y2="218.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99.0361" x="322.6084" y="213.0278">model_id = &quot;C&quot;</text></g><g class="message" data-participant-1="Lifecycle" data-participant-2="Lifecycle"><line style="stroke:#181818;stroke-width:1;" x1="305.6084" x2="347.6084" y1="247.2266" y2="247.2266"/><line style="stroke:#181818;stroke-width:1;" x1="347.6084" x2="347.6084" y1="247.2266" y2="260.2266"/><line style="stroke:#181818;stroke-width:1;" x1="306.6084" x2="347.6084" y1="260.2266" y2="260.2266"/><polygon fill="#181818" points="316.6084,256.2266,306.6084,260.2266,316.6084,264.2266,312.6084,260.2266" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="189.8774" x="312.6084" y="242.1606">mark_as_unloading(model_c)</text></g><g class="message" data-participant-1="Lifecycle" data-participant-2="ProcMgr"><polygon fill="#181818" points="708.3149,285.3594,718.3149,289.3594,708.3149,293.3594,712.3149,289.3594" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="305.6084" x2="714.3149" y1="289.3594" y2="289.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="179.5879" x="312.6084" y="284.2935">terminate_worker(model_c)</text></g><g class="message" data-participant-1="ProcMgr" data-participant-2="Worker"><polygon fill="#181818" points="893.6006,314.4922,903.6006,318.4922,893.6006,322.4922,897.6006,318.4922" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="730.3149" x2="899.6006" y1="318.4922" y2="318.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156.2856" x="737.3149" y="313.4263">send_shutdown_signal()</text></g><g class="message" data-participant-1="Worker" data-participant-2="Worker"><line style="stroke:#181818;stroke-width:1;" x1="915.6006" x2="957.6006" y1="347.625" y2="347.625"/><line style="stroke:#181818;stroke-width:1;" x1="957.6006" x2="957.6006" y1="347.625" y2="360.625"/><line style="stroke:#181818;stroke-width:1;" x1="916.6006" x2="957.6006" y1="360.625" y2="360.625"/><polygon fill="#181818" points="926.6006,356.625,916.6006,360.625,926.6006,364.625,922.6006,360.625" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131.6694" x="922.6006" y="342.5591">cleanup_resources()</text></g><g class="message" data-participant-1="Worker" data-participant-2="Worker"><line style="stroke:#181818;stroke-width:1;" x1="915.6006" x2="957.6006" y1="389.7578" y2="389.7578"/><line style="stroke:#181818;stroke-width:1;" x1="957.6006" x2="957.6006" y1="389.7578" y2="402.7578"/><line style="stroke:#181818;stroke-width:1;" x1="916.6006" x2="957.6006" y1="402.7578" y2="402.7578"/><polygon fill="#181818" points="926.6006,398.7578,916.6006,402.7578,926.6006,406.7578,922.6006,402.7578" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170.498" x="922.6006" y="384.6919">torch.cuda.empty_cache()</text></g><g class="message" data-participant-1="Worker" data-participant-2="ProcMgr"><polygon fill="#181818" points="741.3149,427.8906,731.3149,431.8906,741.3149,435.8906,737.3149,431.8906" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="735.3149" x2="909.6006" y1="431.8906" y2="431.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130.6475" x="747.3149" y="426.8247">shutdown_complete</text></g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="901.6006" x2="919.6006" y1="422.8906" y2="440.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="901.6006" x2="919.6006" y1="440.8906" y2="422.8906"/><g class="message" data-participant-1="ProcMgr" data-participant-2="Lifecycle"><polygon fill="#181818" points="316.6084,457.0234,306.6084,461.0234,316.6084,465.0234,312.6084,461.0234" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="310.6084" x2="724.3149" y1="461.0234" y2="461.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123.5698" x="322.6084" y="455.9575">worker_terminated</text></g><g class="message" data-participant-1="Lifecycle" data-participant-2="Lifecycle"><line style="stroke:#181818;stroke-width:1;" x1="305.6084" x2="347.6084" y1="490.1563" y2="490.1563"/><line style="stroke:#181818;stroke-width:1;" x1="347.6084" x2="347.6084" y1="490.1563" y2="503.1563"/><line style="stroke:#181818;stroke-width:1;" x1="306.6084" x2="347.6084" y1="503.1563" y2="503.1563"/><polygon fill="#181818" points="316.6084,499.1563,306.6084,503.1563,316.6084,507.1563,312.6084,503.1563" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="186.0244" x="312.6084" y="485.0903">mark_as_unloaded(model_c)</text></g><g class="message" data-participant-1="Lifecycle" data-participant-2="Lifecycle"><line style="stroke:#181818;stroke-width:1;" x1="305.6084" x2="347.6084" y1="532.2891" y2="532.2891"/><line style="stroke:#181818;stroke-width:1;" x1="347.6084" x2="347.6084" y1="532.2891" y2="545.2891"/><line style="stroke:#181818;stroke-width:1;" x1="306.6084" x2="347.6084" y1="545.2891" y2="545.2891"/><polygon fill="#181818" points="316.6084,541.2891,306.6084,545.2891,316.6084,549.2891,312.6084,545.2891" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="187.6938" x="312.6084" y="527.2231">publish_event(ModelEvicted)</text></g><g class="message" data-participant-1="Lifecycle" data-participant-2="Monitor"><polygon fill="#181818" points="85.3022,570.4219,75.3022,574.4219,85.3022,578.4219,81.3022,574.4219" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="79.3022" x2="299.6084" y1="574.4219" y2="574.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118.5742" x="91.3022" y="569.356">eviction_complete</text></g><g class="message" data-participant-1="Monitor" data-participant-2="Monitor"><line style="stroke:#181818;stroke-width:1;" x1="74.3022" x2="116.3022" y1="608.5547" y2="608.5547"/><line style="stroke:#181818;stroke-width:1;" x1="116.3022" x2="116.3022" y1="608.5547" y2="621.5547"/><line style="stroke:#181818;stroke-width:1;" x1="69.3022" x2="116.3022" y1="621.5547" y2="621.5547"/><polygon fill="#181818" points="79.3022,617.5547,69.3022,621.5547,79.3022,625.5547,75.3022,621.5547" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154.7495" x="81.3022" y="603.4888">check_memory_usage()</text></g><path d="M257.7495,590.9219 L257.7495,615.9219 L461.7495,615.9219 L461.7495,600.9219 L451.7495,590.9219 L257.7495,590.9219" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M451.7495,590.9219 L451.7495,600.9219 L461.7495,600.9219 L451.7495,590.9219" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="183.0283" x="263.7495" y="607.9888">Memory usage: 68% of limit</text></g></svg></div><div class="puml dark" style=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="669px" preserveAspectRatio="xMidYMid meet" style="width:1100px;height:669px;background:#1B1B1B;" version="1.1" viewBox="0 0 1100 669" width="1100px" zoomAndPan="magnify" class="diagram"><defs/><g><rect fill="#1B1B1B" height="669" style="stroke:none;stroke-width:1;" width="1100" x="0" y="0"/><g><title>Memory Monitor</title><rect fill="#313139" height="534.125" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="64.3022" y="75.4297"/></g><g><title>Lifecycle Service</title><rect fill="#313139" height="464.8594" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="295.6084" y="109.5625"/></g><g><title>LRU Policy</title><rect fill="#313139" height="79.3984" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="519.4858" y="138.6953"/></g><g><title>Process Manager</title><rect fill="#313139" height="171.6641" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="720.3149" y="289.3594"/></g><g><title>Worker Process</title><rect fill="#313139" height="113.3984" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="905.6006" y="318.4922"/></g><g><title>Memory Monitor</title><rect fill="#000000" fill-opacity="0.00000" height="598.2578" width="8" x="65.3022" y="36.2969"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="69" x2="69" y1="36.2969" y2="634.5547"/></g><g><title>Lifecycle Service</title><rect fill="#000000" fill-opacity="0.00000" height="598.2578" width="8" x="296.6084" y="36.2969"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="299.8057" x2="299.8057" y1="36.2969" y2="634.5547"/></g><g><title>LRU Policy</title><rect fill="#000000" fill-opacity="0.00000" height="598.2578" width="8" x="520.4858" y="36.2969"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="523.9888" x2="523.9888" y1="36.2969" y2="634.5547"/></g><g><title>Process Manager</title><rect fill="#000000" fill-opacity="0.00000" height="598.2578" width="8" x="721.3149" y="36.2969"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="724.5757" x2="724.5757" y1="36.2969" y2="634.5547"/></g><g><title>Worker Process</title><rect fill="#000000" fill-opacity="0.00000" height="598.2578" width="8" x="906.6006" y="36.2969"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="910.2241" x2="910.2241" y1="36.2969" y2="634.5547"/></g><g class="participant participant-head" data-participant="Monitor"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="128.6045" x="5" y="5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114.6045" x="12" y="24.9951">Memory Monitor</text></g><g class="participant participant-tail" data-participant="Monitor"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="128.6045" x="5" y="633.5547"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114.6045" x="12" y="653.5498">Memory Monitor</text></g><g class="participant participant-head" data-participant="Lifecycle"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="131.6055" x="234.8057" y="5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117.6055" x="241.8057" y="24.9951">Lifecycle Service</text></g><g class="participant participant-tail" data-participant="Lifecycle"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="131.6055" x="234.8057" y="633.5547"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117.6055" x="241.8057" y="653.5498">Lifecycle Service</text></g><g class="participant participant-head" data-participant="Policy"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="86.9941" x="480.9888" y="5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72.9941" x="487.9888" y="24.9951">LRU Policy</text></g><g class="participant participant-tail" data-participant="Policy"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="86.9941" x="480.9888" y="633.5547"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72.9941" x="487.9888" y="653.5498">LRU Policy</text></g><g class="participant participant-head" data-participant="ProcMgr"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="133.4785" x="658.5757" y="5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119.4785" x="665.5757" y="24.9951">Process Manager</text></g><g class="participant participant-tail" data-participant="ProcMgr"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="133.4785" x="658.5757" y="633.5547"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119.4785" x="665.5757" y="653.5498">Process Manager</text></g><g class="participant participant-head" data-participant="Worker"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="122.7529" x="849.2241" y="5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108.7529" x="856.2241" y="24.9951">Worker Process</text></g><g class="participant participant-tail" data-participant="Worker"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="122.7529" x="849.2241" y="633.5547"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108.7529" x="856.2241" y="653.5498">Worker Process</text></g><g><title>Memory Monitor</title><rect fill="#313139" height="534.125" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="64.3022" y="75.4297"/></g><g><title>Lifecycle Service</title><rect fill="#313139" height="464.8594" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="295.6084" y="109.5625"/></g><g><title>LRU Policy</title><rect fill="#313139" height="79.3984" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="519.4858" y="138.6953"/></g><g><title>Process Manager</title><rect fill="#313139" height="171.6641" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="720.3149" y="289.3594"/></g><g><title>Worker Process</title><rect fill="#313139" height="113.3984" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="905.6006" y="318.4922"/></g><g class="message" data-participant-1="Monitor" data-participant-2="Monitor"><line style="stroke:#E7E7E7;stroke-width:1;" x1="69.3022" x2="116.3022" y1="62.4297" y2="62.4297"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="116.3022" x2="116.3022" y1="62.4297" y2="75.4297"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="75.3022" x2="116.3022" y1="75.4297" y2="75.4297"/><polygon fill="#E7E7E7" points="85.3022,71.4297,75.3022,75.4297,85.3022,79.4297,81.3022,75.4297" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154.7495" x="81.3022" y="57.3638">check_memory_usage()</text></g><path d="M247.7495,54.7969 L247.7495,79.7969 L451.7495,79.7969 L451.7495,64.7969 L441.7495,54.7969 L247.7495,54.7969" fill="#714137" style="stroke:#E7E7E7;stroke-width:0.5;"/><path d="M441.7495,54.7969 L441.7495,64.7969 L451.7495,64.7969 L441.7495,54.7969" fill="#714137" style="stroke:#E7E7E7;stroke-width:0.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="183.0283" x="253.7495" y="71.8638">Memory usage: 95% of limit</text><g class="message" data-participant-1="Monitor" data-participant-2="Lifecycle"><polygon fill="#E7E7E7" points="283.6084,105.5625,293.6084,109.5625,283.6084,113.5625,287.6084,109.5625" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="74.3022" x2="289.6084" y1="109.5625" y2="109.5625"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="202.3062" x="81.3022" y="104.4966">memory_threshold_exceeded()</text></g><g class="message" data-participant-1="Lifecycle" data-participant-2="Policy"><polygon fill="#E7E7E7" points="507.4858,134.6953,517.4858,138.6953,507.4858,142.6953,511.4858,138.6953" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="305.6084" x2="513.4858" y1="138.6953" y2="138.6953"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153.3467" x="312.6084" y="133.6294">select_model_to_evict()</text></g><g class="message" data-participant-1="Policy" data-participant-2="Policy"><line style="stroke:#E7E7E7;stroke-width:1;" x1="529.4858" x2="571.4858" y1="171.8945" y2="171.8945"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="571.4858" x2="571.4858" y1="171.8945" y2="184.8945"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="530.4858" x2="571.4858" y1="184.8945" y2="184.8945"/><polygon fill="#E7E7E7" points="540.4858,180.8945,530.4858,184.8945,540.4858,188.8945,536.4858,184.8945" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166.8291" x="536.4858" y="166.8286">get_least_recently_used()</text></g><path d="M724.8291,151.6953 L724.8291,191.6953 L1069.8291,191.6953 L1069.8291,161.6953 L1059.8291,151.6953 L724.8291,151.6953" fill="#714137" style="stroke:#E7E7E7;stroke-width:0.5;"/><path d="M1059.8291,151.6953 L1059.8291,161.6953 L1069.8291,161.6953 L1059.8291,151.6953" fill="#714137" style="stroke:#E7E7E7;stroke-width:0.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="324.9556" x="730.8291" y="168.7622">Models: [A: 2min ago, B: 5min ago, C: 10min ago]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100.8579" x="730.8291" y="183.895">Select: Model C</text><g class="message" data-participant-1="Policy" data-participant-2="Lifecycle"><polygon fill="#E7E7E7" points="316.6084,214.0938,306.6084,218.0938,316.6084,222.0938,312.6084,218.0938" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="310.6084" x2="523.4858" y1="218.0938" y2="218.0938"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99.0361" x="322.6084" y="213.0278">model_id = &quot;C&quot;</text></g><g class="message" data-participant-1="Lifecycle" data-participant-2="Lifecycle"><line style="stroke:#E7E7E7;stroke-width:1;" x1="305.6084" x2="347.6084" y1="247.2266" y2="247.2266"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="347.6084" x2="347.6084" y1="247.2266" y2="260.2266"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="306.6084" x2="347.6084" y1="260.2266" y2="260.2266"/><polygon fill="#E7E7E7" points="316.6084,256.2266,306.6084,260.2266,316.6084,264.2266,312.6084,260.2266" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="189.8774" x="312.6084" y="242.1606">mark_as_unloading(model_c)</text></g><g class="message" data-participant-1="Lifecycle" data-participant-2="ProcMgr"><polygon fill="#E7E7E7" points="708.3149,285.3594,718.3149,289.3594,708.3149,293.3594,712.3149,289.3594" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="305.6084" x2="714.3149" y1="289.3594" y2="289.3594"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="179.5879" x="312.6084" y="284.2935">terminate_worker(model_c)</text></g><g class="message" data-participant-1="ProcMgr" data-participant-2="Worker"><polygon fill="#E7E7E7" points="893.6006,314.4922,903.6006,318.4922,893.6006,322.4922,897.6006,318.4922" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="730.3149" x2="899.6006" y1="318.4922" y2="318.4922"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156.2856" x="737.3149" y="313.4263">send_shutdown_signal()</text></g><g class="message" data-participant-1="Worker" data-participant-2="Worker"><line style="stroke:#E7E7E7;stroke-width:1;" x1="915.6006" x2="957.6006" y1="347.625" y2="347.625"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="957.6006" x2="957.6006" y1="347.625" y2="360.625"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="916.6006" x2="957.6006" y1="360.625" y2="360.625"/><polygon fill="#E7E7E7" points="926.6006,356.625,916.6006,360.625,926.6006,364.625,922.6006,360.625" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131.6694" x="922.6006" y="342.5591">cleanup_resources()</text></g><g class="message" data-participant-1="Worker" data-participant-2="Worker"><line style="stroke:#E7E7E7;stroke-width:1;" x1="915.6006" x2="957.6006" y1="389.7578" y2="389.7578"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="957.6006" x2="957.6006" y1="389.7578" y2="402.7578"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="916.6006" x2="957.6006" y1="402.7578" y2="402.7578"/><polygon fill="#E7E7E7" points="926.6006,398.7578,916.6006,402.7578,926.6006,406.7578,922.6006,402.7578" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170.498" x="922.6006" y="384.6919">torch.cuda.empty_cache()</text></g><g class="message" data-participant-1="Worker" data-participant-2="ProcMgr"><polygon fill="#E7E7E7" points="741.3149,427.8906,731.3149,431.8906,741.3149,435.8906,737.3149,431.8906" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="735.3149" x2="909.6006" y1="431.8906" y2="431.8906"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130.6475" x="747.3149" y="426.8247">shutdown_complete</text></g><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="901.6006" x2="919.6006" y1="422.8906" y2="440.8906"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="901.6006" x2="919.6006" y1="440.8906" y2="422.8906"/><g class="message" data-participant-1="ProcMgr" data-participant-2="Lifecycle"><polygon fill="#E7E7E7" points="316.6084,457.0234,306.6084,461.0234,316.6084,465.0234,312.6084,461.0234" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="310.6084" x2="724.3149" y1="461.0234" y2="461.0234"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123.5698" x="322.6084" y="455.9575">worker_terminated</text></g><g class="message" data-participant-1="Lifecycle" data-participant-2="Lifecycle"><line style="stroke:#E7E7E7;stroke-width:1;" x1="305.6084" x2="347.6084" y1="490.1563" y2="490.1563"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="347.6084" x2="347.6084" y1="490.1563" y2="503.1563"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="306.6084" x2="347.6084" y1="503.1563" y2="503.1563"/><polygon fill="#E7E7E7" points="316.6084,499.1563,306.6084,503.1563,316.6084,507.1563,312.6084,503.1563" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="186.0244" x="312.6084" y="485.0903">mark_as_unloaded(model_c)</text></g><g class="message" data-participant-1="Lifecycle" data-participant-2="Lifecycle"><line style="stroke:#E7E7E7;stroke-width:1;" x1="305.6084" x2="347.6084" y1="532.2891" y2="532.2891"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="347.6084" x2="347.6084" y1="532.2891" y2="545.2891"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="306.6084" x2="347.6084" y1="545.2891" y2="545.2891"/><polygon fill="#E7E7E7" points="316.6084,541.2891,306.6084,545.2891,316.6084,549.2891,312.6084,545.2891" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="187.6938" x="312.6084" y="527.2231">publish_event(ModelEvicted)</text></g><g class="message" data-participant-1="Lifecycle" data-participant-2="Monitor"><polygon fill="#E7E7E7" points="85.3022,570.4219,75.3022,574.4219,85.3022,578.4219,81.3022,574.4219" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="79.3022" x2="299.6084" y1="574.4219" y2="574.4219"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118.5742" x="91.3022" y="569.356">eviction_complete</text></g><g class="message" data-participant-1="Monitor" data-participant-2="Monitor"><line style="stroke:#E7E7E7;stroke-width:1;" x1="74.3022" x2="116.3022" y1="608.5547" y2="608.5547"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="116.3022" x2="116.3022" y1="608.5547" y2="621.5547"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="69.3022" x2="116.3022" y1="621.5547" y2="621.5547"/><polygon fill="#E7E7E7" points="79.3022,617.5547,69.3022,621.5547,79.3022,625.5547,75.3022,621.5547" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154.7495" x="81.3022" y="603.4888">check_memory_usage()</text></g><path d="M257.7495,590.9219 L257.7495,615.9219 L461.7495,615.9219 L461.7495,600.9219 L451.7495,590.9219 L257.7495,590.9219" fill="#714137" style="stroke:#E7E7E7;stroke-width:0.5;"/><path d="M451.7495,590.9219 L451.7495,600.9219 L461.7495,600.9219 L451.7495,590.9219" fill="#714137" style="stroke:#E7E7E7;stroke-width:0.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="183.0283" x="263.7495" y="607.9888">Memory usage: 68% of limit</text></g></svg></div></div>

<hr />
<h2 id="6-data-flow-architecture">6. Data Flow Architecture<a class="headerlink" href="#6-data-flow-architecture" title="Permanent link">&para;</a></h2>
<h3 id="61-request-processing-data-flow">6.1 Request Processing Data Flow<a class="headerlink" href="#61-request-processing-data-flow" title="Permanent link">&para;</a></h3>
<div class='puml-container'><div class="puml light" style=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="DESCRIPTION" height="842px" preserveAspectRatio="xMidYMid meet" style="width:954px;height:842px;background:#FFFFFF;" version="1.1" viewBox="0 0 954 842" width="954px" zoomAndPan="magnify" class="diagram"><defs/><g><g class="cluster" data-entity="ModelMora Instance" data-source-line="9" data-uid="ent0004" id="cluster_ModelMora Instance"><path d="M8.5,219.6 L169.5498,219.6 A3.75,3.75 0 0 1 172.0498,222.1 L179.0498,241.8969 L728.5,241.8969 A2.5,2.5 0 0 1 731,244.3969 L731,833.17 A2.5,2.5 0 0 1 728.5,835.67 L8.5,835.67 A2.5,2.5 0 0 1 6,833.17 L6,222.1 A2.5,2.5 0 0 1 8.5,219.6" fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="6" x2="179.0498" y1="241.8969" y2="241.8969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="160.0498" x="10" y="234.5951">ModelMora Instance</text></g><g class="entity" data-entity="API" data-source-line="10" data-uid="ent0005" id="entity_API"><rect fill="#F1F1F1" height="36.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="124.1592" x="94.92" y="262.74"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104.1592" x="104.92" y="285.7351">REST/gRPC API</text></g><g class="entity" data-entity="Queue" data-source-line="11" data-uid="ent0006" id="entity_Queue"><rect fill="#F1F1F1" height="36.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="127.9395" x="360.03" y="396.84"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107.9395" x="370.03" y="419.8351">Request Queue</text></g><g class="entity" data-entity="Batch" data-source-line="12" data-uid="ent0007" id="entity_Batch"><rect fill="#F1F1F1" height="36.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="153.3281" x="114.34" y="522.78"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133.3281" x="124.34" y="545.7751">Batch Accumulator</text></g><g class="entity" data-entity="Lifecycle" data-source-line="13" data-uid="ent0008" id="entity_Lifecycle"><rect fill="#F1F1F1" height="36.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="147.2305" x="518.38" y="522.78"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127.2305" x="528.38" y="545.7751">Lifecycle Manager</text></g><g class="entity" data-entity="DB" data-source-line="14" data-uid="ent0009" id="entity_DB"><path d="M536.79,394.19 C536.79,384.19 599.0029,384.19 599.0029,384.19 C599.0029,384.19 661.2158,384.19 661.2158,394.19 L661.2158,435.7837 C661.2158,445.7837 599.0029,445.7837 599.0029,445.7837 C599.0029,445.7837 536.79,445.7837 536.79,435.7837 L536.79,394.19" fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><path d="M536.79,394.19 C536.79,404.19 599.0029,404.19 599.0029,404.19 C599.0029,404.19 661.2158,404.19 661.2158,394.19" fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104.4258" x="546.79" y="421.1851">Model Registry</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91.6768" x="546.79" y="437.482">(PostgreSQL)</text></g><g class="entity" data-entity="Pool" data-source-line="15" data-uid="ent0010" id="entity_Pool"><rect fill="#F1F1F1" height="36.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="104.5537" x="248.72" y="644.23"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84.5537" x="258.72" y="667.2251">Worker Pool</text></g><g class="entity" data-entity="W1" data-source-line="16" data-uid="ent0011" id="entity_W1"><rect fill="#F1F1F1" height="52.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="142.1104" x="259.94" y="767.08"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122.1104" x="269.94" y="790.0751">Worker Process 1</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66.9854" x="269.94" y="806.372">(Model A)</text></g><g class="entity" data-entity="W2" data-source-line="17" data-uid="ent0012" id="entity_W2"><rect fill="#F1F1F1" height="52.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="142.1104" x="412.94" y="254.6"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122.1104" x="422.94" y="277.5951">Worker Process 2</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67.0127" x="422.94" y="293.892">(Model B)</text></g><g class="entity" data-entity="Metrics" data-source-line="18" data-uid="ent0013" id="entity_Metrics"><rect fill="#F1F1F1" height="36.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="135.4658" x="537.27" y="775.22"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="115.4658" x="547.27" y="798.2151">Metrics Exporter</text></g><g class="entity" data-entity="Storage" data-source-line="19" data-uid="ent0014" id="entity_Storage"><rect fill="#F1F1F1" height="52.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="105.6475" x="22.18" y="636.08"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85.6475" x="32.18" y="659.0751">Result Store</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73.4248" x="32.18" y="675.372">(S3/MinIO)</text></g><g class="entity" data-entity="Client" data-source-line="6" data-uid="ent0002" id="entity_Client"><rect fill="#F1F1F1" height="36.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="143.2041" x="84.4" y="7"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="123.2041" x="94.4" y="29.9951">Client Application</text></g><g class="entity" data-entity="LB" data-source-line="7" data-uid="ent0003" id="entity_LB"><rect fill="#F1F1F1" height="36.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="119.873" x="96.06" y="120.3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99.873" x="106.06" y="143.2951">Load Balancer</text></g><g class="entity" data-entity="GMN41" data-source-line="48" data-uid="ent0042" id="entity_GMN41"><path d="M746.55,765.67 L746.55,821.0684 L947.4426,821.0684 L947.4426,775.67 L937.4426,765.67 L746.55,765.67" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M937.4426,765.67 L937.4426,775.67 L947.4426,775.67 L937.4426,765.67" fill="#FEFFDD" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170.752" x="752.55" y="782.7369">Each worker is an isolated</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="179.8926" x="752.55" y="797.8697">Python process for memory</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="54.8184" x="752.55" y="813.0025">isolation</text></g><g class="entity" data-entity="GMN44" data-source-line="54" data-uid="ent0045" id="entity_GMN44"><path d="M749.68,642.24 L749.68,682.5056 L916.3143,682.5056 L916.3143,652.24 L906.3143,642.24 L749.68,642.24" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M906.3143,642.24 L906.3143,652.24 L916.3143,652.24 L906.3143,642.24" fill="#FEFFDD" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145.6343" x="755.68" y="659.3069">Used for large outputs</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145.4248" x="755.68" y="674.4397">like generated images</text></g><g class="link" data-entity-1="Client" data-entity-2="LB" data-link-type="dependency" data-source-line="22" data-uid="lnk15" id="link_Client_LB"><path d="M94.02,43.72 C80.18,50.65 67.19,60.2 59,73.3 C45.56,94.78 63.0232,108.422 90.0132,118.992" fill="none" id="Client-to-LB" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="95.6,121.18,88.6784,114.1735,90.9443,119.3567,85.7611,121.6226,95.6,121.18" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146.1357" x="60" y="86.3669">1. HTTP/gRPC Request</text></g><g class="link" data-entity-1="Client" data-entity-2="LB" data-link-type="dependency" data-source-line="41" data-uid="lnk37" id="link_Client_LB"><path d="M191.6789,47.0183 C208.4189,58.9283 219.27,72.31 211,90.3 C205.53,102.18 195.43,112.19 185.36,119.89" fill="none" id="Client-backto-LB" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="186.79,43.54,191.8045,52.0167,190.8641,46.4386,196.4422,45.4982,186.79,43.54" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164.0361" x="214" y="86.3669">15. HTTP/gRPC Response</text></g><g class="link" data-entity-1="LB" data-entity-2="API" data-link-type="dependency" data-source-line="23" data-uid="lnk16" id="link_LB_API"><path d="M102.77,156.93 C89.43,163.98 76.73,173.61 69,186.6 C51.11,216.63 83.0101,242.0151 114.4201,259.3951" fill="none" id="LB-to-API" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="119.67,262.3,113.7318,254.4427,115.2951,259.8792,109.8585,261.4426,119.67,262.3" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127.0293" x="70" y="199.6669">2. Forward Request</text></g><g class="link" data-entity-1="LB" data-entity-2="API" data-link-type="dependency" data-source-line="40" data-uid="lnk35" id="link_LB_API"><path d="M184.1208,161.0648 C192.8708,169.0148 197.34,175.16 202,186.6 C212.98,213.58 192.04,243.77 175.19,262.31" fill="none" id="LB-backto-API" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="179.68,157.03,183.6513,166.0427,183.3807,160.3923,189.031,160.1216,179.68,157.03" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="87.8262" x="206" y="199.6669">14. Response</text></g><g class="link" data-entity-1="API" data-entity-2="Queue" data-link-type="dependency" data-source-line="24" data-uid="lnk17" id="link_API_Queue"><path d="M192.46,299.43 C243.52,324.7 331.8719,368.4099 383.0219,393.7099" fill="none" id="API-to-Queue" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="388.4,396.37,382.1063,388.7944,383.9183,394.1532,378.5595,395.9652,388.4,396.37" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="235.4219" x="299" y="350.2569">3. Enqueue(model_id, data, priority)</text></g><g class="link" data-entity-1="Queue" data-entity-2="Batch" data-link-type="dependency" data-source-line="25" data-uid="lnk18" id="link_Queue_Batch"><path d="M370.11,433.55 C320.36,449.89 253.36,472.23 248,475.78 C229.38,488.14 216.5205,503.1741 206.1605,517.5341" fill="none" id="Queue-to-Batch" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="202.65,522.4,211.1596,517.4415,205.5754,518.3451,204.6718,512.7609,202.65,522.4" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121.0879" x="249" y="488.8469">4. Group by model</text></g><g class="link" data-entity-1="Batch" data-entity-2="Lifecycle" data-link-type="dependency" data-source-line="26" data-uid="lnk19" id="link_Batch_Lifecycle"><path d="M267.84,540.93 C339.93,540.93 441.02,540.93 512.13,540.93" fill="none" id="Batch-to-Lifecycle" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="518.13,540.93,509.13,536.93,513.13,540.93,509.13,544.93,518.13,540.93" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154.1211" x="316.02" y="533.9969">5. Ensure model loaded</text></g><g class="link" data-entity-1="DB" data-entity-2="Lifecycle" data-link-type="dependency" data-source-line="28" data-uid="lnk21" id="link_DB_Lifecycle"><path d="M530.6127,437.57 C479.0627,453.98 419.86,473.21 418,475.78 C388.86,516.1 458.27,531.12 517.89,536.69" fill="none" id="DB-backto-Lifecycle" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="536.33,435.75,526.5407,434.6685,531.5656,437.2667,528.9674,442.2915,536.33,435.75" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151.4551" x="419" y="488.8469">6. Get model metadata</text></g><g class="link" data-entity-1="DB" data-entity-2="Lifecycle" data-link-type="dependency" data-source-line="29" data-uid="lnk22" id="link_DB_Lifecycle"><path d="M597.31,445.99 C595.95,469.92 594.4483,496.6195 593.3283,516.4495" fill="none" id="DB-to-Lifecycle" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="592.99,522.44,597.4911,513.6799,593.272,517.448,589.5039,513.2288,592.99,522.44" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99.4805" x="596" y="488.8469">7. Model config</text></g><g class="link" data-entity-1="Lifecycle" data-entity-2="Pool" data-link-type="dependency" data-source-line="31" data-uid="lnk23" id="link_Lifecycle_Pool"><path d="M580,559.31 C568.95,573.98 551.23,594.41 531,606.08 C475.51,638.09 408.1996,650.9248 359.4196,656.6148" fill="none" id="Lifecycle-to-Pool" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="353.46,657.31,362.8628,660.2403,358.4263,656.7307,361.9359,652.2942,353.46,657.31" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136.3604" x="553" y="602.1469">8. Spawn/Get worker</text></g><g class="link" data-entity-1="Pool" data-entity-2="W1" data-link-type="dependency" data-source-line="32" data-uid="lnk24" id="link_Pool_W1"><path d="M305.05,680.77 C310.2,702.92 317.7695,735.5063 323.6995,760.9763" fill="none" id="Pool-to-W1" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="325.06,766.82,326.915,757.1474,323.9262,761.9502,319.1234,758.9615,325.06,766.82" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90.1113" x="318" y="731.7369">9. Send batch</text></g><g class="link" data-entity-1="Pool" data-entity-2="W1" data-link-type="dependency" data-source-line="33" data-uid="lnk26" id="link_Pool_W1"><path d="M259.6424,684.0226 C237.0824,697.5326 219.64,714.36 232,735.67 C239.45,748.53 251.03,758.71 263.69,766.7" fill="none" id="Pool-backto-W1" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="264.79,680.94,255.0136,682.1322,260.5004,683.5088,259.1237,688.9956,264.79,680.94" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72.3315" x="233" y="731.7369">10. Results</text></g><g class="link" data-entity-1="Batch" data-entity-2="Pool" data-link-type="dependency" data-source-line="34" data-uid="lnk28" id="link_Batch_Pool"><path d="M211.2952,563.973 C232.2152,586.683 264.29,621.51 285.06,644.07" fill="none" id="Batch-backto-Pool" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="207.23,559.56,210.3857,568.8896,210.6176,563.2375,216.2697,563.4694,207.23,559.56" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116.7271" x="250" y="602.1469">11. Return results</text></g><g class="link" data-entity-1="API" data-entity-2="Batch" data-link-type="dependency" data-source-line="36" data-uid="lnk30" id="link_API_Batch"><path d="M159.1151,305.1343 C161.8951,335.0543 167.55,392.49 175,445.78 C178.76,472.71 184.27,503.78 187.74,522.63" fill="none" id="API-backto-Batch" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="158.56,299.16,155.4098,308.4915,159.0226,304.1386,163.3755,307.7513,158.56,299.16" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166.4355" x="176" y="419.5569">12a. Small results (inline)</text></g><g class="link" data-entity-1="Batch" data-entity-2="Storage" data-link-type="dependency" data-source-line="37" data-uid="lnk31" id="link_Batch_Storage"><path d="M113.89,553.26 C93.37,560.18 73.47,571.29 61,589.08 C51.53,602.58 52.9258,615.2715 58.8558,630.0515" fill="none" id="Batch-to-Storage" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="61.09,635.62,61.4511,625.7778,59.2282,630.9796,54.0264,628.7567,61.09,635.62" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165.2739" x="62" y="602.1469">12b. Large results (store)</text></g><g class="link" data-entity-1="API" data-entity-2="Storage" data-link-type="dependency" data-source-line="38" data-uid="lnk33" id="link_API_Storage"><path d="M145.0133,304.5592 C121.3533,350.2992 62.06,473.36 47,589.08 C46.02,596.57 45.25,598.73 47,606.08 C49.42,616.23 54.03,626.63 58.82,635.63" fill="none" id="API-backto-Storage" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="147.77,299.23,140.0822,305.3861,145.4728,303.671,147.1878,309.0616,147.77,299.23" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92.0728" x="73" y="488.8469">13. Result URI</text></g><g class="link" data-entity-1="Lifecycle" data-entity-2="Metrics" data-link-type="dependency" data-source-line="43" data-uid="lnk38" id="link_Lifecycle_Metrics"><path d="M662.06,559.51 C676.26,566.38 689.44,575.91 698,589.08 C724.17,629.36 647.78,614.34 631,636.08 C599.07,677.45 599.6906,737.5325 602.4106,768.8325" fill="none" id="Lifecycle-to-Metrics" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="602.93,774.81,606.1358,765.4975,602.4971,769.8288,598.1658,766.1901,602.93,774.81" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99.3345" x="632" y="666.9469">Publish metrics</text></g><g class="link" data-entity-1="Queue" data-entity-2="Metrics" data-link-type="dependency" data-source-line="44" data-uid="lnk39" id="link_Queue_Metrics"><path d="M416.03,433.62 C411.2,445.31 405.5,461.14 403,475.78 C395.59,519.23 398.52,560.01 422,606.08 C460.19,681.01 534.2754,741.6303 574.8554,771.2803" fill="none" id="Queue-to-Metrics" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="579.7,774.82,574.7929,766.2807,575.6628,771.8702,570.0733,772.7401,579.7,774.82" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99.3345" x="423" y="602.1469">Publish metrics</text></g><g class="link" data-entity-1="W1" data-entity-2="Metrics" data-link-type="dependency" data-source-line="45" data-uid="lnk40" id="link_W1_Metrics"><path d="M402.28,793.37 C443.82,793.37 489.93,793.37 530.91,793.37" fill="none" id="W1-to-Metrics" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="536.91,793.37,527.91,789.37,531.91,793.37,527.91,797.37,536.91,793.37" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99.3345" x="420.16" y="786.4369">Publish metrics</text></g><g class="link" data-entity-1="W1" data-entity-2="GMN41" data-link-type="association" data-source-line="48" data-uid="lnk43" id="link_W1_GMN41"><path d="M396.23,766.72 C436.25,751.82 488.96,734.76 537.5,727.17 C614.78,715.09 637.34,709.33 713.5,727.17 C745.24,734.61 778.07,750.76 803.24,765.25" fill="none" id="W1-GMN41" style="stroke:#181818;stroke-width:1;stroke-dasharray:7,7;"/></g><g class="link" data-entity-1="Storage" data-entity-2="GMN44" data-link-type="association" data-source-line="54" data-uid="lnk46" id="link_Storage_GMN44"><path d="M128.29,636.81 C161.91,622.12 206.73,605.12 248.5,597.58 C451.88,560.84 513.18,546.76 713.5,597.58 C747.13,606.11 781.54,626.21 804.74,641.78" fill="none" id="Storage-GMN44" style="stroke:#181818;stroke-width:1;stroke-dasharray:7,7;"/></g></g></svg></div><div class="puml dark" style=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="DESCRIPTION" height="842px" preserveAspectRatio="xMidYMid meet" style="width:954px;height:842px;background:#1B1B1B;" version="1.1" viewBox="0 0 954 842" width="954px" zoomAndPan="magnify" class="diagram"><defs/><g><rect fill="#1B1B1B" height="842" style="stroke:none;stroke-width:1;" width="954" x="0" y="0"/><g class="cluster" data-entity="ModelMora Instance" data-source-line="9" data-uid="ent0004" id="cluster_ModelMora Instance"><path d="M8.5,219.6 L169.5498,219.6 A3.75,3.75 0 0 1 172.0498,222.1 L179.0498,241.8969 L728.5,241.8969 A2.5,2.5 0 0 1 731,244.3969 L731,833.17 A2.5,2.5 0 0 1 728.5,835.67 L8.5,835.67 A2.5,2.5 0 0 1 6,833.17 L6,222.1 A2.5,2.5 0 0 1 8.5,219.6" fill="none" style="stroke:#FFFFFF;stroke-width:1.5;"/><line style="stroke:#FFFFFF;stroke-width:1.5;" x1="6" x2="179.0498" y1="241.8969" y2="241.8969"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="160.0498" x="10" y="234.5951">ModelMora Instance</text></g><g class="entity" data-entity="API" data-source-line="10" data-uid="ent0005" id="entity_API"><rect fill="#313139" height="36.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="124.1592" x="94.92" y="262.74"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104.1592" x="104.92" y="285.7351">REST/gRPC API</text></g><g class="entity" data-entity="Queue" data-source-line="11" data-uid="ent0006" id="entity_Queue"><rect fill="#313139" height="36.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="127.9395" x="360.03" y="396.84"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107.9395" x="370.03" y="419.8351">Request Queue</text></g><g class="entity" data-entity="Batch" data-source-line="12" data-uid="ent0007" id="entity_Batch"><rect fill="#313139" height="36.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="153.3281" x="114.34" y="522.78"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133.3281" x="124.34" y="545.7751">Batch Accumulator</text></g><g class="entity" data-entity="Lifecycle" data-source-line="13" data-uid="ent0008" id="entity_Lifecycle"><rect fill="#313139" height="36.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="147.2305" x="518.38" y="522.78"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127.2305" x="528.38" y="545.7751">Lifecycle Manager</text></g><g class="entity" data-entity="DB" data-source-line="14" data-uid="ent0009" id="entity_DB"><path d="M536.79,394.19 C536.79,384.19 599.0029,384.19 599.0029,384.19 C599.0029,384.19 661.2158,384.19 661.2158,394.19 L661.2158,435.7837 C661.2158,445.7837 599.0029,445.7837 599.0029,445.7837 C599.0029,445.7837 536.79,445.7837 536.79,435.7837 L536.79,394.19" fill="#313139" style="stroke:#E7E7E7;stroke-width:0.5;"/><path d="M536.79,394.19 C536.79,404.19 599.0029,404.19 599.0029,404.19 C599.0029,404.19 661.2158,404.19 661.2158,394.19" fill="none" style="stroke:#E7E7E7;stroke-width:0.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104.4258" x="546.79" y="421.1851">Model Registry</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91.6768" x="546.79" y="437.482">(PostgreSQL)</text></g><g class="entity" data-entity="Pool" data-source-line="15" data-uid="ent0010" id="entity_Pool"><rect fill="#313139" height="36.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="104.5537" x="248.72" y="644.23"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84.5537" x="258.72" y="667.2251">Worker Pool</text></g><g class="entity" data-entity="W1" data-source-line="16" data-uid="ent0011" id="entity_W1"><rect fill="#313139" height="52.5938" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="142.1104" x="259.94" y="767.08"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122.1104" x="269.94" y="790.0751">Worker Process 1</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66.9854" x="269.94" y="806.372">(Model A)</text></g><g class="entity" data-entity="W2" data-source-line="17" data-uid="ent0012" id="entity_W2"><rect fill="#313139" height="52.5938" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="142.1104" x="412.94" y="254.6"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122.1104" x="422.94" y="277.5951">Worker Process 2</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67.0127" x="422.94" y="293.892">(Model B)</text></g><g class="entity" data-entity="Metrics" data-source-line="18" data-uid="ent0013" id="entity_Metrics"><rect fill="#313139" height="36.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="135.4658" x="537.27" y="775.22"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="115.4658" x="547.27" y="798.2151">Metrics Exporter</text></g><g class="entity" data-entity="Storage" data-source-line="19" data-uid="ent0014" id="entity_Storage"><rect fill="#313139" height="52.5938" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="105.6475" x="22.18" y="636.08"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85.6475" x="32.18" y="659.0751">Result Store</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73.4248" x="32.18" y="675.372">(S3/MinIO)</text></g><g class="entity" data-entity="Client" data-source-line="6" data-uid="ent0002" id="entity_Client"><rect fill="#313139" height="36.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="143.2041" x="84.4" y="7"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="123.2041" x="94.4" y="29.9951">Client Application</text></g><g class="entity" data-entity="LB" data-source-line="7" data-uid="ent0003" id="entity_LB"><rect fill="#313139" height="36.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="119.873" x="96.06" y="120.3"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99.873" x="106.06" y="143.2951">Load Balancer</text></g><g class="entity" data-entity="GMN41" data-source-line="48" data-uid="ent0042" id="entity_GMN41"><path d="M746.55,765.67 L746.55,821.0684 L947.4426,821.0684 L947.4426,775.67 L937.4426,765.67 L746.55,765.67" fill="#714137" style="stroke:#E7E7E7;stroke-width:0.5;"/><path d="M937.4426,765.67 L937.4426,775.67 L947.4426,775.67 L937.4426,765.67" fill="#714137" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170.752" x="752.55" y="782.7369">Each worker is an isolated</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="179.8926" x="752.55" y="797.8697">Python process for memory</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="54.8184" x="752.55" y="813.0025">isolation</text></g><g class="entity" data-entity="GMN44" data-source-line="54" data-uid="ent0045" id="entity_GMN44"><path d="M749.68,642.24 L749.68,682.5056 L916.3143,682.5056 L916.3143,652.24 L906.3143,642.24 L749.68,642.24" fill="#714137" style="stroke:#E7E7E7;stroke-width:0.5;"/><path d="M906.3143,642.24 L906.3143,652.24 L916.3143,652.24 L906.3143,642.24" fill="#714137" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145.6343" x="755.68" y="659.3069">Used for large outputs</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145.4248" x="755.68" y="674.4397">like generated images</text></g><g class="link" data-entity-1="Client" data-entity-2="LB" data-link-type="dependency" data-source-line="22" data-uid="lnk15" id="link_Client_LB"><path d="M94.02,43.72 C80.18,50.65 67.19,60.2 59,73.3 C45.56,94.78 63.0232,108.422 90.0132,118.992" fill="none" id="Client-to-LB" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="95.6,121.18,88.6784,114.1735,90.9443,119.3567,85.7611,121.6226,95.6,121.18" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146.1357" x="60" y="86.3669">1. HTTP/gRPC Request</text></g><g class="link" data-entity-1="Client" data-entity-2="LB" data-link-type="dependency" data-source-line="41" data-uid="lnk37" id="link_Client_LB"><path d="M191.6789,47.0183 C208.4189,58.9283 219.27,72.31 211,90.3 C205.53,102.18 195.43,112.19 185.36,119.89" fill="none" id="Client-backto-LB" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="186.79,43.54,191.8045,52.0167,190.8641,46.4386,196.4422,45.4982,186.79,43.54" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164.0361" x="214" y="86.3669">15. HTTP/gRPC Response</text></g><g class="link" data-entity-1="LB" data-entity-2="API" data-link-type="dependency" data-source-line="23" data-uid="lnk16" id="link_LB_API"><path d="M102.77,156.93 C89.43,163.98 76.73,173.61 69,186.6 C51.11,216.63 83.0101,242.0151 114.4201,259.3951" fill="none" id="LB-to-API" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="119.67,262.3,113.7318,254.4427,115.2951,259.8792,109.8585,261.4426,119.67,262.3" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127.0293" x="70" y="199.6669">2. Forward Request</text></g><g class="link" data-entity-1="LB" data-entity-2="API" data-link-type="dependency" data-source-line="40" data-uid="lnk35" id="link_LB_API"><path d="M184.1208,161.0648 C192.8708,169.0148 197.34,175.16 202,186.6 C212.98,213.58 192.04,243.77 175.19,262.31" fill="none" id="LB-backto-API" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="179.68,157.03,183.6513,166.0427,183.3807,160.3923,189.031,160.1216,179.68,157.03" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="87.8262" x="206" y="199.6669">14. Response</text></g><g class="link" data-entity-1="API" data-entity-2="Queue" data-link-type="dependency" data-source-line="24" data-uid="lnk17" id="link_API_Queue"><path d="M192.46,299.43 C243.52,324.7 331.8719,368.4099 383.0219,393.7099" fill="none" id="API-to-Queue" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="388.4,396.37,382.1063,388.7944,383.9183,394.1532,378.5595,395.9652,388.4,396.37" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="235.4219" x="299" y="350.2569">3. Enqueue(model_id, data, priority)</text></g><g class="link" data-entity-1="Queue" data-entity-2="Batch" data-link-type="dependency" data-source-line="25" data-uid="lnk18" id="link_Queue_Batch"><path d="M370.11,433.55 C320.36,449.89 253.36,472.23 248,475.78 C229.38,488.14 216.5205,503.1741 206.1605,517.5341" fill="none" id="Queue-to-Batch" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="202.65,522.4,211.1596,517.4415,205.5754,518.3451,204.6718,512.7609,202.65,522.4" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121.0879" x="249" y="488.8469">4. Group by model</text></g><g class="link" data-entity-1="Batch" data-entity-2="Lifecycle" data-link-type="dependency" data-source-line="26" data-uid="lnk19" id="link_Batch_Lifecycle"><path d="M267.84,540.93 C339.93,540.93 441.02,540.93 512.13,540.93" fill="none" id="Batch-to-Lifecycle" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="518.13,540.93,509.13,536.93,513.13,540.93,509.13,544.93,518.13,540.93" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154.1211" x="316.02" y="533.9969">5. Ensure model loaded</text></g><g class="link" data-entity-1="DB" data-entity-2="Lifecycle" data-link-type="dependency" data-source-line="28" data-uid="lnk21" id="link_DB_Lifecycle"><path d="M530.6127,437.57 C479.0627,453.98 419.86,473.21 418,475.78 C388.86,516.1 458.27,531.12 517.89,536.69" fill="none" id="DB-backto-Lifecycle" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="536.33,435.75,526.5407,434.6685,531.5656,437.2667,528.9674,442.2915,536.33,435.75" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151.4551" x="419" y="488.8469">6. Get model metadata</text></g><g class="link" data-entity-1="DB" data-entity-2="Lifecycle" data-link-type="dependency" data-source-line="29" data-uid="lnk22" id="link_DB_Lifecycle"><path d="M597.31,445.99 C595.95,469.92 594.4483,496.6195 593.3283,516.4495" fill="none" id="DB-to-Lifecycle" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="592.99,522.44,597.4911,513.6799,593.272,517.448,589.5039,513.2288,592.99,522.44" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99.4805" x="596" y="488.8469">7. Model config</text></g><g class="link" data-entity-1="Lifecycle" data-entity-2="Pool" data-link-type="dependency" data-source-line="31" data-uid="lnk23" id="link_Lifecycle_Pool"><path d="M580,559.31 C568.95,573.98 551.23,594.41 531,606.08 C475.51,638.09 408.1996,650.9248 359.4196,656.6148" fill="none" id="Lifecycle-to-Pool" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="353.46,657.31,362.8628,660.2403,358.4263,656.7307,361.9359,652.2942,353.46,657.31" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136.3604" x="553" y="602.1469">8. Spawn/Get worker</text></g><g class="link" data-entity-1="Pool" data-entity-2="W1" data-link-type="dependency" data-source-line="32" data-uid="lnk24" id="link_Pool_W1"><path d="M305.05,680.77 C310.2,702.92 317.7695,735.5063 323.6995,760.9763" fill="none" id="Pool-to-W1" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="325.06,766.82,326.915,757.1474,323.9262,761.9502,319.1234,758.9615,325.06,766.82" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90.1113" x="318" y="731.7369">9. Send batch</text></g><g class="link" data-entity-1="Pool" data-entity-2="W1" data-link-type="dependency" data-source-line="33" data-uid="lnk26" id="link_Pool_W1"><path d="M259.6424,684.0226 C237.0824,697.5326 219.64,714.36 232,735.67 C239.45,748.53 251.03,758.71 263.69,766.7" fill="none" id="Pool-backto-W1" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="264.79,680.94,255.0136,682.1322,260.5004,683.5088,259.1237,688.9956,264.79,680.94" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72.3315" x="233" y="731.7369">10. Results</text></g><g class="link" data-entity-1="Batch" data-entity-2="Pool" data-link-type="dependency" data-source-line="34" data-uid="lnk28" id="link_Batch_Pool"><path d="M211.2952,563.973 C232.2152,586.683 264.29,621.51 285.06,644.07" fill="none" id="Batch-backto-Pool" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="207.23,559.56,210.3857,568.8896,210.6176,563.2375,216.2697,563.4694,207.23,559.56" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116.7271" x="250" y="602.1469">11. Return results</text></g><g class="link" data-entity-1="API" data-entity-2="Batch" data-link-type="dependency" data-source-line="36" data-uid="lnk30" id="link_API_Batch"><path d="M159.1151,305.1343 C161.8951,335.0543 167.55,392.49 175,445.78 C178.76,472.71 184.27,503.78 187.74,522.63" fill="none" id="API-backto-Batch" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="158.56,299.16,155.4098,308.4915,159.0226,304.1386,163.3755,307.7513,158.56,299.16" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166.4355" x="176" y="419.5569">12a. Small results (inline)</text></g><g class="link" data-entity-1="Batch" data-entity-2="Storage" data-link-type="dependency" data-source-line="37" data-uid="lnk31" id="link_Batch_Storage"><path d="M113.89,553.26 C93.37,560.18 73.47,571.29 61,589.08 C51.53,602.58 52.9258,615.2715 58.8558,630.0515" fill="none" id="Batch-to-Storage" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="61.09,635.62,61.4511,625.7778,59.2282,630.9796,54.0264,628.7567,61.09,635.62" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165.2739" x="62" y="602.1469">12b. Large results (store)</text></g><g class="link" data-entity-1="API" data-entity-2="Storage" data-link-type="dependency" data-source-line="38" data-uid="lnk33" id="link_API_Storage"><path d="M145.0133,304.5592 C121.3533,350.2992 62.06,473.36 47,589.08 C46.02,596.57 45.25,598.73 47,606.08 C49.42,616.23 54.03,626.63 58.82,635.63" fill="none" id="API-backto-Storage" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="147.77,299.23,140.0822,305.3861,145.4728,303.671,147.1878,309.0616,147.77,299.23" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92.0728" x="73" y="488.8469">13. Result URI</text></g><g class="link" data-entity-1="Lifecycle" data-entity-2="Metrics" data-link-type="dependency" data-source-line="43" data-uid="lnk38" id="link_Lifecycle_Metrics"><path d="M662.06,559.51 C676.26,566.38 689.44,575.91 698,589.08 C724.17,629.36 647.78,614.34 631,636.08 C599.07,677.45 599.6906,737.5325 602.4106,768.8325" fill="none" id="Lifecycle-to-Metrics" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="602.93,774.81,606.1358,765.4975,602.4971,769.8288,598.1658,766.1901,602.93,774.81" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99.3345" x="632" y="666.9469">Publish metrics</text></g><g class="link" data-entity-1="Queue" data-entity-2="Metrics" data-link-type="dependency" data-source-line="44" data-uid="lnk39" id="link_Queue_Metrics"><path d="M416.03,433.62 C411.2,445.31 405.5,461.14 403,475.78 C395.59,519.23 398.52,560.01 422,606.08 C460.19,681.01 534.2754,741.6303 574.8554,771.2803" fill="none" id="Queue-to-Metrics" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="579.7,774.82,574.7929,766.2807,575.6628,771.8702,570.0733,772.7401,579.7,774.82" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99.3345" x="423" y="602.1469">Publish metrics</text></g><g class="link" data-entity-1="W1" data-entity-2="Metrics" data-link-type="dependency" data-source-line="45" data-uid="lnk40" id="link_W1_Metrics"><path d="M402.28,793.37 C443.82,793.37 489.93,793.37 530.91,793.37" fill="none" id="W1-to-Metrics" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="536.91,793.37,527.91,789.37,531.91,793.37,527.91,797.37,536.91,793.37" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99.3345" x="420.16" y="786.4369">Publish metrics</text></g><g class="link" data-entity-1="W1" data-entity-2="GMN41" data-link-type="association" data-source-line="48" data-uid="lnk43" id="link_W1_GMN41"><path d="M396.23,766.72 C436.25,751.82 488.96,734.76 537.5,727.17 C614.78,715.09 637.34,709.33 713.5,727.17 C745.24,734.61 778.07,750.76 803.24,765.25" fill="none" id="W1-GMN41" style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:7,7;"/></g><g class="link" data-entity-1="Storage" data-entity-2="GMN44" data-link-type="association" data-source-line="54" data-uid="lnk46" id="link_Storage_GMN44"><path d="M128.29,636.81 C161.91,622.12 206.73,605.12 248.5,597.58 C451.88,560.84 513.18,546.76 713.5,597.58 C747.13,606.11 781.54,626.21 804.74,641.78" fill="none" id="Storage-GMN44" style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:7,7;"/></g></g></svg></div></div>

<h3 id="62-model-download-data-flow">6.2 Model Download Data Flow<a class="headerlink" href="#62-model-download-data-flow" title="Permanent link">&para;</a></h3>
<div class='puml-container'><div class="puml light" style=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="DESCRIPTION" height="582px" preserveAspectRatio="xMidYMid meet" style="width:1458px;height:582px;background:#FFFFFF;" version="1.1" viewBox="0 0 1458 582" width="1458px" zoomAndPan="magnify" class="diagram"><defs/><g><g class="entity" data-entity="User" data-source-line="4" data-uid="ent0002" id="entity_User"><ellipse cx="610.9951" cy="14" fill="#F1F1F1" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M610.9951,22 L610.9951,49 M597.9951,30 L623.9951,30 M610.9951,49 L597.9951,64 M610.9951,49 L623.9951,64" fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31.9102" x="595.04" y="78.4951">User</text></g><g class="entity" data-entity="API" data-source-line="5" data-uid="ent0003" id="entity_API"><rect fill="#F1F1F1" height="36.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="117.9316" x="552.03" y="158.8"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97.9316" x="562.03" y="181.7951">CLI / REST API</text></g><g class="entity" data-entity="Registry" data-source-line="6" data-uid="ent0004" id="entity_Registry"><rect fill="#F1F1F1" height="36.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="134.1328" x="543.93" y="272.1"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114.1328" x="553.93" y="295.0951">Registry Service</text></g><g class="entity" data-entity="DB" data-source-line="7" data-uid="ent0005" id="entity_DB"><path d="M304.79,395.39 C304.79,385.39 367.0029,385.39 367.0029,385.39 C367.0029,385.39 429.2158,385.39 429.2158,395.39 L429.2158,436.9838 C429.2158,446.9838 367.0029,446.9838 367.0029,446.9838 C367.0029,446.9838 304.79,446.9838 304.79,436.9838 L304.79,395.39" fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><path d="M304.79,395.39 C304.79,405.39 367.0029,405.39 367.0029,405.39 C367.0029,405.39 429.2158,405.39 429.2158,395.39" fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104.4258" x="314.79" y="422.3851">Model Registry</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91.6768" x="314.79" y="438.682">(PostgreSQL)</text></g><g class="entity" data-entity="HF" data-source-line="8" data-uid="ent0006" id="entity_HF"><rect fill="#F1F1F1" height="36.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="200.1748" x="800.91" y="398.04"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="180.1748" x="810.91" y="421.0351">HuggingFace Downloader</text></g><g class="entity" data-entity="Cache" data-source-line="9" data-uid="ent0007" id="entity_Cache"><rect fill="#F1F1F1" height="52.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="132.4102" x="1096.79" y="523.99"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90.0225" x="1106.79" y="546.9851">Model Cache</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112.4102" x="1106.79" y="563.282">(Volume Mount)</text></g><g class="entity" data-entity="HFHub" data-source-line="10" data-uid="ent0008" id="entity_HFHub"><path d="M603.4632,535.2089 C607.326,529.9985 611.039,531.5915 613.9101,536.2578 C617.4587,530.6316 621.0399,529.3576 625.5436,535.2971 C628.7432,529.6359 632.5542,529.4466 637.0265,533.8443 C640.8402,527.285 646.4112,527.6964 649.692,534.355 C652.2587,528.6483 656.6088,528.8159 660.0168,533.5207 C663.3275,528.1493 668.6798,526.6791 672.6569,532.7869 C675.4127,526.6828 680.9899,526.5179 684.1252,532.4247 C688.214,528.3913 692.5777,529.2246 694.2825,534.915 C698.3347,528.7737 702.5561,529.4141 706.2532,535.2693 C710.6597,528.9943 714.9584,528.8484 718.8979,535.7186 C721.8907,529.8059 726.8372,530.5602 729.9257,535.6224 C733.5993,530.2843 739.2044,530.6457 742.4221,536.148 C750.7206,539.7248 749.6542,545.1478 744.2752,550.4917 C751.3402,556.2168 750.0225,561.7935 742.4415,565.7595 C738.9452,572.2239 734.4556,572.9315 729.9007,566.8148 C726.6271,572.7654 722.2665,572.4445 718.2435,567.626 C714.8314,573.1989 708.6784,573.6681 705.8928,566.994 C703.0754,573.2262 698.3365,573.6592 694.3214,568.1771 C691.9047,573.4297 686.2754,573.9021 682.7431,569.5175 C679.3891,574.3174 673.8574,574.1078 671.5365,568.4142 C669.1727,574.7019 664.0389,575.2304 660.122,569.9462 C656.751,575.0761 652.6732,573.9462 650.0851,569.1543 C644.4251,574.9956 640.4905,573.0542 636.826,566.941 C633.099,571.941 628.6061,572.8094 625.1275,566.6799 C623.1593,572.5019 618.067,573.0637 614.6628,568.0692 C610.7047,572.9749 605.7328,571.0747 603.6096,566.0308 C595.0088,565.0565 593.0347,558.2356 597.1295,551.5716 C591.6079,542.925 592.7413,537.5679 603.4632,535.2089" fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124.5029" x="608.75" y="555.1251">HuggingFace Hub</text></g><g class="entity" data-entity="GMN25" data-source-line="35" data-uid="ent0026" id="entity_GMN25"><path d="M1264.62,530.15 L1264.62,546.28 L1229.65,550.28 L1264.62,554.28 L1264.62,570.4156 A0,0 0 0 0 1264.62,570.4156 L1451.389,570.4156 A0,0 0 0 0 1451.389,570.4156 L1451.389,540.15 L1441.389,530.15 L1264.62,530.15 A0,0 0 0 0 1264.62,530.15" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1441.389,530.15 L1441.389,540.15 L1451.389,540.15 L1441.389,530.15" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165.769" x="1270.62" y="547.2169">Persistent volume shared</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162.2144" x="1270.62" y="562.3497">across container restarts</text></g><g class="link" data-entity-1="User" data-entity-2="API" data-link-type="dependency" data-source-line="12" data-uid="lnk9" id="link_User_API"><path d="M594.6,47.75 C552.82,56.39 447.9,83.13 480,128.8 C496.33,152.03 519.4183,162.5444 545.9483,168.5544" fill="none" id="User-to-API" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="551.8,169.88,543.9062,163.9904,546.9236,168.7753,542.1387,171.7927,551.8,169.88" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="215.814" x="481" y="124.8669">modelmora install model-x@v1.0</text></g><g class="link" data-entity-1="API" data-entity-2="User" data-link-type="dependency" data-source-line="32" data-uid="lnk24" id="link_API_User"><path d="M666.96,158.36 C680.41,151.36 693.15,141.78 701,128.8 C722.7,92.93 664.0098,64.8403 632.6798,52.6203" fill="none" id="API-to-User" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="627.09,50.44,634.0213,57.437,631.7482,52.2569,636.9283,49.9838,627.09,50.44" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="201.0684" x="707" y="124.8669">Model installed: model-x@v1.0</text></g><g class="link" data-entity-1="API" data-entity-2="Registry" data-link-type="dependency" data-source-line="13" data-uid="lnk10" id="link_API_Registry"><path d="M551.84,187.34 C511.7,196.47 469.24,213.28 489,242.1 C501.65,260.54 516.9142,269.9142 537.9442,276.7542" fill="none" id="API-to-Registry" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="543.65,278.61,536.3285,272.0224,538.8952,277.0635,533.8541,279.6301,543.65,278.61" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197.0376" x="490" y="238.1669">register_model(model-x, v1.0)</text></g><g class="link" data-entity-1="Registry" data-entity-2="API" data-link-type="dependency" data-source-line="30" data-uid="lnk23" id="link_Registry_API"><path d="M659.37,271.73 C672.25,264.6 684.62,254.93 692,242.1 C703.31,222.42 689.068,209.1496 666.298,198.0996" fill="none" id="Registry-to-API" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="660.9,195.48,667.2506,203.008,665.3983,197.663,670.7433,195.8107,660.9,195.48" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52.3301" x="697" y="238.1669">Success</text></g><g class="link" data-entity-1="Registry" data-entity-2="DB" data-link-type="dependency" data-source-line="14" data-uid="lnk11" id="link_Registry_DB"><path d="M543.48,291.84 C400.25,293.79 76.3,302.22 43,338.39 C6,378.59 194.2529,400.7663 298.4629,409.8963" fill="none" id="Registry-to-DB" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="304.44,410.42,295.8235,405.6498,299.4591,409.9836,295.1252,413.6192,304.44,410.42" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94.3896" x="44" y="351.4569">Check if exists</text></g><g class="link" data-entity-1="DB" data-entity-2="Registry" data-link-type="dependency" data-source-line="15" data-uid="lnk12" id="link_DB_Registry"><path d="M429.29,409.01 C472.95,402 530.67,387.09 572,355.39 C587.62,343.42 596.0252,328.7686 602.2252,314.2386" fill="none" id="DB-to-Registry" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="604.58,308.72,597.3687,315.428,602.6177,313.3188,604.7269,318.5678,604.58,308.72" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64.1685" x="589" y="351.4569">Not found</text></g><g class="link" data-entity-1="Registry" data-entity-2="DB" data-link-type="dependency" data-source-line="17" data-uid="lnk13" id="link_Registry_DB"><path d="M543.52,293.75 C428.11,298.73 202.86,311.78 179,338.39 C138.92,383.08 229.3384,401.6223 298.3984,409.4723" fill="none" id="Registry-to-DB-1" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="304.36,410.15,295.8694,405.1591,299.392,409.5853,294.9658,413.1079,304.36,410.15" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143.6602" x="180" y="351.4569">Save model metadata</text></g><g class="link" data-entity-1="DB" data-entity-2="Registry" data-link-type="dependency" data-source-line="18" data-uid="lnk14" id="link_DB_Registry"><path d="M429.55,411.55 C507.28,405.56 633.22,390.59 662,355.39 C674.79,339.75 662.5467,325.2668 644.7867,312.3068" fill="none" id="DB-to-Registry-1" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="639.94,308.77,644.8522,317.3064,643.979,311.7173,649.568,310.8441,639.94,308.77" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40.1616" x="668" y="351.4569">Saved</text></g><g class="link" data-entity-1="Registry" data-entity-2="DB" data-link-type="dependency" data-source-line="29" data-uid="lnk22" id="link_Registry_DB"><path d="M543.46,294.72 C478.32,299.65 386.4,311.31 364,338.39 C353.45,351.14 352.628,363.6816 355.818,379.2816" fill="none" id="Registry-to-DB-2" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="357.02,385.16,359.1358,375.5411,356.0183,380.2614,351.298,377.1438,357.02,385.16" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="202.8584" x="365" y="351.4569">Update status (DOWNLOADED)</text></g><g class="link" data-entity-1="Registry" data-entity-2="HF" data-link-type="dependency" data-source-line="20" data-uid="lnk15" id="link_Registry_HF"><path d="M652.24,308.87 C707.44,332.46 799.2527,371.7022 854.3827,395.2622" fill="none" id="Registry-to-HF" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="859.9,397.62,853.1959,390.405,855.3022,395.6551,850.0522,397.7614,859.9,397.62" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162.5" x="757" y="351.4569">download(model-x, v1.0)</text></g><g class="link" data-entity-1="HF" data-entity-2="Registry" data-link-type="dependency" data-source-line="28" data-uid="lnk21" id="link_HF_Registry"><path d="M916.01,397.8 C928.7,380.91 942.67,355.41 928,338.39 C896.43,301.78 767.6886,293.2774 684.3686,291.5074" fill="none" id="HF-to-Registry" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="678.37,291.38,687.283,295.5702,683.3689,291.4862,687.4529,287.572,678.37,291.38" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129.4731" x="935" y="351.4569">Download complete</text></g><g class="link" data-entity-1="HF" data-entity-2="HFHub" data-link-type="dependency" data-source-line="21" data-uid="lnk16" id="link_HF_HFHub"><path d="M800.69,422.01 C716.34,428.42 605.13,443.19 577,476.99 C560.8,496.45 576.4831,511.2578 602.7431,524.1378" fill="none" id="HF-to-HFHub" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="608.13,526.78,601.8111,519.2255,603.6409,524.5782,598.2882,526.408,608.13,526.78" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139.1724" x="578" y="490.0569">HTTP GET model files</text></g><g class="link" data-entity-1="HFHub" data-entity-2="HF" data-link-type="dependency" data-source-line="22" data-uid="lnk17" id="link_HFHub_HF"><path d="M694.28,526.65 C711.01,511.23 734.65,491.13 758,476.99 C786.42,459.77 815.08,447.3412 842.95,436.9212" fill="none" id="HFHub-to-HF" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="848.57,434.82,838.7391,434.2251,843.8866,436.571,841.5407,441.7185,848.57,434.82" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="238.2593" x="759" y="490.0569">Model files (safetensors, config.json)</text></g><g class="link" data-entity-1="HF" data-entity-2="HF" data-link-type="dependency" data-source-line="24" data-uid="lnk18" id="link_HF_HF"><path d="M1001.45,403.71 C1021.65,405.09 1036.09,409.25 1036.09,416.19 C1036.09,423.13 1027.6358,426.8681 1007.4358,428.2581" fill="none" id="HF-to-HF" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="1001.45,428.67,1010.7034,432.0427,1006.4382,428.3268,1010.1542,424.0616,1001.45,428.67" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114.7593" x="1042.09" y="420.7569">Verify checksums</text></g><g class="link" data-entity-1="HF" data-entity-2="Cache" data-link-type="dependency" data-source-line="25" data-uid="lnk19" id="link_HF_Cache"><path d="M930.5,434.79 C957.95,450.92 1000.2,475.08 1038,493.99 C1058.48,504.23 1075.7825,512.2064 1096.2525,521.1564" fill="none" id="HF-to-Cache" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="1101.75,523.56,1095.1062,516.2895,1097.1688,521.557,1091.9013,523.6195,1101.75,523.56" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="202.2236" x="1039" y="490.0569">Write to /models/model-x/v1.0/</text></g><g class="link" data-entity-1="Cache" data-entity-2="HF" data-link-type="dependency" data-source-line="26" data-uid="lnk20" id="link_Cache_HF"><path d="M1222.57,523.62 C1244.3,510.66 1260.4,494.09 1246,476.99 C1215.18,440.36 1097.6789,426.5341 1007.2189,421.0341" fill="none" id="Cache-to-HF" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="1001.23,420.67,1009.9707,425.2088,1006.2208,420.9734,1010.4562,417.2236,1001.23,420.67" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52.3301" x="1252" y="490.0569">Success</text></g></g></svg></div><div class="puml dark" style=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="DESCRIPTION" height="582px" preserveAspectRatio="xMidYMid meet" style="width:1458px;height:582px;background:#1B1B1B;" version="1.1" viewBox="0 0 1458 582" width="1458px" zoomAndPan="magnify" class="diagram"><defs/><g><rect fill="#1B1B1B" height="582" style="stroke:none;stroke-width:1;" width="1458" x="0" y="0"/><g class="entity" data-entity="User" data-source-line="4" data-uid="ent0002" id="entity_User"><ellipse cx="610.9951" cy="14" fill="#313139" rx="8" ry="8" style="stroke:#E7E7E7;stroke-width:0.5;"/><path d="M610.9951,22 L610.9951,49 M597.9951,30 L623.9951,30 M610.9951,49 L597.9951,64 M610.9951,49 L623.9951,64" fill="none" style="stroke:#E7E7E7;stroke-width:0.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31.9102" x="595.04" y="78.4951">User</text></g><g class="entity" data-entity="API" data-source-line="5" data-uid="ent0003" id="entity_API"><rect fill="#313139" height="36.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="117.9316" x="552.03" y="158.8"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97.9316" x="562.03" y="181.7951">CLI / REST API</text></g><g class="entity" data-entity="Registry" data-source-line="6" data-uid="ent0004" id="entity_Registry"><rect fill="#313139" height="36.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="134.1328" x="543.93" y="272.1"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114.1328" x="553.93" y="295.0951">Registry Service</text></g><g class="entity" data-entity="DB" data-source-line="7" data-uid="ent0005" id="entity_DB"><path d="M304.79,395.39 C304.79,385.39 367.0029,385.39 367.0029,385.39 C367.0029,385.39 429.2158,385.39 429.2158,395.39 L429.2158,436.9838 C429.2158,446.9838 367.0029,446.9838 367.0029,446.9838 C367.0029,446.9838 304.79,446.9838 304.79,436.9838 L304.79,395.39" fill="#313139" style="stroke:#E7E7E7;stroke-width:0.5;"/><path d="M304.79,395.39 C304.79,405.39 367.0029,405.39 367.0029,405.39 C367.0029,405.39 429.2158,405.39 429.2158,395.39" fill="none" style="stroke:#E7E7E7;stroke-width:0.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104.4258" x="314.79" y="422.3851">Model Registry</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91.6768" x="314.79" y="438.682">(PostgreSQL)</text></g><g class="entity" data-entity="HF" data-source-line="8" data-uid="ent0006" id="entity_HF"><rect fill="#313139" height="36.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="200.1748" x="800.91" y="398.04"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="180.1748" x="810.91" y="421.0351">HuggingFace Downloader</text></g><g class="entity" data-entity="Cache" data-source-line="9" data-uid="ent0007" id="entity_Cache"><rect fill="#313139" height="52.5938" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="132.4102" x="1096.79" y="523.99"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90.0225" x="1106.79" y="546.9851">Model Cache</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112.4102" x="1106.79" y="563.282">(Volume Mount)</text></g><g class="entity" data-entity="HFHub" data-source-line="10" data-uid="ent0008" id="entity_HFHub"><path d="M603.4632,535.2089 C607.326,529.9985 611.039,531.5915 613.9101,536.2578 C617.4587,530.6316 621.0399,529.3576 625.5436,535.2971 C628.7432,529.6359 632.5542,529.4466 637.0265,533.8443 C640.8402,527.285 646.4112,527.6964 649.692,534.355 C652.2587,528.6483 656.6088,528.8159 660.0168,533.5207 C663.3275,528.1493 668.6798,526.6791 672.6569,532.7869 C675.4127,526.6828 680.9899,526.5179 684.1252,532.4247 C688.214,528.3913 692.5777,529.2246 694.2825,534.915 C698.3347,528.7737 702.5561,529.4141 706.2532,535.2693 C710.6597,528.9943 714.9584,528.8484 718.8979,535.7186 C721.8907,529.8059 726.8372,530.5602 729.9257,535.6224 C733.5993,530.2843 739.2044,530.6457 742.4221,536.148 C750.7206,539.7248 749.6542,545.1478 744.2752,550.4917 C751.3402,556.2168 750.0225,561.7935 742.4415,565.7595 C738.9452,572.2239 734.4556,572.9315 729.9007,566.8148 C726.6271,572.7654 722.2665,572.4445 718.2435,567.626 C714.8314,573.1989 708.6784,573.6681 705.8928,566.994 C703.0754,573.2262 698.3365,573.6592 694.3214,568.1771 C691.9047,573.4297 686.2754,573.9021 682.7431,569.5175 C679.3891,574.3174 673.8574,574.1078 671.5365,568.4142 C669.1727,574.7019 664.0389,575.2304 660.122,569.9462 C656.751,575.0761 652.6732,573.9462 650.0851,569.1543 C644.4251,574.9956 640.4905,573.0542 636.826,566.941 C633.099,571.941 628.6061,572.8094 625.1275,566.6799 C623.1593,572.5019 618.067,573.0637 614.6628,568.0692 C610.7047,572.9749 605.7328,571.0747 603.6096,566.0308 C595.0088,565.0565 593.0347,558.2356 597.1295,551.5716 C591.6079,542.925 592.7413,537.5679 603.4632,535.2089" fill="#313139" style="stroke:#E7E7E7;stroke-width:0.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124.5029" x="608.75" y="555.1251">HuggingFace Hub</text></g><g class="entity" data-entity="GMN25" data-source-line="35" data-uid="ent0026" id="entity_GMN25"><path d="M1264.62,530.15 L1264.62,546.28 L1229.65,550.28 L1264.62,554.28 L1264.62,570.4156 A0,0 0 0 0 1264.62,570.4156 L1451.389,570.4156 A0,0 0 0 0 1451.389,570.4156 L1451.389,540.15 L1441.389,530.15 L1264.62,530.15 A0,0 0 0 0 1264.62,530.15" fill="#714137" style="stroke:#E7E7E7;stroke-width:0.5;"/><path d="M1441.389,530.15 L1441.389,540.15 L1451.389,540.15 L1441.389,530.15" fill="#714137" style="stroke:#E7E7E7;stroke-width:0.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165.769" x="1270.62" y="547.2169">Persistent volume shared</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162.2144" x="1270.62" y="562.3497">across container restarts</text></g><g class="link" data-entity-1="User" data-entity-2="API" data-link-type="dependency" data-source-line="12" data-uid="lnk9" id="link_User_API"><path d="M594.6,47.75 C552.82,56.39 447.9,83.13 480,128.8 C496.33,152.03 519.4183,162.5444 545.9483,168.5544" fill="none" id="User-to-API" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="551.8,169.88,543.9062,163.9904,546.9236,168.7753,542.1387,171.7927,551.8,169.88" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="215.814" x="481" y="124.8669">modelmora install model-x@v1.0</text></g><g class="link" data-entity-1="API" data-entity-2="User" data-link-type="dependency" data-source-line="32" data-uid="lnk24" id="link_API_User"><path d="M666.96,158.36 C680.41,151.36 693.15,141.78 701,128.8 C722.7,92.93 664.0098,64.8403 632.6798,52.6203" fill="none" id="API-to-User" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="627.09,50.44,634.0213,57.437,631.7482,52.2569,636.9283,49.9838,627.09,50.44" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="201.0684" x="707" y="124.8669">Model installed: model-x@v1.0</text></g><g class="link" data-entity-1="API" data-entity-2="Registry" data-link-type="dependency" data-source-line="13" data-uid="lnk10" id="link_API_Registry"><path d="M551.84,187.34 C511.7,196.47 469.24,213.28 489,242.1 C501.65,260.54 516.9142,269.9142 537.9442,276.7542" fill="none" id="API-to-Registry" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="543.65,278.61,536.3285,272.0224,538.8952,277.0635,533.8541,279.6301,543.65,278.61" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197.0376" x="490" y="238.1669">register_model(model-x, v1.0)</text></g><g class="link" data-entity-1="Registry" data-entity-2="API" data-link-type="dependency" data-source-line="30" data-uid="lnk23" id="link_Registry_API"><path d="M659.37,271.73 C672.25,264.6 684.62,254.93 692,242.1 C703.31,222.42 689.068,209.1496 666.298,198.0996" fill="none" id="Registry-to-API" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="660.9,195.48,667.2506,203.008,665.3983,197.663,670.7433,195.8107,660.9,195.48" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52.3301" x="697" y="238.1669">Success</text></g><g class="link" data-entity-1="Registry" data-entity-2="DB" data-link-type="dependency" data-source-line="14" data-uid="lnk11" id="link_Registry_DB"><path d="M543.48,291.84 C400.25,293.79 76.3,302.22 43,338.39 C6,378.59 194.2529,400.7663 298.4629,409.8963" fill="none" id="Registry-to-DB" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="304.44,410.42,295.8235,405.6498,299.4591,409.9836,295.1252,413.6192,304.44,410.42" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94.3896" x="44" y="351.4569">Check if exists</text></g><g class="link" data-entity-1="DB" data-entity-2="Registry" data-link-type="dependency" data-source-line="15" data-uid="lnk12" id="link_DB_Registry"><path d="M429.29,409.01 C472.95,402 530.67,387.09 572,355.39 C587.62,343.42 596.0252,328.7686 602.2252,314.2386" fill="none" id="DB-to-Registry" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="604.58,308.72,597.3687,315.428,602.6177,313.3188,604.7269,318.5678,604.58,308.72" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64.1685" x="589" y="351.4569">Not found</text></g><g class="link" data-entity-1="Registry" data-entity-2="DB" data-link-type="dependency" data-source-line="17" data-uid="lnk13" id="link_Registry_DB"><path d="M543.52,293.75 C428.11,298.73 202.86,311.78 179,338.39 C138.92,383.08 229.3384,401.6223 298.3984,409.4723" fill="none" id="Registry-to-DB-1" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="304.36,410.15,295.8694,405.1591,299.392,409.5853,294.9658,413.1079,304.36,410.15" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143.6602" x="180" y="351.4569">Save model metadata</text></g><g class="link" data-entity-1="DB" data-entity-2="Registry" data-link-type="dependency" data-source-line="18" data-uid="lnk14" id="link_DB_Registry"><path d="M429.55,411.55 C507.28,405.56 633.22,390.59 662,355.39 C674.79,339.75 662.5467,325.2668 644.7867,312.3068" fill="none" id="DB-to-Registry-1" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="639.94,308.77,644.8522,317.3064,643.979,311.7173,649.568,310.8441,639.94,308.77" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40.1616" x="668" y="351.4569">Saved</text></g><g class="link" data-entity-1="Registry" data-entity-2="DB" data-link-type="dependency" data-source-line="29" data-uid="lnk22" id="link_Registry_DB"><path d="M543.46,294.72 C478.32,299.65 386.4,311.31 364,338.39 C353.45,351.14 352.628,363.6816 355.818,379.2816" fill="none" id="Registry-to-DB-2" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="357.02,385.16,359.1358,375.5411,356.0183,380.2614,351.298,377.1438,357.02,385.16" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="202.8584" x="365" y="351.4569">Update status (DOWNLOADED)</text></g><g class="link" data-entity-1="Registry" data-entity-2="HF" data-link-type="dependency" data-source-line="20" data-uid="lnk15" id="link_Registry_HF"><path d="M652.24,308.87 C707.44,332.46 799.2527,371.7022 854.3827,395.2622" fill="none" id="Registry-to-HF" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="859.9,397.62,853.1959,390.405,855.3022,395.6551,850.0522,397.7614,859.9,397.62" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162.5" x="757" y="351.4569">download(model-x, v1.0)</text></g><g class="link" data-entity-1="HF" data-entity-2="Registry" data-link-type="dependency" data-source-line="28" data-uid="lnk21" id="link_HF_Registry"><path d="M916.01,397.8 C928.7,380.91 942.67,355.41 928,338.39 C896.43,301.78 767.6886,293.2774 684.3686,291.5074" fill="none" id="HF-to-Registry" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="678.37,291.38,687.283,295.5702,683.3689,291.4862,687.4529,287.572,678.37,291.38" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129.4731" x="935" y="351.4569">Download complete</text></g><g class="link" data-entity-1="HF" data-entity-2="HFHub" data-link-type="dependency" data-source-line="21" data-uid="lnk16" id="link_HF_HFHub"><path d="M800.69,422.01 C716.34,428.42 605.13,443.19 577,476.99 C560.8,496.45 576.4831,511.2578 602.7431,524.1378" fill="none" id="HF-to-HFHub" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="608.13,526.78,601.8111,519.2255,603.6409,524.5782,598.2882,526.408,608.13,526.78" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139.1724" x="578" y="490.0569">HTTP GET model files</text></g><g class="link" data-entity-1="HFHub" data-entity-2="HF" data-link-type="dependency" data-source-line="22" data-uid="lnk17" id="link_HFHub_HF"><path d="M694.28,526.65 C711.01,511.23 734.65,491.13 758,476.99 C786.42,459.77 815.08,447.3412 842.95,436.9212" fill="none" id="HFHub-to-HF" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="848.57,434.82,838.7391,434.2251,843.8866,436.571,841.5407,441.7185,848.57,434.82" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="238.2593" x="759" y="490.0569">Model files (safetensors, config.json)</text></g><g class="link" data-entity-1="HF" data-entity-2="HF" data-link-type="dependency" data-source-line="24" data-uid="lnk18" id="link_HF_HF"><path d="M1001.45,403.71 C1021.65,405.09 1036.09,409.25 1036.09,416.19 C1036.09,423.13 1027.6358,426.8681 1007.4358,428.2581" fill="none" id="HF-to-HF" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="1001.45,428.67,1010.7034,432.0427,1006.4382,428.3268,1010.1542,424.0616,1001.45,428.67" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114.7593" x="1042.09" y="420.7569">Verify checksums</text></g><g class="link" data-entity-1="HF" data-entity-2="Cache" data-link-type="dependency" data-source-line="25" data-uid="lnk19" id="link_HF_Cache"><path d="M930.5,434.79 C957.95,450.92 1000.2,475.08 1038,493.99 C1058.48,504.23 1075.7825,512.2064 1096.2525,521.1564" fill="none" id="HF-to-Cache" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="1101.75,523.56,1095.1062,516.2895,1097.1688,521.557,1091.9013,523.6195,1101.75,523.56" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="202.2236" x="1039" y="490.0569">Write to /models/model-x/v1.0/</text></g><g class="link" data-entity-1="Cache" data-entity-2="HF" data-link-type="dependency" data-source-line="26" data-uid="lnk20" id="link_Cache_HF"><path d="M1222.57,523.62 C1244.3,510.66 1260.4,494.09 1246,476.99 C1215.18,440.36 1097.6789,426.5341 1007.2189,421.0341" fill="none" id="Cache-to-HF" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="1001.23,420.67,1009.9707,425.2088,1006.2208,420.9734,1010.4562,417.2236,1001.23,420.67" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52.3301" x="1252" y="490.0569">Success</text></g></g></svg></div></div>

<hr />
<h2 id="7-deployment-architecture">7. Deployment Architecture<a class="headerlink" href="#7-deployment-architecture" title="Permanent link">&para;</a></h2>
<h3 id="71-single-node-deployment-mvp">7.1 Single-Node Deployment (MVP)<a class="headerlink" href="#71-single-node-deployment-mvp" title="Permanent link">&para;</a></h3>
<div class='puml-container'><div class="puml light" style=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="DESCRIPTION" height="1279px" preserveAspectRatio="xMidYMid meet" style="width:641px;height:1279px;background:#FFFFFF;" version="1.1" viewBox="0 0 641 1279" width="641px" zoomAndPan="magnify" class="diagram"><defs/><g><g class="cluster" data-entity="docker_host" data-source-line="108" data-uid="ent0002" id="cluster_docker_host"><rect fill="#FFFFFF" height="758.75" style="stroke:#A2A2A2;stroke-width:1;" width="628" x="7" y="514.97"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52.0693" x="294.9653" y="529.9651">Â«nodeÂ»</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="110.2656" x="10" y="548.1184">Docker Host</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="91.4531" x="10" y="563.0305">[Ubuntu 22.04]</text></g><g class="cluster" data-entity="container" data-source-line="108" data-uid="ent0003" id="cluster_container"><rect fill="#FFFFFF" height="417.27" style="stroke:#A2A2A2;stroke-width:1;" width="389" x="31" y="589.97"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52.0693" x="199.4653" y="604.9651">Â«nodeÂ»</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="194.0625" x="34" y="623.1184">ModelMora Container</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="51.8086" x="34" y="638.0305">[Docker]</text></g><g class="cluster" data-entity="volumes" data-source-line="108" data-uid="ent0007" id="cluster_volumes"><rect fill="#FFFFFF" height="179.48" style="stroke:#A2A2A2;stroke-width:1;" width="355" x="217" y="1070.24"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52.0693" x="368.4653" y="1085.2351">Â«nodeÂ»</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="146.0078" x="220" y="1103.3884">Docker Volumes</text></g><g class="cluster" data-entity="client" data-source-line="108" data-uid="ent0010" id="cluster_client"><rect fill="#FFFFFF" height="184.48" style="stroke:#A2A2A2;stroke-width:1;" width="176" x="112" y="252.49"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52.0693" x="173.9653" y="267.4851">Â«nodeÂ»</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="160.2266" x="115" y="285.6384">Client Application</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="61.6172" x="115" y="300.5505">[MiraVeja]</text></g><g class="cluster" data-entity="monitoring" data-source-line="108" data-uid="ent0012" id="cluster_monitoring"><rect fill="#FFFFFF" height="429.97" style="stroke:#A2A2A2;stroke-width:1;" width="172" x="312" y="7"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52.0693" x="371.9653" y="21.9951">Â«nodeÂ»</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="154.3125" x="315" y="40.1484">Monitoring Stack</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="111.627" x="315" y="55.0605">[Docker Compose]</text></g><g class="entity" data-entity="api" data-source-line="76" data-uid="ent0004" id="entity_api"><rect fill="#438DD5" height="117.7813" style="stroke:#3C7FC0;stroke-width:0.5;" width="155.9375" x="228.03" y="656.97"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="83.4668" x="264.2654" y="679.9651">Â«containerÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="100.3047" x="238.03" y="698.1184">ModelMora</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="5.5703" x="338.3347" y="698.1184">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="30.0625" x="343.905" y="698.1184">API</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="53.5605" x="279.2185" y="713.0305">[FastAPI]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="303.7737" y="728.8557">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28.2529" x="246.1399" y="745.1526">Port</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="274.3928" y="745.1526">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35.6289" x="278.843" y="745.1526">8000</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="314.4719" y="745.1526">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="46.9355" x="318.9221" y="745.1526">(REST)</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28.2529" x="241.2761" y="761.4495">Port</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="269.529" y="761.4495">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44.5361" x="273.9792" y="761.4495">50051</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="318.5154" y="761.4495">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47.7559" x="322.9655" y="761.4495">(gRPC)</text></g><g class="entity" data-entity="db" data-source-line="80" data-uid="ent0005" id="entity_db"><path d="M47.3,890.75 C47.3,880.75 110.0031,880.75 110.0031,880.75 C110.0031,880.75 172.7063,880.75 172.7063,890.75 L172.7063,981.2344 C172.7063,991.2344 110.0031,991.2344 110.0031,991.2344 C110.0031,991.2344 47.3,991.2344 47.3,981.2344 L47.3,890.75" fill="#438DD5" style="stroke:#3C7FC0;stroke-width:0.5;"/><path d="M47.3,890.75 C47.3,900.75 110.0031,900.75 110.0031,900.75 C110.0031,900.75 172.7063,900.75 172.7063,890.75" fill="none" style="stroke:#3C7FC0;stroke-width:0.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="83.4668" x="68.2697" y="917.7451">Â«containerÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="105.4063" x="57.3" y="935.8984">PostgreSQL</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="73.8984" x="61.1711" y="950.8105">[PostgreSQL</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="3.8145" x="135.0695" y="950.8105">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="19.9512" x="138.884" y="950.8105">15]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="107.778" y="966.6357">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28.2529" x="75.8371" y="982.9326">Port</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="104.09" y="982.9326">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35.6289" x="108.5402" y="982.9326">5432</text></g><g class="entity" data-entity="workers" data-source-line="76" data-uid="ent0006" id="entity_workers"><rect fill="#438DD5" height="101.4844" style="stroke:#3C7FC0;stroke-width:0.5;" width="196.8389" x="207.58" y="885.25"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="83.4668" x="264.266" y="908.2451">Â«containerÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="65.9141" x="225.0737" y="926.3984">Worker</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="5.5703" x="290.9877" y="926.3984">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="90.3672" x="296.558" y="926.3984">Processes</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="46.2773" x="231.4799" y="941.3105">[Python</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="3.8145" x="277.7572" y="941.3105">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="98.9473" x="281.5717" y="941.3105">Multiprocessing]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="303.7743" y="957.1357">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55.4463" x="217.58" y="973.4326">Isolated</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="273.0263" y="973.4326">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43.5928" x="277.4765" y="973.4326">model</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="321.0693" y="973.4326">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68.8994" x="325.5195" y="973.4326">execution</text></g><g class="entity" data-entity="model_cache" data-source-line="80" data-uid="ent0008" id="entity_model_cache"><path d="M232.73,1133.24 C232.73,1123.24 299.9995,1123.24 299.9995,1123.24 C299.9995,1123.24 367.2691,1123.24 367.2691,1133.24 L367.2691,1223.7244 C367.2691,1233.7244 299.9995,1233.7244 299.9995,1233.7244 C299.9995,1233.7244 232.73,1233.7244 232.73,1223.7244 L232.73,1133.24" fill="#438DD5" style="stroke:#3C7FC0;stroke-width:0.5;"/><path d="M232.73,1133.24 C232.73,1143.24 299.9995,1143.24 299.9995,1143.24 C299.9995,1143.24 367.2691,1143.24 367.2691,1133.24" fill="none" style="stroke:#3C7FC0;stroke-width:0.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="83.4668" x="258.2661" y="1160.2351">Â«containerÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="54.7031" x="242.73" y="1178.3884">Model</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="5.5703" x="297.4331" y="1178.3884">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="54.2656" x="303.0034" y="1178.3884">Cache</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="54.9258" x="272.5366" y="1193.3005">[Volume]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="297.7744" y="1209.1257">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55.6035" x="272.1978" y="1225.4226">/models</text></g><g class="entity" data-entity="results" data-source-line="80" data-uid="ent0009" id="entity_results"><path d="M402.03,1133.24 C402.03,1123.24 479.0027,1123.24 479.0027,1123.24 C479.0027,1123.24 555.9753,1123.24 555.9753,1133.24 L555.9753,1223.7244 C555.9753,1233.7244 479.0027,1233.7244 479.0027,1233.7244 C479.0027,1233.7244 402.03,1233.7244 402.03,1223.7244 L402.03,1133.24" fill="#438DD5" style="stroke:#3C7FC0;stroke-width:0.5;"/><path d="M402.03,1133.24 C402.03,1143.24 479.0027,1143.24 479.0027,1143.24 C479.0027,1143.24 555.9753,1143.24 555.9753,1133.24" fill="none" style="stroke:#3C7FC0;stroke-width:0.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="83.4668" x="437.2693" y="1160.2351">Â«containerÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="57.2188" x="412.03" y="1178.3884">Result</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="5.5703" x="469.2488" y="1178.3884">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="71.1563" x="474.8191" y="1178.3884">Storage</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="54.9258" x="451.5398" y="1193.3005">[Volume]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="476.7776" y="1209.1257">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51.9258" x="453.0398" y="1225.4226">/results</text></g><g class="entity" data-entity="miraveja" data-source-line="76" data-uid="ent0011" id="entity_miraveja"><rect fill="#438DD5" height="101.4844" style="stroke:#3C7FC0;stroke-width:0.5;" width="140.4688" x="131.77" y="319.49"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="83.4668" x="160.271" y="342.4851">Â«containerÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="79.6094" x="141.77" y="360.6384">MiraVeja</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="5.5703" x="221.3794" y="360.6384">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="35.2891" x="226.9497" y="360.6384">App</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="50.959" x="176.5249" y="375.5505">[Python]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="199.7793" y="391.3757">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36.832" x="161.0981" y="407.6726">gRPC</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="197.9302" y="407.6726">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40.5303" x="202.3804" y="407.6726">Client</text></g><g class="entity" data-entity="prometheus" data-source-line="76" data-uid="ent0013" id="entity_prometheus"><rect fill="#438DD5" height="101.4844" style="stroke:#3C7FC0;stroke-width:0.5;" width="128.9375" x="327.53" y="319.49"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="83.4668" x="350.2654" y="342.4851">Â«containerÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="108.9375" x="337.53" y="360.6384">Prometheus</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="48.2402" x="354.8943" y="375.5505">[Metrics</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="3.8145" x="403.1345" y="375.5505">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="22.1543" x="406.9489" y="375.5505">DB]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="389.7737" y="391.3757">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28.2529" x="357.8327" y="407.6726">Port</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="386.0857" y="407.6726">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35.6289" x="390.5359" y="407.6726">9090</text></g><g class="entity" data-entity="grafana" data-source-line="76" data-uid="ent0014" id="entity_grafana"><rect fill="#438DD5" height="101.4844" style="stroke:#3C7FC0;stroke-width:0.5;" width="105.4668" x="328.27" y="74"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="83.4668" x="339.27" y="96.9951">Â«containerÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="71.7656" x="345.1206" y="115.1484">Grafana</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="80.9297" x="340.5386" y="130.0605">[Dashboards]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="378.7783" y="145.8857">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28.2529" x="346.8374" y="162.1826">Port</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="375.0903" y="162.1826">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35.6289" x="379.5405" y="162.1826">3000</text></g><g class="link" data-entity-1="miraveja" data-entity-2="api" data-link-type="dependency" data-source-line="1773" data-uid="lnk15" id="link_miraveja_api"><path d="M216.28,421.34 C223.06,444.93 231.34,473.43 239,498.97 C255.07,552.54 271.6135,605.7274 285.2435,649.1374" fill="none" id="miraveja-to-api" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="287.64,656.77,288.1057,648.2387,282.3813,650.0361,287.64,656.77" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="38.3843" x="240" y="466.0369">gRPC</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.5259" x="278.3843" y="466.0369">Â </text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="69.1895" x="282.9102" y="466.0369">inference</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="64.2954" x="263.9021" y="481.1697">requests</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="66.6094" x="262.7451" y="495.3743">[gRPC/TLS]</text></g><g class="link" data-entity-1="api" data-entity-2="db" data-link-type="dependency" data-source-line="1773" data-uid="lnk16" id="link_api_db"><path d="M227.75,754 C205.28,767.54 182.23,784.57 165,804.75 C146.44,826.5 136.0082,847.874 127.2882,872.944" fill="none" id="api-to-db" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="124.66,880.5,130.1217,873.9296,124.4547,871.9585,124.66,880.5" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="81.8911" x="166" y="817.8169">Read/Write</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.5259" x="247.8911" y="817.8169">Â </text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="45.0557" x="252.417" y="817.8169">model</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="70.4146" x="196.5291" y="832.9497">metadata</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="78.5801" x="192.4463" y="847.1543">[PostgreSQL]</text></g><g class="link" data-entity-1="api" data-entity-2="workers" data-link-type="dependency" data-source-line="1773" data-uid="lnk17" id="link_api_workers"><path d="M306,775.03 C306,809.23 306,844.04 306,876.77" fill="none" id="api-to-workers" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="306,884.77,309,876.77,303,876.77,306,884.77" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="23.9053" x="307" y="825.3169">IPC</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.5259" x="330.9053" y="825.3169">Â </text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21.7026" x="335.4312" y="825.3169">via</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.5259" x="357.1338" y="825.3169">Â </text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="39.6221" x="361.6597" y="825.3169">pipes</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="44.1973" x="332.0422" y="839.5215">[Pickle]</text></g><g class="link" data-entity-1="workers" data-entity-2="model_cache" data-link-type="dependency" data-source-line="1773" data-uid="lnk18" id="link_workers_model_cache"><path d="M304.75,987.11 C303.76,1026.76 302.5801,1074.0425 301.5601,1114.8125" fill="none" id="workers-to-model_cache" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="301.36,1122.81,304.5591,1114.8875,298.561,1114.7375,301.36,1122.81" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="35.293" x="304" y="1036.3069">Load</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.5259" x="339.293" y="1036.3069">Â </text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="45.0557" x="343.8188" y="1036.3069">model</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.5259" x="388.8745" y="1036.3069">Â </text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31.1226" x="393.4004" y="1036.3069">files</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="73.6992" x="327.4119" y="1050.5115">[Filesystem]</text></g><g class="link" data-entity-1="api" data-entity-2="results" data-link-type="dependency" data-source-line="1773" data-uid="lnk19" id="link_api_results"><path d="M384.31,772.24 C394.17,782.09 403.17,793 410,804.75 C468.82,906.05 479.1088,1038.6805 479.9788,1114.9705" fill="none" id="api-to-results" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="480.07,1122.97,482.9786,1114.9363,476.979,1115.0047,480.07,1122.97" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="39.7363" x="473" y="933.5569">Store</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.5259" x="512.7363" y="933.5569">Â </text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="37.7622" x="517.2622" y="933.5569">large</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.5259" x="555.0244" y="933.5569">Â </text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="56.9131" x="559.5503" y="933.5569">outputs</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="73.6992" x="507.8821" y="947.7615">[Filesystem]</text></g><g class="link" data-entity-1="prometheus" data-entity-2="api" data-link-type="dependency" data-source-line="1773" data-uid="lnk20" id="link_prometheus_api"><path d="M379.49,421.19 C363.87,483.65 339.1019,582.5893 322.5519,648.7293" fill="none" id="prometheus-to-api" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="320.61,656.49,325.4622,649.4575,319.6417,648.001,320.61,656.49" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="50.375" x="372" y="473.5369">Scrape</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.5259" x="422.375" y="473.5369">Â </text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="59.6362" x="426.9009" y="473.5369">/metrics</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="40.2832" x="409.127" y="487.7415">[HTTP]</text></g><g class="link" data-entity-1="grafana" data-entity-2="prometheus" data-link-type="dependency" data-source-line="1773" data-uid="lnk21" id="link_grafana_prometheus"><path d="M383.27,175.9 C385.16,217.8 387.4775,269.2582 389.3775,311.1482" fill="none" id="grafana-to-prometheus" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="389.74,319.14,392.3744,311.0123,386.3806,311.2841,389.74,319.14" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="44.0083" x="386" y="218.5569">Query</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.5259" x="430.0083" y="218.5569">Â </text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="54.8882" x="434.5342" y="218.5569">metrics</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="56.6953" x="409.3635" y="232.7615">[PromQL]</text></g></g></svg></div><div class="puml dark" style=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="DESCRIPTION" height="1279px" preserveAspectRatio="xMidYMid meet" style="width:641px;height:1279px;background:#1B1B1B;" version="1.1" viewBox="0 0 641 1279" width="641px" zoomAndPan="magnify" class="diagram"><defs/><g><rect fill="#1B1B1B" height="1279" style="stroke:none;stroke-width:1;" width="641" x="0" y="0"/><g class="cluster" data-entity="docker_host" data-source-line="108" data-uid="ent0002" id="cluster_docker_host"><rect fill="none" height="758.75" style="stroke:#A2A2A2;stroke-width:1;" width="628" x="7" y="514.97"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52.0693" x="294.9653" y="529.9651">Â«nodeÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="110.2656" x="10" y="548.1184">Docker Host</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="91.4531" x="10" y="563.0305">[Ubuntu 22.04]</text></g><g class="cluster" data-entity="container" data-source-line="108" data-uid="ent0003" id="cluster_container"><rect fill="none" height="417.27" style="stroke:#A2A2A2;stroke-width:1;" width="389" x="31" y="589.97"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52.0693" x="199.4653" y="604.9651">Â«nodeÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="194.0625" x="34" y="623.1184">ModelMora Container</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="51.8086" x="34" y="638.0305">[Docker]</text></g><g class="cluster" data-entity="volumes" data-source-line="108" data-uid="ent0007" id="cluster_volumes"><rect fill="none" height="179.48" style="stroke:#A2A2A2;stroke-width:1;" width="355" x="217" y="1070.24"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52.0693" x="368.4653" y="1085.2351">Â«nodeÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="146.0078" x="220" y="1103.3884">Docker Volumes</text></g><g class="cluster" data-entity="client" data-source-line="108" data-uid="ent0010" id="cluster_client"><rect fill="none" height="184.48" style="stroke:#A2A2A2;stroke-width:1;" width="176" x="112" y="252.49"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52.0693" x="173.9653" y="267.4851">Â«nodeÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="160.2266" x="115" y="285.6384">Client Application</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="61.6172" x="115" y="300.5505">[MiraVeja]</text></g><g class="cluster" data-entity="monitoring" data-source-line="108" data-uid="ent0012" id="cluster_monitoring"><rect fill="none" height="429.97" style="stroke:#A2A2A2;stroke-width:1;" width="172" x="312" y="7"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52.0693" x="371.9653" y="21.9951">Â«nodeÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="154.3125" x="315" y="40.1484">Monitoring Stack</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="111.627" x="315" y="55.0605">[Docker Compose]</text></g><g class="entity" data-entity="api" data-source-line="76" data-uid="ent0004" id="entity_api"><rect fill="#1183CB" height="117.7813" style="stroke:#0065AD;stroke-width:0.5;" width="155.9375" x="228.03" y="656.97"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="83.4668" x="264.2654" y="679.9651">Â«containerÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="100.3047" x="238.03" y="698.1184">ModelMora</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="5.5703" x="338.3347" y="698.1184">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="30.0625" x="343.905" y="698.1184">API</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="53.5605" x="279.2185" y="713.0305">[FastAPI]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="303.7737" y="728.8557">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28.2529" x="246.1399" y="745.1526">Port</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="274.3928" y="745.1526">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35.6289" x="278.843" y="745.1526">8000</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="314.4719" y="745.1526">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="46.9355" x="318.9221" y="745.1526">(REST)</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28.2529" x="241.2761" y="761.4495">Port</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="269.529" y="761.4495">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44.5361" x="273.9792" y="761.4495">50051</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="318.5154" y="761.4495">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47.7559" x="322.9655" y="761.4495">(gRPC)</text></g><g class="entity" data-entity="db" data-source-line="80" data-uid="ent0005" id="entity_db"><path d="M47.3,890.75 C47.3,880.75 110.0031,880.75 110.0031,880.75 C110.0031,880.75 172.7063,880.75 172.7063,890.75 L172.7063,981.2344 C172.7063,991.2344 110.0031,991.2344 110.0031,991.2344 C110.0031,991.2344 47.3,991.2344 47.3,981.2344 L47.3,890.75" fill="#1183CB" style="stroke:#0065AD;stroke-width:0.5;"/><path d="M47.3,890.75 C47.3,900.75 110.0031,900.75 110.0031,900.75 C110.0031,900.75 172.7063,900.75 172.7063,890.75" fill="none" style="stroke:#0065AD;stroke-width:0.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="83.4668" x="68.2697" y="917.7451">Â«containerÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="105.4063" x="57.3" y="935.8984">PostgreSQL</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="73.8984" x="61.1711" y="950.8105">[PostgreSQL</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="3.8145" x="135.0695" y="950.8105">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="19.9512" x="138.884" y="950.8105">15]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="107.778" y="966.6357">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28.2529" x="75.8371" y="982.9326">Port</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="104.09" y="982.9326">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35.6289" x="108.5402" y="982.9326">5432</text></g><g class="entity" data-entity="workers" data-source-line="76" data-uid="ent0006" id="entity_workers"><rect fill="#1183CB" height="101.4844" style="stroke:#0065AD;stroke-width:0.5;" width="196.8389" x="207.58" y="885.25"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="83.4668" x="264.266" y="908.2451">Â«containerÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="65.9141" x="225.0737" y="926.3984">Worker</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="5.5703" x="290.9877" y="926.3984">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="90.3672" x="296.558" y="926.3984">Processes</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="46.2773" x="231.4799" y="941.3105">[Python</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="3.8145" x="277.7572" y="941.3105">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="98.9473" x="281.5717" y="941.3105">Multiprocessing]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="303.7743" y="957.1357">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55.4463" x="217.58" y="973.4326">Isolated</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="273.0263" y="973.4326">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43.5928" x="277.4765" y="973.4326">model</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="321.0693" y="973.4326">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68.8994" x="325.5195" y="973.4326">execution</text></g><g class="entity" data-entity="model_cache" data-source-line="80" data-uid="ent0008" id="entity_model_cache"><path d="M232.73,1133.24 C232.73,1123.24 299.9995,1123.24 299.9995,1123.24 C299.9995,1123.24 367.2691,1123.24 367.2691,1133.24 L367.2691,1223.7244 C367.2691,1233.7244 299.9995,1233.7244 299.9995,1233.7244 C299.9995,1233.7244 232.73,1233.7244 232.73,1223.7244 L232.73,1133.24" fill="#1183CB" style="stroke:#0065AD;stroke-width:0.5;"/><path d="M232.73,1133.24 C232.73,1143.24 299.9995,1143.24 299.9995,1143.24 C299.9995,1143.24 367.2691,1143.24 367.2691,1133.24" fill="none" style="stroke:#0065AD;stroke-width:0.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="83.4668" x="258.2661" y="1160.2351">Â«containerÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="54.7031" x="242.73" y="1178.3884">Model</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="5.5703" x="297.4331" y="1178.3884">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="54.2656" x="303.0034" y="1178.3884">Cache</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="54.9258" x="272.5366" y="1193.3005">[Volume]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="297.7744" y="1209.1257">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55.6035" x="272.1978" y="1225.4226">/models</text></g><g class="entity" data-entity="results" data-source-line="80" data-uid="ent0009" id="entity_results"><path d="M402.03,1133.24 C402.03,1123.24 479.0027,1123.24 479.0027,1123.24 C479.0027,1123.24 555.9753,1123.24 555.9753,1133.24 L555.9753,1223.7244 C555.9753,1233.7244 479.0027,1233.7244 479.0027,1233.7244 C479.0027,1233.7244 402.03,1233.7244 402.03,1223.7244 L402.03,1133.24" fill="#1183CB" style="stroke:#0065AD;stroke-width:0.5;"/><path d="M402.03,1133.24 C402.03,1143.24 479.0027,1143.24 479.0027,1143.24 C479.0027,1143.24 555.9753,1143.24 555.9753,1133.24" fill="none" style="stroke:#0065AD;stroke-width:0.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="83.4668" x="437.2693" y="1160.2351">Â«containerÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="57.2188" x="412.03" y="1178.3884">Result</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="5.5703" x="469.2488" y="1178.3884">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="71.1563" x="474.8191" y="1178.3884">Storage</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="54.9258" x="451.5398" y="1193.3005">[Volume]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="476.7776" y="1209.1257">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51.9258" x="453.0398" y="1225.4226">/results</text></g><g class="entity" data-entity="miraveja" data-source-line="76" data-uid="ent0011" id="entity_miraveja"><rect fill="#1183CB" height="101.4844" style="stroke:#0065AD;stroke-width:0.5;" width="140.4688" x="131.77" y="319.49"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="83.4668" x="160.271" y="342.4851">Â«containerÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="79.6094" x="141.77" y="360.6384">MiraVeja</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="5.5703" x="221.3794" y="360.6384">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="35.2891" x="226.9497" y="360.6384">App</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="50.959" x="176.5249" y="375.5505">[Python]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="199.7793" y="391.3757">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36.832" x="161.0981" y="407.6726">gRPC</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="197.9302" y="407.6726">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40.5303" x="202.3804" y="407.6726">Client</text></g><g class="entity" data-entity="prometheus" data-source-line="76" data-uid="ent0013" id="entity_prometheus"><rect fill="#1183CB" height="101.4844" style="stroke:#0065AD;stroke-width:0.5;" width="128.9375" x="327.53" y="319.49"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="83.4668" x="350.2654" y="342.4851">Â«containerÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="108.9375" x="337.53" y="360.6384">Prometheus</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="48.2402" x="354.8943" y="375.5505">[Metrics</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="3.8145" x="403.1345" y="375.5505">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="22.1543" x="406.9489" y="375.5505">DB]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="389.7737" y="391.3757">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28.2529" x="357.8327" y="407.6726">Port</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="386.0857" y="407.6726">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35.6289" x="390.5359" y="407.6726">9090</text></g><g class="entity" data-entity="grafana" data-source-line="76" data-uid="ent0014" id="entity_grafana"><rect fill="#1183CB" height="101.4844" style="stroke:#0065AD;stroke-width:0.5;" width="105.4668" x="328.27" y="74"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="83.4668" x="339.27" y="96.9951">Â«containerÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="71.7656" x="345.1206" y="115.1484">Grafana</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="80.9297" x="340.5386" y="130.0605">[Dashboards]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="378.7783" y="145.8857">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28.2529" x="346.8374" y="162.1826">Port</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="375.0903" y="162.1826">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35.6289" x="379.5405" y="162.1826">3000</text></g><g class="link" data-entity-1="miraveja" data-entity-2="api" data-link-type="dependency" data-source-line="1773" data-uid="lnk15" id="link_miraveja_api"><path d="M216.28,421.34 C223.06,444.93 231.34,473.43 239,498.97 C255.07,552.54 271.6135,605.7274 285.2435,649.1374" fill="none" id="miraveja-to-api" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="287.64,656.77,288.1057,648.2387,282.3813,650.0361,287.64,656.77" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="38.3843" x="240" y="466.0369">gRPC</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.5259" x="278.3843" y="466.0369">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="69.1895" x="282.9102" y="466.0369">inference</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="64.2954" x="263.9021" y="481.1697">requests</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="66.6094" x="262.7451" y="495.3743">[gRPC/TLS]</text></g><g class="link" data-entity-1="api" data-entity-2="db" data-link-type="dependency" data-source-line="1773" data-uid="lnk16" id="link_api_db"><path d="M227.75,754 C205.28,767.54 182.23,784.57 165,804.75 C146.44,826.5 136.0082,847.874 127.2882,872.944" fill="none" id="api-to-db" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="124.66,880.5,130.1217,873.9296,124.4547,871.9585,124.66,880.5" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="81.8911" x="166" y="817.8169">Read/Write</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.5259" x="247.8911" y="817.8169">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="45.0557" x="252.417" y="817.8169">model</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="70.4146" x="196.5291" y="832.9497">metadata</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="78.5801" x="192.4463" y="847.1543">[PostgreSQL]</text></g><g class="link" data-entity-1="api" data-entity-2="workers" data-link-type="dependency" data-source-line="1773" data-uid="lnk17" id="link_api_workers"><path d="M306,775.03 C306,809.23 306,844.04 306,876.77" fill="none" id="api-to-workers" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="306,884.77,309,876.77,303,876.77,306,884.77" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="23.9053" x="307" y="825.3169">IPC</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.5259" x="330.9053" y="825.3169">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21.7026" x="335.4312" y="825.3169">via</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.5259" x="357.1338" y="825.3169">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="39.6221" x="361.6597" y="825.3169">pipes</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="44.1973" x="332.0422" y="839.5215">[Pickle]</text></g><g class="link" data-entity-1="workers" data-entity-2="model_cache" data-link-type="dependency" data-source-line="1773" data-uid="lnk18" id="link_workers_model_cache"><path d="M304.75,987.11 C303.76,1026.76 302.5801,1074.0425 301.5601,1114.8125" fill="none" id="workers-to-model_cache" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="301.36,1122.81,304.5591,1114.8875,298.561,1114.7375,301.36,1122.81" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="35.293" x="304" y="1036.3069">Load</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.5259" x="339.293" y="1036.3069">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="45.0557" x="343.8188" y="1036.3069">model</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.5259" x="388.8745" y="1036.3069">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31.1226" x="393.4004" y="1036.3069">files</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="73.6992" x="327.4119" y="1050.5115">[Filesystem]</text></g><g class="link" data-entity-1="api" data-entity-2="results" data-link-type="dependency" data-source-line="1773" data-uid="lnk19" id="link_api_results"><path d="M384.31,772.24 C394.17,782.09 403.17,793 410,804.75 C468.82,906.05 479.1088,1038.6805 479.9788,1114.9705" fill="none" id="api-to-results" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="480.07,1122.97,482.9786,1114.9363,476.979,1115.0047,480.07,1122.97" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="39.7363" x="473" y="933.5569">Store</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.5259" x="512.7363" y="933.5569">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="37.7622" x="517.2622" y="933.5569">large</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.5259" x="555.0244" y="933.5569">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="56.9131" x="559.5503" y="933.5569">outputs</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="73.6992" x="507.8821" y="947.7615">[Filesystem]</text></g><g class="link" data-entity-1="prometheus" data-entity-2="api" data-link-type="dependency" data-source-line="1773" data-uid="lnk20" id="link_prometheus_api"><path d="M379.49,421.19 C363.87,483.65 339.1019,582.5893 322.5519,648.7293" fill="none" id="prometheus-to-api" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="320.61,656.49,325.4622,649.4575,319.6417,648.001,320.61,656.49" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="50.375" x="372" y="473.5369">Scrape</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.5259" x="422.375" y="473.5369">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="59.6362" x="426.9009" y="473.5369">/metrics</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="40.2832" x="409.127" y="487.7415">[HTTP]</text></g><g class="link" data-entity-1="grafana" data-entity-2="prometheus" data-link-type="dependency" data-source-line="1773" data-uid="lnk21" id="link_grafana_prometheus"><path d="M383.27,175.9 C385.16,217.8 387.4775,269.2582 389.3775,311.1482" fill="none" id="grafana-to-prometheus" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="389.74,319.14,392.3744,311.0123,386.3806,311.2841,389.74,319.14" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="44.0083" x="386" y="218.5569">Query</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.5259" x="430.0083" y="218.5569">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="54.8882" x="434.5342" y="218.5569">metrics</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="56.6953" x="409.3635" y="232.7615">[PromQL]</text></g></g></svg></div></div>

<h3 id="72-kubernetes-deployment-production">7.2 Kubernetes Deployment (Production)<a class="headerlink" href="#72-kubernetes-deployment-production" title="Permanent link">&para;</a></h3>
<div class='puml-container'><div class="puml light" style=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="DESCRIPTION" height="1580px" preserveAspectRatio="xMidYMid meet" style="width:1452px;height:1580px;background:#FFFFFF;" version="1.1" viewBox="0 0 1452 1580" width="1452px" zoomAndPan="magnify" class="diagram"><defs/><g><g class="cluster" data-entity="k8s" data-source-line="108" data-uid="ent0002" id="cluster_k8s"><rect fill="#FFFFFF" height="1334.42" style="stroke:#A2A2A2;stroke-width:1;" width="1077" x="7" y="240.49"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52.0693" x="519.4653" y="255.4851">Â«nodeÂ»</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="174.3516" x="10" y="273.6384">Kubernetes Cluster</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="43.1836" x="10" y="288.5505">[v1.28]</text></g><g class="cluster" data-entity="namespace" data-source-line="108" data-uid="ent0003" id="cluster_namespace"><rect fill="#FFFFFF" height="992.94" style="stroke:#A2A2A2;stroke-width:1;" width="1029" x="31" y="315.49"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52.0693" x="519.4653" y="330.4851">Â«nodeÂ»</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="217.5938" x="34" y="348.6384">Namespace: modelmora</text></g><g class="cluster" data-entity="ingress_node" data-source-line="108" data-uid="ent0004" id="cluster_ingress_node"><rect fill="#FFFFFF" height="170.48" style="stroke:#A2A2A2;stroke-width:1;" width="176" x="602" y="376.49"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52.0693" x="663.9653" y="391.4851">Â«nodeÂ»</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="66.5859" x="605" y="409.6384">Ingress</text></g><g class="cluster" data-entity="modelmora_deploy" data-source-line="108" data-uid="ent0006" id="cluster_modelmora_deploy"><rect fill="#FFFFFF" height="184.48" style="stroke:#A2A2A2;stroke-width:1;" width="678" x="351" y="843.46"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52.0693" x="663.9653" y="858.4551">Â«nodeÂ»</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="257.2031" x="354" y="876.6084">Deployment: modelmora-api</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="75.0645" x="354" y="891.5205">[Replicas: 3]</text></g><g class="cluster" data-entity="service" data-source-line="108" data-uid="ent0010" id="cluster_service"><rect fill="#FFFFFF" height="170.49" style="stroke:#A2A2A2;stroke-width:1;" width="190" x="595" y="609.97"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52.0693" x="663.9653" y="624.9651">Â«nodeÂ»</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="66.5156" x="598" y="643.1184">Service</text></g><g class="cluster" data-entity="db_stateful" data-source-line="108" data-uid="ent0012" id="cluster_db_stateful"><rect fill="#FFFFFF" height="179.49" style="stroke:#A2A2A2;stroke-width:1;" width="226" x="128" y="1104.94"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52.0693" x="214.9653" y="1119.9351">Â«nodeÂ»</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="210.5703" x="131" y="1138.0884">StatefulSet: postgresql</text></g><g class="cluster" data-entity="redis_deploy" data-source-line="108" data-uid="ent0014" id="cluster_redis_deploy"><rect fill="#FFFFFF" height="179.49" style="stroke:#A2A2A2;stroke-width:1;" width="182" x="412" y="1104.94"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52.0693" x="476.9653" y="1119.9351">Â«nodeÂ»</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="166.2266" x="415" y="1138.0884">Deployment: redis</text></g><g class="cluster" data-entity="storage" data-source-line="108" data-uid="ent0016" id="cluster_storage"><rect fill="#FFFFFF" height="179.48" style="stroke:#A2A2A2;stroke-width:1;" width="425" x="401" y="1371.43"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52.0693" x="587.4653" y="1386.4251">Â«nodeÂ»</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="175.4063" x="404" y="1404.5784">Persistent Volumes</text></g><g class="cluster" data-entity="s3" data-source-line="108" data-uid="ent0019" id="cluster_s3"><rect fill="#FFFFFF" height="193.49" style="stroke:#A2A2A2;stroke-width:1;" width="222" x="1130" y="1090.94"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52.0693" x="1214.9653" y="1105.9351">Â«nodeÂ»</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="135.25" x="1133" y="1124.0884">Object Storage</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="102.0703" x="1133" y="1139.0005">[AWS S3 / MinIO]</text></g><g class="cluster" data-entity="external_client" data-source-line="108" data-uid="ent0021" id="cluster_external_client"><rect fill="#FFFFFF" height="170.49" style="stroke:#A2A2A2;stroke-width:1;" width="159" x="611" y="7"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52.0693" x="664.4653" y="21.9951">Â«nodeÂ»</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="143.0078" x="614" y="40.1484">External Clients</text></g><g class="entity" data-entity="ingress" data-source-line="76" data-uid="ent0005" id="entity_ingress"><rect fill="#438DD5" height="101.4844" style="stroke:#3C7FC0;stroke-width:0.5;" width="144.1953" x="617.9" y="429.49"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="83.4668" x="648.2643" y="452.4851">Â«containerÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="52.0391" x="627.9" y="470.6384">Nginx</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="5.5703" x="679.9391" y="470.6384">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="66.5859" x="685.5094" y="470.6384">Ingress</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="48.2637" x="631.9723" y="485.5505">[Ingress</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="3.8145" x="680.2359" y="485.5505">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="63.9727" x="684.0504" y="485.5505">Controller]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="687.7726" y="501.3757">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="25.2383" x="634.3258" y="517.6726">TLS</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="659.5641" y="517.6726">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81.6553" x="664.0143" y="517.6726">termination</text></g><g class="entity" data-entity="pod1" data-source-line="76" data-uid="ent0007" id="entity_pod1"><rect fill="#438DD5" height="101.4844" style="stroke:#3C7FC0;stroke-width:0.5;" width="192.04" x="366.98" y="910.46"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="83.4668" x="421.2666" y="933.4551">Â«containerÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="34.1719" x="437.5625" y="951.6084">Pod</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="5.5703" x="471.7344" y="951.6084">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="11.1328" x="477.3047" y="951.6084">1</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="75.375" x="425.3125" y="966.5205">[ModelMora]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="460.7749" y="982.3457">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36.0117" x="376.98" y="998.6426">REST</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="412.9917" y="998.6426">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="11.7305" x="417.4419" y="998.6426">+</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="429.1724" y="998.6426">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36.832" x="433.6226" y="998.6426">gRPC</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="470.4546" y="998.6426">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="11.7305" x="474.9048" y="998.6426">+</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="486.6353" y="998.6426">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57.9346" x="491.0855" y="998.6426">Workers</text></g><g class="entity" data-entity="pod2" data-source-line="76" data-uid="ent0008" id="entity_pod2"><rect fill="#438DD5" height="101.4844" style="stroke:#3C7FC0;stroke-width:0.5;" width="192.04" x="593.98" y="910.46"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="83.4668" x="648.2666" y="933.4551">Â«containerÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="34.1719" x="664.5625" y="951.6084">Pod</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="5.5703" x="698.7344" y="951.6084">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="11.1328" x="704.3047" y="951.6084">2</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="75.375" x="652.3125" y="966.5205">[ModelMora]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="687.7749" y="982.3457">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36.0117" x="603.98" y="998.6426">REST</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="639.9917" y="998.6426">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="11.7305" x="644.4419" y="998.6426">+</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="656.1724" y="998.6426">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36.832" x="660.6226" y="998.6426">gRPC</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="697.4546" y="998.6426">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="11.7305" x="701.9048" y="998.6426">+</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="713.6353" y="998.6426">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57.9346" x="718.0855" y="998.6426">Workers</text></g><g class="entity" data-entity="pod3" data-source-line="76" data-uid="ent0009" id="entity_pod3"><rect fill="#438DD5" height="101.4844" style="stroke:#3C7FC0;stroke-width:0.5;" width="192.04" x="820.98" y="910.46"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="83.4668" x="875.2666" y="933.4551">Â«containerÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="34.1719" x="891.5625" y="951.6084">Pod</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="5.5703" x="925.7344" y="951.6084">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="11.1328" x="931.3047" y="951.6084">3</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="75.375" x="879.3125" y="966.5205">[ModelMora]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="914.7749" y="982.3457">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36.0117" x="830.98" y="998.6426">REST</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="866.9917" y="998.6426">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="11.7305" x="871.4419" y="998.6426">+</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="883.1724" y="998.6426">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36.832" x="887.6226" y="998.6426">gRPC</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="924.4546" y="998.6426">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="11.7305" x="928.9048" y="998.6426">+</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="940.6353" y="998.6426">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57.9346" x="945.0855" y="998.6426">Workers</text></g><g class="entity" data-entity="svc" data-source-line="76" data-uid="ent0011" id="entity_svc"><rect fill="#438DD5" height="101.4844" style="stroke:#3C7FC0;stroke-width:0.5;" width="157.8828" x="611.06" y="662.97"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="83.4668" x="648.268" y="685.9651">Â«containerÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="137.8828" x="621.06" y="704.1184">modelmora-svc</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="62.7305" x="658.6362" y="719.0305">[ClusterIP]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="687.7763" y="734.8557">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28.2529" x="629.1171" y="751.1526">Port</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="657.3701" y="751.1526">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40.0791" x="661.8203" y="751.1526">8000,</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="701.8994" y="751.1526">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44.5361" x="706.3496" y="751.1526">50051</text></g><g class="entity" data-entity="postgres" data-source-line="80" data-uid="ent0013" id="entity_postgres"><path d="M195.3,1167.94 C195.3,1157.94 258.0031,1157.94 258.0031,1157.94 C258.0031,1157.94 320.7063,1157.94 320.7063,1167.94 L320.7063,1258.4244 C320.7063,1268.4244 258.0031,1268.4244 258.0031,1268.4244 C258.0031,1268.4244 195.3,1268.4244 195.3,1258.4244 L195.3,1167.94" fill="#438DD5" style="stroke:#3C7FC0;stroke-width:0.5;"/><path d="M195.3,1167.94 C195.3,1177.94 258.0031,1177.94 258.0031,1177.94 C258.0031,1177.94 320.7063,1177.94 320.7063,1167.94" fill="none" style="stroke:#3C7FC0;stroke-width:0.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="83.4668" x="216.2697" y="1194.9351">Â«containerÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="105.4063" x="205.3" y="1213.0884">PostgreSQL</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="64.4707" x="212.7834" y="1228.0005">[Persistent</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="3.8145" x="277.2541" y="1228.0005">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="22.1543" x="281.0686" y="1228.0005">DB]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="255.778" y="1243.8257">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28.2529" x="223.8371" y="1260.1226">Port</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="252.09" y="1260.1226">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35.6289" x="256.5402" y="1260.1226">5432</text></g><g class="entity" data-entity="redis" data-source-line="80" data-uid="ent0015" id="entity_redis"><path d="M436.34,1167.94 C436.34,1157.94 506.0031,1157.94 506.0031,1157.94 C506.0031,1157.94 575.6662,1157.94 575.6662,1167.94 L575.6662,1258.4244 C575.6662,1268.4244 506.0031,1268.4244 506.0031,1268.4244 C506.0031,1268.4244 436.34,1268.4244 436.34,1258.4244 L436.34,1167.94" fill="#438DD5" style="stroke:#3C7FC0;stroke-width:0.5;"/><path d="M436.34,1167.94 C436.34,1177.94 506.0031,1177.94 506.0031,1177.94 C506.0031,1177.94 575.6662,1177.94 575.6662,1167.94" fill="none" style="stroke:#3C7FC0;stroke-width:0.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="83.4668" x="464.2697" y="1194.9351">Â«containerÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="49.6328" x="481.1867" y="1213.0884">Redis</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="71.4082" x="446.34" y="1228.0005">[Distributed</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="3.8145" x="517.7482" y="1228.0005">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="44.1035" x="521.5627" y="1228.0005">Queue]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="503.778" y="1243.8257">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28.2529" x="471.8371" y="1260.1226">Port</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="500.09" y="1260.1226">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35.6289" x="504.5402" y="1260.1226">6379</text></g><g class="entity" data-entity="pvc_models" data-source-line="80" data-uid="ent0017" id="entity_pvc_models"><path d="M646.23,1434.43 C646.23,1424.43 728.0039,1424.43 728.0039,1424.43 C728.0039,1424.43 809.7779,1424.43 809.7779,1434.43 L809.7779,1524.9144 C809.7779,1534.9144 728.0039,1534.9144 728.0039,1534.9144 C728.0039,1534.9144 646.23,1534.9144 646.23,1524.9144 L646.23,1434.43" fill="#438DD5" style="stroke:#3C7FC0;stroke-width:0.5;"/><path d="M646.23,1434.43 C646.23,1444.43 728.0039,1444.43 728.0039,1444.43 C728.0039,1444.43 809.7779,1444.43 809.7779,1434.43" fill="none" style="stroke:#3C7FC0;stroke-width:0.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="83.4668" x="686.2705" y="1461.4251">Â«containerÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="42.25" x="671.6055" y="1479.5784">PVC:</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="5.5703" x="713.8555" y="1479.5784">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="64.9766" x="719.4258" y="1479.5784">models</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="104.6895" x="675.6592" y="1494.4905">[ReadWriteMany]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="725.7788" y="1510.3157">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49.5947" x="656.23" y="1526.6126">Shared</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="705.8247" y="1526.6126">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43.5928" x="710.2749" y="1526.6126">model</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="753.8677" y="1526.6126">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41.46" x="758.3179" y="1526.6126">cache</text></g><g class="entity" data-entity="pvc_db" data-source-line="80" data-uid="ent0018" id="entity_pvc_db"><path d="M416.75,1434.43 C416.75,1424.43 513.9961,1424.43 513.9961,1424.43 C513.9961,1424.43 611.2422,1424.43 611.2422,1434.43 L611.2422,1524.9144 C611.2422,1534.9144 513.9961,1534.9144 513.9961,1534.9144 C513.9961,1534.9144 416.75,1534.9144 416.75,1524.9144 L416.75,1434.43" fill="#438DD5" style="stroke:#3C7FC0;stroke-width:0.5;"/><path d="M416.75,1434.43 C416.75,1444.43 513.9961,1444.43 513.9961,1444.43 C513.9961,1444.43 611.2422,1444.43 611.2422,1434.43" fill="none" style="stroke:#3C7FC0;stroke-width:0.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="83.4668" x="472.2627" y="1461.4251">Â«containerÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="42.25" x="426.75" y="1479.5784">PVC:</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="5.5703" x="469" y="1479.5784">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="126.6719" x="474.5703" y="1479.5784">postgres-data</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="103.3066" x="462.3428" y="1494.4905">[ReadWriteOnce]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="511.771" y="1510.3157">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66.8008" x="451.7788" y="1526.6126">Database</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="518.5796" y="1526.6126">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53.1836" x="523.0298" y="1526.6126">storage</text></g><g class="entity" data-entity="s3_bucket" data-source-line="80" data-uid="ent0020" id="entity_s3_bucket"><path d="M1145.62,1167.94 C1145.62,1157.94 1240.9989,1157.94 1240.9989,1157.94 C1240.9989,1157.94 1336.3778,1157.94 1336.3778,1167.94 L1336.3778,1258.4244 C1336.3778,1268.4244 1240.9989,1268.4244 1240.9989,1268.4244 C1240.9989,1268.4244 1145.62,1268.4244 1145.62,1258.4244 L1145.62,1167.94" fill="#438DD5" style="stroke:#3C7FC0;stroke-width:0.5;"/><path d="M1145.62,1167.94 C1145.62,1177.94 1240.9989,1177.94 1240.9989,1177.94 C1240.9989,1177.94 1336.3778,1177.94 1336.3778,1167.94" fill="none" style="stroke:#3C7FC0;stroke-width:0.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="83.4668" x="1199.2655" y="1194.9351">Â«containerÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="170.7578" x="1155.62" y="1213.0884">modelmora-results</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="19.9336" x="1206.0477" y="1228.0005">[S3</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="3.8145" x="1225.9813" y="1228.0005">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="46.1543" x="1229.7958" y="1228.0005">Bucket]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1238.7738" y="1243.8257">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="74.2725" x="1176.1874" y="1260.1226">Generated</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1250.4598" y="1260.1226">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50.9004" x="1254.91" y="1260.1226">images</text></g><g class="entity" data-entity="client_app" data-source-line="76" data-uid="ent0022" id="entity_client_app"><rect fill="#438DD5" height="101.4844" style="stroke:#3C7FC0;stroke-width:0.5;" width="105.4668" x="637.27" y="60"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="83.4668" x="648.27" y="82.9951">Â«containerÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="79.6094" x="650.1987" y="101.1484">MiraVeja</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="76.4121" x="651.7973" y="116.0605">[Application]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="687.7783" y="131.8857">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36.832" x="649.0971" y="148.1826">gRPC</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="685.9292" y="148.1826">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40.5303" x="690.3794" y="148.1826">Client</text></g><g class="link" data-entity-1="client_app" data-entity-2="ingress" data-link-type="dependency" data-source-line="1773" data-uid="lnk23" id="link_client_app_ingress"><path d="M690,161.69 C690,231.85 690,350.84 690,421.1" fill="none" id="client_app-to-ingress" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="690,429.1,693,421.1,687,421.1,690,429.1" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="90.6382" x="691" y="206.5569">HTTPS/gRPC</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="30.9961" x="720.821" y="220.7615">[TLS]</text></g><g class="link" data-entity-1="ingress" data-entity-2="svc" data-link-type="dependency" data-source-line="1773" data-uid="lnk24" id="link_ingress_svc"><path d="M690,531.46 C690,570.29 690,615.78 690,654.58" fill="none" id="ingress-to-svc" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="690,662.58,693,654.58,687,654.58,690,662.58" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="60.7217" x="691" y="576.0369">Forward</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="32.3086" x="705.2065" y="590.2415">[TCP]</text></g><g class="link" data-entity-1="svc" data-entity-2="pod1" data-link-type="dependency" data-source-line="1773" data-uid="lnk25" id="link_svc_pod1"><path d="M619.24,764.85 C606.98,774.76 594.73,785.5 584,796.46 C549.86,831.3 521.8166,869.5096 499.1166,903.4596" fill="none" id="svc-to-pod1" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="494.67,910.11,501.6105,905.1271,496.6228,901.7921,494.67,910.11" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="35.293" x="585" y="809.5269">Load</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.5259" x="620.293" y="809.5269">Â </text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="57.0845" x="624.8188" y="809.5269">balance</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="83.0332" x="591.9351" y="823.7315">[Round-robin]</text></g><g class="link" data-entity-1="svc" data-entity-2="pod2" data-link-type="dependency" data-source-line="1773" data-uid="lnk26" id="link_svc_pod2"><path d="M690,764.69 C690,807.16 690,859.84 690,902.3" fill="none" id="svc-to-pod2" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="690,910.3,693,902.3,687,902.3,690,910.3" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="35.293" x="691" y="809.5269">Load</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.5259" x="726.293" y="809.5269">Â </text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="57.0845" x="730.8188" y="809.5269">balance</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="83.0332" x="697.9351" y="823.7315">[Round-robin]</text></g><g class="link" data-entity-1="svc" data-entity-2="pod3" data-link-type="dependency" data-source-line="1773" data-uid="lnk27" id="link_svc_pod3"><path d="M760.76,764.85 C773.02,774.76 785.27,785.5 796,796.46 C830.14,831.3 858.1834,869.5096 880.8834,903.4596" fill="none" id="svc-to-pod3" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="885.33,910.11,883.3772,901.7921,878.3895,905.1271,885.33,910.11" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="35.293" x="823" y="809.5269">Load</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.5259" x="858.293" y="809.5269">Â </text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="57.0845" x="862.8188" y="809.5269">balance</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="83.0332" x="829.9351" y="823.7315">[Round-robin]</text></g><g class="link" data-entity-1="pod1" data-entity-2="postgres" data-link-type="dependency" data-source-line="1773" data-uid="lnk28" id="link_pod1_postgres"><path d="M366.73,969.14 C265.04,978.72 114.54,1000.04 79,1043.94 C33.52,1100.13 119.4517,1152.3494 187.6417,1183.4594" fill="none" id="pod1-to-postgres" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="194.92,1186.78,188.8869,1180.7301,186.3965,1186.1888,194.92,1186.78" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="44.0083" x="80" y="1057.0069">Query</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.5259" x="124.0083" y="1057.0069">Â </text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="70.4146" x="128.5342" y="1057.0069">metadata</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="78.5801" x="100.1843" y="1071.2115">[PostgreSQL]</text></g><g class="link" data-entity-1="pod2" data-entity-2="postgres" data-link-type="dependency" data-source-line="1773" data-uid="lnk29" id="link_pod2_postgres"><path d="M626.48,1012.26 C611.08,1021.88 594.11,1030.61 577,1035.94 C560.6,1041.05 280.34,1032 268,1043.94 C238.45,1072.52 237.0731,1112.5078 242.9731,1149.8978" fill="none" id="pod2-to-postgres" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="244.22,1157.8,245.9364,1149.4302,240.0097,1150.3654,244.22,1157.8" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="44.0083" x="269" y="1057.0069">Query</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.5259" x="313.0083" y="1057.0069">Â </text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="70.4146" x="317.5342" y="1057.0069">metadata</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="78.5801" x="289.1843" y="1071.2115">[PostgreSQL]</text></g><g class="link" data-entity-1="pod3" data-entity-2="postgres" data-link-type="dependency" data-source-line="1773" data-uid="lnk30" id="link_pod3_postgres"><path d="M850.91,1012.28 C836.12,1021.46 820.04,1030.01 804,1035.94 C778.36,1045.43 767.62,1032.05 743,1043.94 C725.17,1052.55 729.25,1067.26 711,1074.94 C681.19,1087.49 450.38,1071.84 420,1082.94 C377.59,1098.44 343.6402,1124.3108 314.1202,1152.2508" fill="none" id="pod3-to-postgres" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="308.31,1157.75,316.1824,1154.4296,312.058,1150.0719,308.31,1157.75" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="44.0083" x="744" y="1057.0069">Query</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.5259" x="788.0083" y="1057.0069">Â </text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="70.4146" x="792.5342" y="1057.0069">metadata</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="78.5801" x="764.1843" y="1071.2115">[PostgreSQL]</text></g><g class="link" data-entity-1="pod1" data-entity-2="redis" data-link-type="dependency" data-source-line="1773" data-uid="lnk31" id="link_pod1_redis"><path d="M413.09,1012.22 C400.1,1031.14 391.57,1053.34 399,1074.94 C409.46,1105.37 424.5181,1128.1693 444.6281,1151.5093" fill="none" id="pod1-to-redis" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="449.85,1157.57,446.9008,1149.5511,442.3553,1153.4676,449.85,1157.57" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="82.9639" x="400" y="1057.0069">Distributed</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.5259" x="482.9639" y="1057.0069">Â </text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="45.4492" x="487.4897" y="1057.0069">queue</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="37.6055" x="419.0027" y="1071.2115">[Redis</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="3.8145" x="456.6082" y="1071.2115">Â </text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="53.5137" x="460.4226" y="1071.2115">Protocol]</text></g><g class="link" data-entity-1="pod2" data-entity-2="redis" data-link-type="dependency" data-source-line="1773" data-uid="lnk32" id="link_pod2_redis"><path d="M605.21,1012.32 C593.38,1021.78 582.16,1032.38 573,1043.94 C546.55,1077.33 531.5909,1114.8361 521.2409,1149.9661" fill="none" id="pod2-to-redis" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="518.98,1157.64,524.1186,1150.8139,518.3632,1149.1183,518.98,1157.64" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="82.9639" x="574" y="1057.0069">Distributed</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.5259" x="656.9639" y="1057.0069">Â </text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="45.4492" x="661.4897" y="1057.0069">queue</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="37.6055" x="593.0027" y="1071.2115">[Redis</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="3.8145" x="630.6082" y="1071.2115">Â </text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="53.5137" x="634.4226" y="1071.2115">Protocol]</text></g><g class="link" data-entity-1="pod3" data-entity-2="redis" data-link-type="dependency" data-source-line="1773" data-uid="lnk33" id="link_pod3_redis"><path d="M909.34,1012.18 C903.06,1035.23 891.67,1060.6 871,1074.94 C846.52,1091.93 629.45,1069.23 603,1082.94 C571.99,1099.02 552.2597,1123.1366 535.9997,1150.7466" fill="none" id="pod3-to-redis" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="531.94,1157.64,538.5847,1152.269,533.4146,1149.2242,531.94,1157.64" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="82.9639" x="897" y="1057.0069">Distributed</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.5259" x="979.9639" y="1057.0069">Â </text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="45.4492" x="984.4897" y="1057.0069">queue</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="37.6055" x="916.0027" y="1071.2115">[Redis</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="3.8145" x="953.6082" y="1071.2115">Â </text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="53.5137" x="957.4226" y="1071.2115">Protocol]</text></g><g class="link" data-entity-1="pod1" data-entity-2="pvc_models" data-link-type="dependency" data-source-line="1773" data-uid="lnk34" id="link_pod1_pvc_models"><path d="M526.49,1012.37 C541.88,1021.98 558.87,1030.68 576,1035.94 C588.27,1039.71 1029,1034.79 1038,1043.94 C1047.66,1053.77 1047.64,1065.1 1038,1074.94 C1022.95,1090.3 666.05,1067.58 651,1082.94 C560.88,1174.94 635.9367,1332.2826 687.6167,1417.3626" fill="none" id="pod1-to-pvc_models" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="691.77,1424.2,690.1808,1415.8051,685.0527,1418.92,691.77,1424.2" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="35.293" x="652" y="1210.7469">Load</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.5259" x="687.293" y="1210.7469">Â </text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="52.7935" x="691.8188" y="1210.7469">models</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="60.334" x="668.1392" y="1224.9515">[NFS/EBS]</text></g><g class="link" data-entity-1="pod2" data-entity-2="pvc_models" data-link-type="dependency" data-source-line="1773" data-uid="lnk35" id="link_pod2_pvc_models"><path d="M753.85,1012.37 C769.16,1021.92 786.02,1030.59 803,1035.94 C816.2,1040.1 1042.37,1034 1052,1043.94 C1061.58,1053.84 1061.56,1065.02 1052,1074.94 C1035.41,1092.16 855.74,1068.1 837,1082.94 C783.5,1125.29 750.1755,1317.7996 736.2055,1416.1096" fill="none" id="pod2-to-pvc_models" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="735.08,1424.03,739.1757,1416.5316,733.2353,1415.6875,735.08,1424.03" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="35.293" x="838" y="1210.7469">Load</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.5259" x="873.293" y="1210.7469">Â </text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="52.7935" x="877.8188" y="1210.7469">models</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="60.334" x="854.1392" y="1224.9515">[NFS/EBS]</text></g><g class="link" data-entity-1="pod3" data-entity-2="pvc_models" data-link-type="dependency" data-source-line="1773" data-uid="lnk36" id="link_pod3_pvc_models"><path d="M1013.18,997.78 C1051.05,1017.46 1080.89,1044.15 1059,1074.94 C1052.73,1083.76 1043.93,1075.57 1036,1082.94 C953.17,1159.9 1004.07,1226.91 935,1316.43 C900.76,1360.8 858.3608,1395.3856 816.6308,1424.0956" fill="none" id="pod3-to-pvc_models" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="810.04,1428.63,818.3312,1426.5671,814.9304,1421.624,810.04,1428.63" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="35.293" x="1037" y="1210.7469">Load</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.5259" x="1072.293" y="1210.7469">Â </text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="52.7935" x="1076.8188" y="1210.7469">models</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="60.334" x="1053.1392" y="1224.9515">[NFS/EBS]</text></g><g class="link" data-entity-1="postgres" data-entity-2="pvc_db" data-link-type="dependency" data-source-line="1773" data-uid="lnk37" id="link_postgres_pvc_db"><path d="M310.73,1268.66 C354.79,1314.18 411.7361,1373.0117 455.7761,1418.5117" fill="none" id="postgres-to-pvc_db" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="461.34,1424.26,457.9317,1416.4252,453.6205,1420.5981,461.34,1424.26" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="50.9019" x="394" y="1337.4969">Persist</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.5259" x="444.9019" y="1337.4969">Â </text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="33.0649" x="449.4277" y="1337.4969">data</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="73.6992" x="401.3967" y="1351.7015">[Filesystem]</text></g><g class="link" data-entity-1="pod1" data-entity-2="s3_bucket" data-link-type="dependency" data-source-line="1773" data-uid="lnk38" id="link_pod1_s3_bucket"><path d="M526.49,1012.38 C541.88,1021.99 558.87,1030.69 576,1035.94 C627.32,1051.67 1009.18,1023.97 1059,1043.94 C1066.84,1047.08 1127.7123,1104.1376 1178.1123,1152.0576" fill="none" id="pod1-to-s3_bucket" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="1183.91,1157.57,1180.1795,1149.8834,1176.0451,1154.2317,1183.91,1157.57" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="39.7363" x="1095" y="1057.0069">Store</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.5259" x="1134.7363" y="1057.0069">Â </text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="50.6289" x="1139.2622" y="1057.0069">results</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="19.9336" x="1118.7385" y="1071.2115">[S3</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="3.8145" x="1138.6721" y="1071.2115">Â </text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="23.666" x="1142.4866" y="1071.2115">API]</text></g><g class="link" data-entity-1="pod2" data-entity-2="s3_bucket" data-link-type="dependency" data-source-line="1773" data-uid="lnk39" id="link_pod2_s3_bucket"><path d="M753.5,1012.33 C768.89,1021.95 785.87,1030.66 803,1035.94 C824.19,1042.47 1184.78,1029.97 1202,1043.94 C1235.07,1070.76 1243.2594,1111.5923 1244.1694,1149.7723" fill="none" id="pod2-to-s3_bucket" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="1244.36,1157.77,1247.1685,1149.7008,1241.1702,1149.8438,1244.36,1157.77" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="39.7363" x="1225" y="1057.0069">Store</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.5259" x="1264.7363" y="1057.0069">Â </text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="50.6289" x="1269.2622" y="1057.0069">results</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="19.9336" x="1248.7385" y="1071.2115">[S3</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="3.8145" x="1268.6721" y="1071.2115">Â </text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="23.666" x="1272.4866" y="1071.2115">API]</text></g><g class="link" data-entity-1="pod3" data-entity-2="s3_bucket" data-link-type="dependency" data-source-line="1773" data-uid="lnk40" id="link_pod3_s3_bucket"><path d="M1013.49,967.11 C1124.79,975.03 1297.68,995.04 1338,1043.94 C1366.74,1078.8 1344.3662,1117.4946 1311.2162,1151.9546" fill="none" id="pod3-to-s3_bucket" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="1305.67,1157.72,1313.3782,1154.0344,1309.0542,1149.8748,1305.67,1157.72" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="39.7363" x="1350" y="1057.0069">Store</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.5259" x="1389.7363" y="1057.0069">Â </text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="50.6289" x="1394.2622" y="1057.0069">results</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="19.9336" x="1373.7385" y="1071.2115">[S3</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="3.8145" x="1393.6721" y="1071.2115">Â </text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="23.666" x="1397.4866" y="1071.2115">API]</text></g></g></svg></div><div class="puml dark" style=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="DESCRIPTION" height="1580px" preserveAspectRatio="xMidYMid meet" style="width:1452px;height:1580px;background:#1B1B1B;" version="1.1" viewBox="0 0 1452 1580" width="1452px" zoomAndPan="magnify" class="diagram"><defs/><g><rect fill="#1B1B1B" height="1580" style="stroke:none;stroke-width:1;" width="1452" x="0" y="0"/><g class="cluster" data-entity="k8s" data-source-line="108" data-uid="ent0002" id="cluster_k8s"><rect fill="none" height="1334.42" style="stroke:#A2A2A2;stroke-width:1;" width="1077" x="7" y="240.49"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52.0693" x="519.4653" y="255.4851">Â«nodeÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="174.3516" x="10" y="273.6384">Kubernetes Cluster</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="43.1836" x="10" y="288.5505">[v1.28]</text></g><g class="cluster" data-entity="namespace" data-source-line="108" data-uid="ent0003" id="cluster_namespace"><rect fill="none" height="992.94" style="stroke:#A2A2A2;stroke-width:1;" width="1029" x="31" y="315.49"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52.0693" x="519.4653" y="330.4851">Â«nodeÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="217.5938" x="34" y="348.6384">Namespace: modelmora</text></g><g class="cluster" data-entity="ingress_node" data-source-line="108" data-uid="ent0004" id="cluster_ingress_node"><rect fill="none" height="170.48" style="stroke:#A2A2A2;stroke-width:1;" width="176" x="602" y="376.49"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52.0693" x="663.9653" y="391.4851">Â«nodeÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="66.5859" x="605" y="409.6384">Ingress</text></g><g class="cluster" data-entity="modelmora_deploy" data-source-line="108" data-uid="ent0006" id="cluster_modelmora_deploy"><rect fill="none" height="184.48" style="stroke:#A2A2A2;stroke-width:1;" width="678" x="351" y="843.46"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52.0693" x="663.9653" y="858.4551">Â«nodeÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="257.2031" x="354" y="876.6084">Deployment: modelmora-api</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="75.0645" x="354" y="891.5205">[Replicas: 3]</text></g><g class="cluster" data-entity="service" data-source-line="108" data-uid="ent0010" id="cluster_service"><rect fill="none" height="170.49" style="stroke:#A2A2A2;stroke-width:1;" width="190" x="595" y="609.97"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52.0693" x="663.9653" y="624.9651">Â«nodeÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="66.5156" x="598" y="643.1184">Service</text></g><g class="cluster" data-entity="db_stateful" data-source-line="108" data-uid="ent0012" id="cluster_db_stateful"><rect fill="none" height="179.49" style="stroke:#A2A2A2;stroke-width:1;" width="226" x="128" y="1104.94"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52.0693" x="214.9653" y="1119.9351">Â«nodeÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="210.5703" x="131" y="1138.0884">StatefulSet: postgresql</text></g><g class="cluster" data-entity="redis_deploy" data-source-line="108" data-uid="ent0014" id="cluster_redis_deploy"><rect fill="none" height="179.49" style="stroke:#A2A2A2;stroke-width:1;" width="182" x="412" y="1104.94"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52.0693" x="476.9653" y="1119.9351">Â«nodeÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="166.2266" x="415" y="1138.0884">Deployment: redis</text></g><g class="cluster" data-entity="storage" data-source-line="108" data-uid="ent0016" id="cluster_storage"><rect fill="none" height="179.48" style="stroke:#A2A2A2;stroke-width:1;" width="425" x="401" y="1371.43"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52.0693" x="587.4653" y="1386.4251">Â«nodeÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="175.4063" x="404" y="1404.5784">Persistent Volumes</text></g><g class="cluster" data-entity="s3" data-source-line="108" data-uid="ent0019" id="cluster_s3"><rect fill="none" height="193.49" style="stroke:#A2A2A2;stroke-width:1;" width="222" x="1130" y="1090.94"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52.0693" x="1214.9653" y="1105.9351">Â«nodeÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="135.25" x="1133" y="1124.0884">Object Storage</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="102.0703" x="1133" y="1139.0005">[AWS S3 / MinIO]</text></g><g class="cluster" data-entity="external_client" data-source-line="108" data-uid="ent0021" id="cluster_external_client"><rect fill="none" height="170.49" style="stroke:#A2A2A2;stroke-width:1;" width="159" x="611" y="7"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52.0693" x="664.4653" y="21.9951">Â«nodeÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="143.0078" x="614" y="40.1484">External Clients</text></g><g class="entity" data-entity="ingress" data-source-line="76" data-uid="ent0005" id="entity_ingress"><rect fill="#1183CB" height="101.4844" style="stroke:#0065AD;stroke-width:0.5;" width="144.1953" x="617.9" y="429.49"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="83.4668" x="648.2643" y="452.4851">Â«containerÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="52.0391" x="627.9" y="470.6384">Nginx</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="5.5703" x="679.9391" y="470.6384">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="66.5859" x="685.5094" y="470.6384">Ingress</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="48.2637" x="631.9723" y="485.5505">[Ingress</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="3.8145" x="680.2359" y="485.5505">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="63.9727" x="684.0504" y="485.5505">Controller]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="687.7726" y="501.3757">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="25.2383" x="634.3258" y="517.6726">TLS</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="659.5641" y="517.6726">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81.6553" x="664.0143" y="517.6726">termination</text></g><g class="entity" data-entity="pod1" data-source-line="76" data-uid="ent0007" id="entity_pod1"><rect fill="#1183CB" height="101.4844" style="stroke:#0065AD;stroke-width:0.5;" width="192.04" x="366.98" y="910.46"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="83.4668" x="421.2666" y="933.4551">Â«containerÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="34.1719" x="437.5625" y="951.6084">Pod</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="5.5703" x="471.7344" y="951.6084">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="11.1328" x="477.3047" y="951.6084">1</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="75.375" x="425.3125" y="966.5205">[ModelMora]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="460.7749" y="982.3457">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36.0117" x="376.98" y="998.6426">REST</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="412.9917" y="998.6426">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="11.7305" x="417.4419" y="998.6426">+</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="429.1724" y="998.6426">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36.832" x="433.6226" y="998.6426">gRPC</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="470.4546" y="998.6426">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="11.7305" x="474.9048" y="998.6426">+</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="486.6353" y="998.6426">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57.9346" x="491.0855" y="998.6426">Workers</text></g><g class="entity" data-entity="pod2" data-source-line="76" data-uid="ent0008" id="entity_pod2"><rect fill="#1183CB" height="101.4844" style="stroke:#0065AD;stroke-width:0.5;" width="192.04" x="593.98" y="910.46"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="83.4668" x="648.2666" y="933.4551">Â«containerÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="34.1719" x="664.5625" y="951.6084">Pod</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="5.5703" x="698.7344" y="951.6084">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="11.1328" x="704.3047" y="951.6084">2</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="75.375" x="652.3125" y="966.5205">[ModelMora]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="687.7749" y="982.3457">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36.0117" x="603.98" y="998.6426">REST</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="639.9917" y="998.6426">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="11.7305" x="644.4419" y="998.6426">+</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="656.1724" y="998.6426">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36.832" x="660.6226" y="998.6426">gRPC</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="697.4546" y="998.6426">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="11.7305" x="701.9048" y="998.6426">+</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="713.6353" y="998.6426">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57.9346" x="718.0855" y="998.6426">Workers</text></g><g class="entity" data-entity="pod3" data-source-line="76" data-uid="ent0009" id="entity_pod3"><rect fill="#1183CB" height="101.4844" style="stroke:#0065AD;stroke-width:0.5;" width="192.04" x="820.98" y="910.46"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="83.4668" x="875.2666" y="933.4551">Â«containerÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="34.1719" x="891.5625" y="951.6084">Pod</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="5.5703" x="925.7344" y="951.6084">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="11.1328" x="931.3047" y="951.6084">3</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="75.375" x="879.3125" y="966.5205">[ModelMora]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="914.7749" y="982.3457">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36.0117" x="830.98" y="998.6426">REST</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="866.9917" y="998.6426">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="11.7305" x="871.4419" y="998.6426">+</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="883.1724" y="998.6426">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36.832" x="887.6226" y="998.6426">gRPC</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="924.4546" y="998.6426">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="11.7305" x="928.9048" y="998.6426">+</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="940.6353" y="998.6426">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57.9346" x="945.0855" y="998.6426">Workers</text></g><g class="entity" data-entity="svc" data-source-line="76" data-uid="ent0011" id="entity_svc"><rect fill="#1183CB" height="101.4844" style="stroke:#0065AD;stroke-width:0.5;" width="157.8828" x="611.06" y="662.97"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="83.4668" x="648.268" y="685.9651">Â«containerÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="137.8828" x="621.06" y="704.1184">modelmora-svc</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="62.7305" x="658.6362" y="719.0305">[ClusterIP]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="687.7763" y="734.8557">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28.2529" x="629.1171" y="751.1526">Port</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="657.3701" y="751.1526">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40.0791" x="661.8203" y="751.1526">8000,</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="701.8994" y="751.1526">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44.5361" x="706.3496" y="751.1526">50051</text></g><g class="entity" data-entity="postgres" data-source-line="80" data-uid="ent0013" id="entity_postgres"><path d="M195.3,1167.94 C195.3,1157.94 258.0031,1157.94 258.0031,1157.94 C258.0031,1157.94 320.7063,1157.94 320.7063,1167.94 L320.7063,1258.4244 C320.7063,1268.4244 258.0031,1268.4244 258.0031,1268.4244 C258.0031,1268.4244 195.3,1268.4244 195.3,1258.4244 L195.3,1167.94" fill="#1183CB" style="stroke:#0065AD;stroke-width:0.5;"/><path d="M195.3,1167.94 C195.3,1177.94 258.0031,1177.94 258.0031,1177.94 C258.0031,1177.94 320.7063,1177.94 320.7063,1167.94" fill="none" style="stroke:#0065AD;stroke-width:0.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="83.4668" x="216.2697" y="1194.9351">Â«containerÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="105.4063" x="205.3" y="1213.0884">PostgreSQL</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="64.4707" x="212.7834" y="1228.0005">[Persistent</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="3.8145" x="277.2541" y="1228.0005">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="22.1543" x="281.0686" y="1228.0005">DB]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="255.778" y="1243.8257">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28.2529" x="223.8371" y="1260.1226">Port</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="252.09" y="1260.1226">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35.6289" x="256.5402" y="1260.1226">5432</text></g><g class="entity" data-entity="redis" data-source-line="80" data-uid="ent0015" id="entity_redis"><path d="M436.34,1167.94 C436.34,1157.94 506.0031,1157.94 506.0031,1157.94 C506.0031,1157.94 575.6662,1157.94 575.6662,1167.94 L575.6662,1258.4244 C575.6662,1268.4244 506.0031,1268.4244 506.0031,1268.4244 C506.0031,1268.4244 436.34,1268.4244 436.34,1258.4244 L436.34,1167.94" fill="#1183CB" style="stroke:#0065AD;stroke-width:0.5;"/><path d="M436.34,1167.94 C436.34,1177.94 506.0031,1177.94 506.0031,1177.94 C506.0031,1177.94 575.6662,1177.94 575.6662,1167.94" fill="none" style="stroke:#0065AD;stroke-width:0.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="83.4668" x="464.2697" y="1194.9351">Â«containerÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="49.6328" x="481.1867" y="1213.0884">Redis</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="71.4082" x="446.34" y="1228.0005">[Distributed</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="3.8145" x="517.7482" y="1228.0005">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="44.1035" x="521.5627" y="1228.0005">Queue]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="503.778" y="1243.8257">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28.2529" x="471.8371" y="1260.1226">Port</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="500.09" y="1260.1226">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35.6289" x="504.5402" y="1260.1226">6379</text></g><g class="entity" data-entity="pvc_models" data-source-line="80" data-uid="ent0017" id="entity_pvc_models"><path d="M646.23,1434.43 C646.23,1424.43 728.0039,1424.43 728.0039,1424.43 C728.0039,1424.43 809.7779,1424.43 809.7779,1434.43 L809.7779,1524.9144 C809.7779,1534.9144 728.0039,1534.9144 728.0039,1534.9144 C728.0039,1534.9144 646.23,1534.9144 646.23,1524.9144 L646.23,1434.43" fill="#1183CB" style="stroke:#0065AD;stroke-width:0.5;"/><path d="M646.23,1434.43 C646.23,1444.43 728.0039,1444.43 728.0039,1444.43 C728.0039,1444.43 809.7779,1444.43 809.7779,1434.43" fill="none" style="stroke:#0065AD;stroke-width:0.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="83.4668" x="686.2705" y="1461.4251">Â«containerÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="42.25" x="671.6055" y="1479.5784">PVC:</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="5.5703" x="713.8555" y="1479.5784">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="64.9766" x="719.4258" y="1479.5784">models</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="104.6895" x="675.6592" y="1494.4905">[ReadWriteMany]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="725.7788" y="1510.3157">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49.5947" x="656.23" y="1526.6126">Shared</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="705.8247" y="1526.6126">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43.5928" x="710.2749" y="1526.6126">model</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="753.8677" y="1526.6126">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41.46" x="758.3179" y="1526.6126">cache</text></g><g class="entity" data-entity="pvc_db" data-source-line="80" data-uid="ent0018" id="entity_pvc_db"><path d="M416.75,1434.43 C416.75,1424.43 513.9961,1424.43 513.9961,1424.43 C513.9961,1424.43 611.2422,1424.43 611.2422,1434.43 L611.2422,1524.9144 C611.2422,1534.9144 513.9961,1534.9144 513.9961,1534.9144 C513.9961,1534.9144 416.75,1534.9144 416.75,1524.9144 L416.75,1434.43" fill="#1183CB" style="stroke:#0065AD;stroke-width:0.5;"/><path d="M416.75,1434.43 C416.75,1444.43 513.9961,1444.43 513.9961,1444.43 C513.9961,1444.43 611.2422,1444.43 611.2422,1434.43" fill="none" style="stroke:#0065AD;stroke-width:0.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="83.4668" x="472.2627" y="1461.4251">Â«containerÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="42.25" x="426.75" y="1479.5784">PVC:</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="5.5703" x="469" y="1479.5784">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="126.6719" x="474.5703" y="1479.5784">postgres-data</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="103.3066" x="462.3428" y="1494.4905">[ReadWriteOnce]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="511.771" y="1510.3157">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66.8008" x="451.7788" y="1526.6126">Database</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="518.5796" y="1526.6126">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53.1836" x="523.0298" y="1526.6126">storage</text></g><g class="entity" data-entity="s3_bucket" data-source-line="80" data-uid="ent0020" id="entity_s3_bucket"><path d="M1145.62,1167.94 C1145.62,1157.94 1240.9989,1157.94 1240.9989,1157.94 C1240.9989,1157.94 1336.3778,1157.94 1336.3778,1167.94 L1336.3778,1258.4244 C1336.3778,1268.4244 1240.9989,1268.4244 1240.9989,1268.4244 C1240.9989,1268.4244 1145.62,1268.4244 1145.62,1258.4244 L1145.62,1167.94" fill="#1183CB" style="stroke:#0065AD;stroke-width:0.5;"/><path d="M1145.62,1167.94 C1145.62,1177.94 1240.9989,1177.94 1240.9989,1177.94 C1240.9989,1177.94 1336.3778,1177.94 1336.3778,1167.94" fill="none" style="stroke:#0065AD;stroke-width:0.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="83.4668" x="1199.2655" y="1194.9351">Â«containerÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="170.7578" x="1155.62" y="1213.0884">modelmora-results</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="19.9336" x="1206.0477" y="1228.0005">[S3</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="3.8145" x="1225.9813" y="1228.0005">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="46.1543" x="1229.7958" y="1228.0005">Bucket]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1238.7738" y="1243.8257">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="74.2725" x="1176.1874" y="1260.1226">Generated</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1250.4598" y="1260.1226">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50.9004" x="1254.91" y="1260.1226">images</text></g><g class="entity" data-entity="client_app" data-source-line="76" data-uid="ent0022" id="entity_client_app"><rect fill="#1183CB" height="101.4844" style="stroke:#0065AD;stroke-width:0.5;" width="105.4668" x="637.27" y="60"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="83.4668" x="648.27" y="82.9951">Â«containerÂ»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="79.6094" x="650.1987" y="101.1484">MiraVeja</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="76.4121" x="651.7973" y="116.0605">[Application]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="687.7783" y="131.8857">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36.832" x="649.0971" y="148.1826">gRPC</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="685.9292" y="148.1826">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40.5303" x="690.3794" y="148.1826">Client</text></g><g class="link" data-entity-1="client_app" data-entity-2="ingress" data-link-type="dependency" data-source-line="1773" data-uid="lnk23" id="link_client_app_ingress"><path d="M690,161.69 C690,231.85 690,350.84 690,421.1" fill="none" id="client_app-to-ingress" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="690,429.1,693,421.1,687,421.1,690,429.1" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="90.6382" x="691" y="206.5569">HTTPS/gRPC</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="30.9961" x="720.821" y="220.7615">[TLS]</text></g><g class="link" data-entity-1="ingress" data-entity-2="svc" data-link-type="dependency" data-source-line="1773" data-uid="lnk24" id="link_ingress_svc"><path d="M690,531.46 C690,570.29 690,615.78 690,654.58" fill="none" id="ingress-to-svc" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="690,662.58,693,654.58,687,654.58,690,662.58" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="60.7217" x="691" y="576.0369">Forward</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="32.3086" x="705.2065" y="590.2415">[TCP]</text></g><g class="link" data-entity-1="svc" data-entity-2="pod1" data-link-type="dependency" data-source-line="1773" data-uid="lnk25" id="link_svc_pod1"><path d="M619.24,764.85 C606.98,774.76 594.73,785.5 584,796.46 C549.86,831.3 521.8166,869.5096 499.1166,903.4596" fill="none" id="svc-to-pod1" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="494.67,910.11,501.6105,905.1271,496.6228,901.7921,494.67,910.11" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="35.293" x="585" y="809.5269">Load</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.5259" x="620.293" y="809.5269">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="57.0845" x="624.8188" y="809.5269">balance</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="83.0332" x="591.9351" y="823.7315">[Round-robin]</text></g><g class="link" data-entity-1="svc" data-entity-2="pod2" data-link-type="dependency" data-source-line="1773" data-uid="lnk26" id="link_svc_pod2"><path d="M690,764.69 C690,807.16 690,859.84 690,902.3" fill="none" id="svc-to-pod2" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="690,910.3,693,902.3,687,902.3,690,910.3" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="35.293" x="691" y="809.5269">Load</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.5259" x="726.293" y="809.5269">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="57.0845" x="730.8188" y="809.5269">balance</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="83.0332" x="697.9351" y="823.7315">[Round-robin]</text></g><g class="link" data-entity-1="svc" data-entity-2="pod3" data-link-type="dependency" data-source-line="1773" data-uid="lnk27" id="link_svc_pod3"><path d="M760.76,764.85 C773.02,774.76 785.27,785.5 796,796.46 C830.14,831.3 858.1834,869.5096 880.8834,903.4596" fill="none" id="svc-to-pod3" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="885.33,910.11,883.3772,901.7921,878.3895,905.1271,885.33,910.11" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="35.293" x="823" y="809.5269">Load</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.5259" x="858.293" y="809.5269">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="57.0845" x="862.8188" y="809.5269">balance</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="83.0332" x="829.9351" y="823.7315">[Round-robin]</text></g><g class="link" data-entity-1="pod1" data-entity-2="postgres" data-link-type="dependency" data-source-line="1773" data-uid="lnk28" id="link_pod1_postgres"><path d="M366.73,969.14 C265.04,978.72 114.54,1000.04 79,1043.94 C33.52,1100.13 119.4517,1152.3494 187.6417,1183.4594" fill="none" id="pod1-to-postgres" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="194.92,1186.78,188.8869,1180.7301,186.3965,1186.1888,194.92,1186.78" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="44.0083" x="80" y="1057.0069">Query</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.5259" x="124.0083" y="1057.0069">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="70.4146" x="128.5342" y="1057.0069">metadata</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="78.5801" x="100.1843" y="1071.2115">[PostgreSQL]</text></g><g class="link" data-entity-1="pod2" data-entity-2="postgres" data-link-type="dependency" data-source-line="1773" data-uid="lnk29" id="link_pod2_postgres"><path d="M626.48,1012.26 C611.08,1021.88 594.11,1030.61 577,1035.94 C560.6,1041.05 280.34,1032 268,1043.94 C238.45,1072.52 237.0731,1112.5078 242.9731,1149.8978" fill="none" id="pod2-to-postgres" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="244.22,1157.8,245.9364,1149.4302,240.0097,1150.3654,244.22,1157.8" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="44.0083" x="269" y="1057.0069">Query</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.5259" x="313.0083" y="1057.0069">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="70.4146" x="317.5342" y="1057.0069">metadata</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="78.5801" x="289.1843" y="1071.2115">[PostgreSQL]</text></g><g class="link" data-entity-1="pod3" data-entity-2="postgres" data-link-type="dependency" data-source-line="1773" data-uid="lnk30" id="link_pod3_postgres"><path d="M850.91,1012.28 C836.12,1021.46 820.04,1030.01 804,1035.94 C778.36,1045.43 767.62,1032.05 743,1043.94 C725.17,1052.55 729.25,1067.26 711,1074.94 C681.19,1087.49 450.38,1071.84 420,1082.94 C377.59,1098.44 343.6402,1124.3108 314.1202,1152.2508" fill="none" id="pod3-to-postgres" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="308.31,1157.75,316.1824,1154.4296,312.058,1150.0719,308.31,1157.75" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="44.0083" x="744" y="1057.0069">Query</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.5259" x="788.0083" y="1057.0069">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="70.4146" x="792.5342" y="1057.0069">metadata</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="78.5801" x="764.1843" y="1071.2115">[PostgreSQL]</text></g><g class="link" data-entity-1="pod1" data-entity-2="redis" data-link-type="dependency" data-source-line="1773" data-uid="lnk31" id="link_pod1_redis"><path d="M413.09,1012.22 C400.1,1031.14 391.57,1053.34 399,1074.94 C409.46,1105.37 424.5181,1128.1693 444.6281,1151.5093" fill="none" id="pod1-to-redis" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="449.85,1157.57,446.9008,1149.5511,442.3553,1153.4676,449.85,1157.57" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="82.9639" x="400" y="1057.0069">Distributed</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.5259" x="482.9639" y="1057.0069">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="45.4492" x="487.4897" y="1057.0069">queue</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="37.6055" x="419.0027" y="1071.2115">[Redis</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="3.8145" x="456.6082" y="1071.2115">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="53.5137" x="460.4226" y="1071.2115">Protocol]</text></g><g class="link" data-entity-1="pod2" data-entity-2="redis" data-link-type="dependency" data-source-line="1773" data-uid="lnk32" id="link_pod2_redis"><path d="M605.21,1012.32 C593.38,1021.78 582.16,1032.38 573,1043.94 C546.55,1077.33 531.5909,1114.8361 521.2409,1149.9661" fill="none" id="pod2-to-redis" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="518.98,1157.64,524.1186,1150.8139,518.3632,1149.1183,518.98,1157.64" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="82.9639" x="574" y="1057.0069">Distributed</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.5259" x="656.9639" y="1057.0069">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="45.4492" x="661.4897" y="1057.0069">queue</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="37.6055" x="593.0027" y="1071.2115">[Redis</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="3.8145" x="630.6082" y="1071.2115">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="53.5137" x="634.4226" y="1071.2115">Protocol]</text></g><g class="link" data-entity-1="pod3" data-entity-2="redis" data-link-type="dependency" data-source-line="1773" data-uid="lnk33" id="link_pod3_redis"><path d="M909.34,1012.18 C903.06,1035.23 891.67,1060.6 871,1074.94 C846.52,1091.93 629.45,1069.23 603,1082.94 C571.99,1099.02 552.2597,1123.1366 535.9997,1150.7466" fill="none" id="pod3-to-redis" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="531.94,1157.64,538.5847,1152.269,533.4146,1149.2242,531.94,1157.64" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="82.9639" x="897" y="1057.0069">Distributed</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.5259" x="979.9639" y="1057.0069">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="45.4492" x="984.4897" y="1057.0069">queue</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="37.6055" x="916.0027" y="1071.2115">[Redis</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="3.8145" x="953.6082" y="1071.2115">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="53.5137" x="957.4226" y="1071.2115">Protocol]</text></g><g class="link" data-entity-1="pod1" data-entity-2="pvc_models" data-link-type="dependency" data-source-line="1773" data-uid="lnk34" id="link_pod1_pvc_models"><path d="M526.49,1012.37 C541.88,1021.98 558.87,1030.68 576,1035.94 C588.27,1039.71 1029,1034.79 1038,1043.94 C1047.66,1053.77 1047.64,1065.1 1038,1074.94 C1022.95,1090.3 666.05,1067.58 651,1082.94 C560.88,1174.94 635.9367,1332.2826 687.6167,1417.3626" fill="none" id="pod1-to-pvc_models" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="691.77,1424.2,690.1808,1415.8051,685.0527,1418.92,691.77,1424.2" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="35.293" x="652" y="1210.7469">Load</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.5259" x="687.293" y="1210.7469">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="52.7935" x="691.8188" y="1210.7469">models</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="60.334" x="668.1392" y="1224.9515">[NFS/EBS]</text></g><g class="link" data-entity-1="pod2" data-entity-2="pvc_models" data-link-type="dependency" data-source-line="1773" data-uid="lnk35" id="link_pod2_pvc_models"><path d="M753.85,1012.37 C769.16,1021.92 786.02,1030.59 803,1035.94 C816.2,1040.1 1042.37,1034 1052,1043.94 C1061.58,1053.84 1061.56,1065.02 1052,1074.94 C1035.41,1092.16 855.74,1068.1 837,1082.94 C783.5,1125.29 750.1755,1317.7996 736.2055,1416.1096" fill="none" id="pod2-to-pvc_models" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="735.08,1424.03,739.1757,1416.5316,733.2353,1415.6875,735.08,1424.03" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="35.293" x="838" y="1210.7469">Load</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.5259" x="873.293" y="1210.7469">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="52.7935" x="877.8188" y="1210.7469">models</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="60.334" x="854.1392" y="1224.9515">[NFS/EBS]</text></g><g class="link" data-entity-1="pod3" data-entity-2="pvc_models" data-link-type="dependency" data-source-line="1773" data-uid="lnk36" id="link_pod3_pvc_models"><path d="M1013.18,997.78 C1051.05,1017.46 1080.89,1044.15 1059,1074.94 C1052.73,1083.76 1043.93,1075.57 1036,1082.94 C953.17,1159.9 1004.07,1226.91 935,1316.43 C900.76,1360.8 858.3608,1395.3856 816.6308,1424.0956" fill="none" id="pod3-to-pvc_models" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="810.04,1428.63,818.3312,1426.5671,814.9304,1421.624,810.04,1428.63" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="35.293" x="1037" y="1210.7469">Load</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.5259" x="1072.293" y="1210.7469">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="52.7935" x="1076.8188" y="1210.7469">models</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="60.334" x="1053.1392" y="1224.9515">[NFS/EBS]</text></g><g class="link" data-entity-1="postgres" data-entity-2="pvc_db" data-link-type="dependency" data-source-line="1773" data-uid="lnk37" id="link_postgres_pvc_db"><path d="M310.73,1268.66 C354.79,1314.18 411.7361,1373.0117 455.7761,1418.5117" fill="none" id="postgres-to-pvc_db" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="461.34,1424.26,457.9317,1416.4252,453.6205,1420.5981,461.34,1424.26" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="50.9019" x="394" y="1337.4969">Persist</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.5259" x="444.9019" y="1337.4969">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="33.0649" x="449.4277" y="1337.4969">data</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="73.6992" x="401.3967" y="1351.7015">[Filesystem]</text></g><g class="link" data-entity-1="pod1" data-entity-2="s3_bucket" data-link-type="dependency" data-source-line="1773" data-uid="lnk38" id="link_pod1_s3_bucket"><path d="M526.49,1012.38 C541.88,1021.99 558.87,1030.69 576,1035.94 C627.32,1051.67 1009.18,1023.97 1059,1043.94 C1066.84,1047.08 1127.7123,1104.1376 1178.1123,1152.0576" fill="none" id="pod1-to-s3_bucket" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="1183.91,1157.57,1180.1795,1149.8834,1176.0451,1154.2317,1183.91,1157.57" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="39.7363" x="1095" y="1057.0069">Store</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.5259" x="1134.7363" y="1057.0069">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="50.6289" x="1139.2622" y="1057.0069">results</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="19.9336" x="1118.7385" y="1071.2115">[S3</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="3.8145" x="1138.6721" y="1071.2115">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="23.666" x="1142.4866" y="1071.2115">API]</text></g><g class="link" data-entity-1="pod2" data-entity-2="s3_bucket" data-link-type="dependency" data-source-line="1773" data-uid="lnk39" id="link_pod2_s3_bucket"><path d="M753.5,1012.33 C768.89,1021.95 785.87,1030.66 803,1035.94 C824.19,1042.47 1184.78,1029.97 1202,1043.94 C1235.07,1070.76 1243.2594,1111.5923 1244.1694,1149.7723" fill="none" id="pod2-to-s3_bucket" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="1244.36,1157.77,1247.1685,1149.7008,1241.1702,1149.8438,1244.36,1157.77" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="39.7363" x="1225" y="1057.0069">Store</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.5259" x="1264.7363" y="1057.0069">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="50.6289" x="1269.2622" y="1057.0069">results</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="19.9336" x="1248.7385" y="1071.2115">[S3</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="3.8145" x="1268.6721" y="1071.2115">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="23.666" x="1272.4866" y="1071.2115">API]</text></g><g class="link" data-entity-1="pod3" data-entity-2="s3_bucket" data-link-type="dependency" data-source-line="1773" data-uid="lnk40" id="link_pod3_s3_bucket"><path d="M1013.49,967.11 C1124.79,975.03 1297.68,995.04 1338,1043.94 C1366.74,1078.8 1344.3662,1117.4946 1311.2162,1151.9546" fill="none" id="pod3-to-s3_bucket" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="1305.67,1157.72,1313.3782,1154.0344,1309.0542,1149.8748,1305.67,1157.72" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="39.7363" x="1350" y="1057.0069">Store</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4.5259" x="1389.7363" y="1057.0069">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="50.6289" x="1394.2622" y="1057.0069">results</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="19.9336" x="1373.7385" y="1071.2115">[S3</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="3.8145" x="1393.6721" y="1071.2115">Â </text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="23.666" x="1397.4866" y="1071.2115">API]</text></g></g></svg></div></div>

<h3 id="73-container-architecture">7.3 Container Architecture<a class="headerlink" href="#73-container-architecture" title="Permanent link">&para;</a></h3>
<div class='puml-container'><div class="puml light" style=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="DESCRIPTION" height="668px" preserveAspectRatio="xMidYMid meet" style="width:1565px;height:668px;background:#FFFFFF;" version="1.1" viewBox="0 0 1565 668" width="1565px" zoomAndPan="magnify" class="diagram"><defs/><g><g class="cluster" data-entity="ModelMora Container" data-source-line="2" data-uid="ent0002" id="cluster_ModelMora Container"><path d="M8.5,6 L179.3047,6 A3.75,3.75 0 0 1 181.8047,8.5 L188.8047,28.2969 L563.5,28.2969 A2.5,2.5 0 0 1 566,30.7969 L566,646.13 A2.5,2.5 0 0 1 563.5,648.63 L8.5,648.63 A2.5,2.5 0 0 1 6,646.13 L6,8.5 A2.5,2.5 0 0 1 8.5,6" fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="6" x2="188.8047" y1="28.2969" y2="28.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="169.8047" x="10" y="20.9951">ModelMora Container</text></g><g class="cluster" data-entity="Worker Process Pool" data-source-line="8" data-uid="ent0007" id="cluster_Worker Process Pool"><path d="M32.5,492.03 L196.4619,492.03 A3.75,3.75 0 0 1 198.9619,494.53 L205.9619,514.3269 L441.5,514.3269 A2.5,2.5 0 0 1 444,516.8269 L444,622.13 A2.5,2.5 0 0 1 441.5,624.63 L32.5,624.63 A2.5,2.5 0 0 1 30,622.13 L30,494.53 A2.5,2.5 0 0 1 32.5,492.03" fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="30" x2="205.9619" y1="514.3269" y2="514.3269"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="162.9619" x="34" y="507.0251">Worker Process Pool</text></g><g class="cluster" data-entity="Mounted Volumes" data-source-line="22" data-uid="ent0017" id="cluster_Mounted Volumes"><path d="M590,426.18 C590,416.18 971.5,416.18 971.5,416.18 C971.5,416.18 1353,416.18 1353,426.18 L1353,641.48 C1353,651.48 971.5,651.48 971.5,651.48 C971.5,651.48 590,651.48 590,641.48 L590,426.18" fill="none" style="stroke:#181818;stroke-width:1;"/><path d="M590,426.18 C590,436.18 971.5,436.18 971.5,436.18 C971.5,436.18 1353,436.18 1353,426.18" fill="none" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="142.2012" x="900.3994" y="451.1751">Mounted Volumes</text></g><g class="cluster" data-entity="models" data-source-line="23" data-uid="ent0018" id="cluster_models"><path d="M624.5,497.18 L687.4678,497.18 A3.75,3.75 0 0 1 689.9678,499.68 L696.9678,519.4769 L885.5,519.4769 A2.5,2.5 0 0 1 888,521.9769 L888,616.98 A2.5,2.5 0 0 1 885.5,619.48 L624.5,619.48 A2.5,2.5 0 0 1 622,616.98 L622,499.68 A2.5,2.5 0 0 1 624.5,497.18" fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="622" x2="696.9678" y1="519.4769" y2="519.4769"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="61.9678" x="626" y="512.1751">/models</text></g><g class="cluster" data-entity="results" data-source-line="27" data-uid="ent0021" id="cluster_results"><path d="M930.5,497.18 L991.1367,497.18 A3.75,3.75 0 0 1 993.6367,499.68 L1000.6367,519.4769 L1096.5,519.4769 A2.5,2.5 0 0 1 1099,521.9769 L1099,616.98 A2.5,2.5 0 0 1 1096.5,619.48 L930.5,619.48 A2.5,2.5 0 0 1 928,616.98 L928,499.68 A2.5,2.5 0 0 1 930.5,497.18" fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="928" x2="1000.6367" y1="519.4769" y2="519.4769"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="59.6367" x="932" y="512.1751">/results</text></g><g class="cluster" data-entity="config" data-source-line="30" data-uid="ent0023" id="cluster_config"><path d="M1141.5,497.18 L1196.4082,497.18 A3.75,3.75 0 0 1 1198.9082,499.68 L1205.9082,519.4769 L1318.5,519.4769 A2.5,2.5 0 0 1 1321,521.9769 L1321,616.98 A2.5,2.5 0 0 1 1318.5,619.48 L1141.5,619.48 A2.5,2.5 0 0 1 1139,616.98 L1139,499.68 A2.5,2.5 0 0 1 1141.5,497.18" fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="1139" x2="1205.9082" y1="519.4769" y2="519.4769"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="53.9082" x="1143" y="512.1751">/config</text></g><g class="entity" data-entity="API" data-source-line="3" data-uid="ent0003" id="entity_API"><rect fill="#F1F1F1" height="62.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="141.9238" x="408.04" y="60"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="529.9638" y="65"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="527.9638" y="67"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="527.9638" y="71"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101.9238" x="423.04" y="92.9951">FastAPI Server</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64.2373" x="423.04" y="109.292">(Uvicorn)</text></g><g class="entity" data-entity="GRPC" data-source-line="4" data-uid="ent0004" id="entity_GRPC"><rect fill="#F1F1F1" height="46.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="127.1924" x="240.4" y="68.14"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="347.5924" y="73.14"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="345.5924" y="75.14"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="345.5924" y="79.14"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87.1924" x="255.4" y="101.1351">gRPC Server</text></g><g class="entity" data-entity="Lifecycle" data-source-line="5" data-uid="ent0005" id="entity_Lifecycle"><rect fill="#F1F1F1" height="46.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="167.2305" x="180.38" y="306.89"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="327.6105" y="311.89"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="325.6105" y="313.89"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="325.6105" y="317.89"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127.2305" x="195.38" y="339.8851">Lifecycle Manager</text></g><g class="entity" data-entity="Queue" data-source-line="6" data-uid="ent0006" id="entity_Queue"><rect fill="#F1F1F1" height="46.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="156.5391" x="225.73" y="183.59"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="362.2691" y="188.59"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="360.2691" y="190.59"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="360.2691" y="194.59"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116.5391" x="240.73" y="216.5851">Inference Queue</text></g><g class="entity" data-entity="W1" data-source-line="9" data-uid="ent0008" id="entity_W1"><rect fill="#F1F1F1" height="62.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="103.998" x="46" y="546.03"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="129.998" y="551.03"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="127.998" y="553.03"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="127.998" y="557.03"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63.998" x="61" y="579.0251">Worker 1</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56.0615" x="61" y="595.322">Model A</text></g><g class="entity" data-entity="W2" data-source-line="10" data-uid="ent0009" id="entity_W2"><rect fill="#F1F1F1" height="62.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="103.998" x="185" y="546.03"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="268.998" y="551.03"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="266.998" y="553.03"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="266.998" y="557.03"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63.998" x="200" y="579.0251">Worker 2</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56.0889" x="200" y="595.322">Model B</text></g><g class="entity" data-entity="W3" data-source-line="11" data-uid="ent0010" id="entity_W3"><rect fill="#F1F1F1" height="62.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="103.998" x="324" y="546.03"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="407.998" y="551.03"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="405.998" y="553.03"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="405.998" y="557.03"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63.998" x="339" y="579.0251">Worker 3</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56.2598" x="339" y="595.322">Model C</text></g><g class="entity" data-entity="ma" data-source-line="24" data-uid="ent0019" id="entity_ma"><path d="M646.03,561.68 L646.03,592.9769 A2.5,2.5 0 0 0 648.53,595.4769 L725.4704,595.4769 A2.5,2.5 0 0 0 727.9704,592.9769 L727.9704,569.18 L717.9704,559.18 L648.53,559.18 A2.5,2.5 0 0 0 646.03,561.68" fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><path d="M717.9704,559.18 L717.9704,566.68 A2.5,2.5 0 0 0 720.4704,569.18 L727.9704,569.18" fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61.9404" x="656.03" y="582.1751">model-a/</text></g><g class="entity" data-entity="mb" data-source-line="25" data-uid="ent0020" id="entity_mb"><path d="M762.88,561.68 L762.88,592.9769 A2.5,2.5 0 0 0 765.38,595.4769 L842.628,595.4769 A2.5,2.5 0 0 0 845.128,592.9769 L845.128,569.18 L835.128,559.18 L765.38,559.18 A2.5,2.5 0 0 0 762.88,561.68" fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><path d="M835.128,559.18 L835.128,566.68 A2.5,2.5 0 0 0 837.628,569.18 L845.128,569.18" fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62.248" x="772.88" y="582.1751">model-b/</text></g><g class="entity" data-entity="r1" data-source-line="28" data-uid="ent0022" id="entity_r1"><path d="M951.89,561.68 L951.89,592.9769 A2.5,2.5 0 0 0 954.39,595.4769 L1053.6019,595.4769 A2.5,2.5 0 0 0 1056.1019,592.9769 L1056.1019,569.18 L1046.1019,559.18 L954.39,559.18 A2.5,2.5 0 0 0 951.89,561.68" fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><path d="M1046.1019,559.18 L1046.1019,566.68 A2.5,2.5 0 0 0 1048.6019,569.18 L1056.1019,569.18" fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84.2119" x="961.89" y="582.1751">job-123.png</text></g><g class="entity" data-entity="cfg" data-source-line="31" data-uid="ent0024" id="entity_cfg"><path d="M1162.66,561.68 L1162.66,592.9769 A2.5,2.5 0 0 0 1165.16,595.4769 L1274.8309,595.4769 A2.5,2.5 0 0 0 1277.3309,592.9769 L1277.3309,569.18 L1267.3309,559.18 L1165.16,559.18 A2.5,2.5 0 0 0 1162.66,561.68" fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><path d="M1267.3309,559.18 L1267.3309,566.68 A2.5,2.5 0 0 0 1269.8309,569.18 L1277.3309,569.18" fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94.6709" x="1172.66" y="582.1751">settings.yaml</text></g><g class="entity" data-entity="GMN30" data-source-line="42" data-uid="ent0031" id="entity_GMN30"><path d="M1369.18,549.63 L1369.18,605.0284 L1558.8245,605.0284 L1558.8245,559.63 L1548.8245,549.63 L1369.18,549.63" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1548.8245,549.63 L1548.8245,559.63 L1558.8245,559.63 L1548.8245,549.63" fill="#FEFFDD" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168.6445" x="1375.18" y="566.6969">Each worker is a separate</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159.9673" x="1375.18" y="581.8297">OS process with isolated</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96.5859" x="1375.18" y="596.9625">memory space</text></g><g class="link" data-entity-1="API" data-entity-2="Queue" data-link-type="dependency" data-source-line="14" data-uid="lnk11" id="link_API_Queue"><path d="M431.64,122.99 C402.39,141.96 370.5253,162.6172 343.9353,179.8472" fill="none" id="API-to-Queue" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="338.9,183.11,348.6281,181.5727,343.0961,180.391,344.2777,174.8589,338.9,183.11" style="stroke:#181818;stroke-width:1;"/></g><g class="link" data-entity-1="GRPC" data-entity-2="Queue" data-link-type="dependency" data-source-line="15" data-uid="lnk12" id="link_GRPC_Queue"><path d="M304,114.71 C304,134.59 304,157.5 304,177.37" fill="none" id="GRPC-to-Queue" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="304,183.37,308,174.37,304,178.37,300,174.37,304,183.37" style="stroke:#181818;stroke-width:1;"/></g><g class="link" data-entity-1="Queue" data-entity-2="Lifecycle" data-link-type="dependency" data-source-line="16" data-uid="lnk13" id="link_Queue_Lifecycle"><path d="M296.57,230.27 C289.39,252.06 280.4393,279.1819 273.2693,300.9219" fill="none" id="Queue-to-Lifecycle" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="271.39,306.62,278.0076,299.3257,272.9561,301.8716,270.4102,296.82,271.39,306.62" style="stroke:#181818;stroke-width:1;"/></g><g class="link" data-entity-1="Lifecycle" data-entity-2="W1" data-link-type="dependency" data-source-line="17" data-uid="lnk14" id="link_Lifecycle_W1"><path d="M227.86,353.52 C208.06,367.31 184.31,386.47 168,408.18 C136,450.79 117.4327,504.3764 107.3627,539.9864" fill="none" id="Lifecycle-to-W1" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="105.73,545.76,112.0281,538.1881,107.0906,540.9487,104.33,536.0112,105.73,545.76" style="stroke:#181818;stroke-width:1;"/></g><g class="link" data-entity-1="Lifecycle" data-entity-2="W2" data-link-type="dependency" data-source-line="18" data-uid="lnk15" id="link_Lifecycle_W2"><path d="M261.51,353.67 C256.64,397.91 246.5171,489.9061 241.0171,539.8261" fill="none" id="Lifecycle-to-W2" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="240.36,545.79,245.3216,537.2822,240.9076,540.8201,237.3697,536.4061,240.36,545.79" style="stroke:#181818;stroke-width:1;"/></g><g class="link" data-entity-1="Lifecycle" data-entity-2="W3" data-link-type="dependency" data-source-line="19" data-uid="lnk16" id="link_Lifecycle_W3"><path d="M347.86,335.14 C421.08,340.68 519.39,353.57 544,383.18 C594.27,443.68 499.9606,509.9383 433.7206,546.8683" fill="none" id="Lifecycle-to-W3" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="428.48,549.79,438.2887,548.9011,432.8471,547.3552,434.393,541.9137,428.48,549.79" style="stroke:#181818;stroke-width:1;"/></g><g class="link" data-entity-1="W1" data-entity-2="models" data-link-type="dependency" data-source-line="35" data-uid="lnk25" id="link_W1_models"><path d="M102.78,545.8 C110.03,510.32 127.52,454.31 168,428.62 C233.02,387.37 803.21,377.74 861,428.62 C884.835,449.605 890.2675,484.3625 889.4238,515 C889.3183,518.8297 889.1147,522.595 888.8368,526.261 C888.6979,528.094 888.5403,529.9022 888.3671,531.6811 C888.2805,532.5706 888.19,533.4528 888.096,534.3271 C888.0725,534.5457 888.7051,528.7998 888.6812,529.0174" fill="none" id="W1-to-models" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="888.0248,534.9814,892.9853,526.473,888.5718,530.0114,885.0333,525.5978,888.0248,534.9814" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="33.249" x="468.5" y="396.2469">Read</text></g><g class="link" data-entity-1="W2" data-entity-2="models" data-link-type="dependency" data-source-line="36" data-uid="lnk26" id="link_W2_models"><path d="M241.78,545.8 C249.03,510.32 266.52,454.31 307,428.62 C358.98,395.64 814.8,387.95 861,428.62 C884.835,449.605 890.2675,484.3625 889.4238,515 C889.3183,518.8297 889.1147,522.595 888.8368,526.261 C888.6979,528.094 888.5403,529.9022 888.3671,531.6811 C888.2805,532.5706 888.19,533.4528 888.096,534.3271 C888.0725,534.5457 888.7051,528.7998 888.6812,529.0174" fill="none" id="W2-to-models" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="888.0248,534.9814,892.9853,526.473,888.5718,530.0114,885.0333,525.5978,888.0248,534.9814" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="33.249" x="508.5" y="396.2469">Read</text></g><g class="link" data-entity-1="W3" data-entity-2="models" data-link-type="dependency" data-source-line="37" data-uid="lnk27" id="link_W3_models"><path d="M414.77,545.64 C462.16,509.14 546.41,451.29 630,428.62 C729.09,401.75 783.94,360.78 861,428.62 C884.835,449.605 890.2675,484.3625 889.4238,515 C889.3183,518.8297 889.1147,522.595 888.8368,526.261 C888.6979,528.094 888.5403,529.9022 888.3671,531.6811 C888.2805,532.5706 888.19,533.4528 888.096,534.3271 C888.0725,534.5457 888.7051,528.7998 888.6812,529.0174" fill="none" id="W3-to-models" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="888.0248,534.9814,892.9853,526.473,888.5718,530.0114,885.0333,525.5978,888.0248,534.9814" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="33.249" x="428.5" y="396.2469">Read</text></g><g class="link" data-entity-1="API" data-entity-2="results" data-link-type="dependency" data-source-line="38" data-uid="lnk28" id="link_API_results"><path d="M550.31,107.47 C678.66,138.88 946.85,224.04 1072,408.18 C1082.4025,423.4875 1088.8356,441.4444 1092.6231,459.8195 C1094.5169,469.0071 1095.7492,478.2993 1096.4856,487.4171 C1096.6697,489.6965 1096.8228,491.9651 1096.9475,494.2184 C1096.9787,494.7817 1097.0081,495.3441 1097.0358,495.9055 C1097.0496,496.1862 1096.7855,512.7699 1096.7985,513.05" fill="none" id="API-to-results" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="1097.076,519.0436,1100.6555,509.8683,1096.8448,514.049,1092.6641,510.2382,1097.076,519.0436" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="34.9058" x="941" y="272.9569">Write</text></g><g class="link" data-entity-1="API" data-entity-2="config" data-link-type="dependency" data-source-line="39" data-uid="lnk29" id="link_API_config"><path d="M550.44,95.16 C714.55,106.04 1117.79,158.21 1293,408.18 C1303.63,423.3475 1310.2394,441.2331 1314.1633,459.5805 C1316.1252,468.7541 1317.4158,478.0432 1318.2019,487.1657 C1318.3985,489.4463 1318.5635,491.7165 1318.6995,493.9719 C1318.7336,494.5358 1318.7658,495.0987 1318.7962,495.6606 C1318.8114,495.9416 1318.5197,512.527 1318.5341,512.8075" fill="none" id="API-to-config" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="1318.8406,518.7996,1322.3756,509.6071,1318.5852,513.8062,1314.3861,510.0157,1318.8406,518.7996" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="33.249" x="1157" y="272.9569">Read</text></g><g class="link" data-entity-1="W1" data-entity-2="GMN30" data-link-type="association" data-source-line="42" data-uid="lnk32" id="link_W1_GMN30"><path d="M100.76,545.74 C106.81,499 125.88,413.41 185.5,380.68 C240.34,350.58 1255.32,353.16 1311.5,380.68 C1383.66,416.04 1431.47,503.83 1452.22,549.19" fill="none" id="W1-GMN30" style="stroke:#181818;stroke-width:1;stroke-dasharray:7,7;"/></g></g></svg></div><div class="puml dark" style=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="DESCRIPTION" height="668px" preserveAspectRatio="xMidYMid meet" style="width:1565px;height:668px;background:#1B1B1B;" version="1.1" viewBox="0 0 1565 668" width="1565px" zoomAndPan="magnify" class="diagram"><defs/><g><rect fill="#1B1B1B" height="668" style="stroke:none;stroke-width:1;" width="1565" x="0" y="0"/><g class="cluster" data-entity="ModelMora Container" data-source-line="2" data-uid="ent0002" id="cluster_ModelMora Container"><path d="M8.5,6 L179.3047,6 A3.75,3.75 0 0 1 181.8047,8.5 L188.8047,28.2969 L563.5,28.2969 A2.5,2.5 0 0 1 566,30.7969 L566,646.13 A2.5,2.5 0 0 1 563.5,648.63 L8.5,648.63 A2.5,2.5 0 0 1 6,646.13 L6,8.5 A2.5,2.5 0 0 1 8.5,6" fill="none" style="stroke:#FFFFFF;stroke-width:1.5;"/><line style="stroke:#FFFFFF;stroke-width:1.5;" x1="6" x2="188.8047" y1="28.2969" y2="28.2969"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="169.8047" x="10" y="20.9951">ModelMora Container</text></g><g class="cluster" data-entity="Worker Process Pool" data-source-line="8" data-uid="ent0007" id="cluster_Worker Process Pool"><path d="M32.5,492.03 L196.4619,492.03 A3.75,3.75 0 0 1 198.9619,494.53 L205.9619,514.3269 L441.5,514.3269 A2.5,2.5 0 0 1 444,516.8269 L444,622.13 A2.5,2.5 0 0 1 441.5,624.63 L32.5,624.63 A2.5,2.5 0 0 1 30,622.13 L30,494.53 A2.5,2.5 0 0 1 32.5,492.03" fill="none" style="stroke:#FFFFFF;stroke-width:1.5;"/><line style="stroke:#FFFFFF;stroke-width:1.5;" x1="30" x2="205.9619" y1="514.3269" y2="514.3269"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="162.9619" x="34" y="507.0251">Worker Process Pool</text></g><g class="cluster" data-entity="Mounted Volumes" data-source-line="22" data-uid="ent0017" id="cluster_Mounted Volumes"><path d="M590,426.18 C590,416.18 971.5,416.18 971.5,416.18 C971.5,416.18 1353,416.18 1353,426.18 L1353,641.48 C1353,651.48 971.5,651.48 971.5,651.48 C971.5,651.48 590,651.48 590,641.48 L590,426.18" fill="none" style="stroke:#E7E7E7;stroke-width:1;"/><path d="M590,426.18 C590,436.18 971.5,436.18 971.5,436.18 C971.5,436.18 1353,436.18 1353,426.18" fill="none" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="142.2012" x="900.3994" y="451.1751">Mounted Volumes</text></g><g class="cluster" data-entity="models" data-source-line="23" data-uid="ent0018" id="cluster_models"><path d="M624.5,497.18 L687.4678,497.18 A3.75,3.75 0 0 1 689.9678,499.68 L696.9678,519.4769 L885.5,519.4769 A2.5,2.5 0 0 1 888,521.9769 L888,616.98 A2.5,2.5 0 0 1 885.5,619.48 L624.5,619.48 A2.5,2.5 0 0 1 622,616.98 L622,499.68 A2.5,2.5 0 0 1 624.5,497.18" fill="none" style="stroke:#FFFFFF;stroke-width:1.5;"/><line style="stroke:#FFFFFF;stroke-width:1.5;" x1="622" x2="696.9678" y1="519.4769" y2="519.4769"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="61.9678" x="626" y="512.1751">/models</text></g><g class="cluster" data-entity="results" data-source-line="27" data-uid="ent0021" id="cluster_results"><path d="M930.5,497.18 L991.1367,497.18 A3.75,3.75 0 0 1 993.6367,499.68 L1000.6367,519.4769 L1096.5,519.4769 A2.5,2.5 0 0 1 1099,521.9769 L1099,616.98 A2.5,2.5 0 0 1 1096.5,619.48 L930.5,619.48 A2.5,2.5 0 0 1 928,616.98 L928,499.68 A2.5,2.5 0 0 1 930.5,497.18" fill="none" style="stroke:#FFFFFF;stroke-width:1.5;"/><line style="stroke:#FFFFFF;stroke-width:1.5;" x1="928" x2="1000.6367" y1="519.4769" y2="519.4769"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="59.6367" x="932" y="512.1751">/results</text></g><g class="cluster" data-entity="config" data-source-line="30" data-uid="ent0023" id="cluster_config"><path d="M1141.5,497.18 L1196.4082,497.18 A3.75,3.75 0 0 1 1198.9082,499.68 L1205.9082,519.4769 L1318.5,519.4769 A2.5,2.5 0 0 1 1321,521.9769 L1321,616.98 A2.5,2.5 0 0 1 1318.5,619.48 L1141.5,619.48 A2.5,2.5 0 0 1 1139,616.98 L1139,499.68 A2.5,2.5 0 0 1 1141.5,497.18" fill="none" style="stroke:#FFFFFF;stroke-width:1.5;"/><line style="stroke:#FFFFFF;stroke-width:1.5;" x1="1139" x2="1205.9082" y1="519.4769" y2="519.4769"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="53.9082" x="1143" y="512.1751">/config</text></g><g class="entity" data-entity="API" data-source-line="3" data-uid="ent0003" id="entity_API"><rect fill="#313139" height="62.5938" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="141.9238" x="408.04" y="60"/><rect fill="#313139" height="10" style="stroke:#E7E7E7;stroke-width:0.5;" width="15" x="529.9638" y="65"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="527.9638" y="67"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="527.9638" y="71"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101.9238" x="423.04" y="92.9951">FastAPI Server</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64.2373" x="423.04" y="109.292">(Uvicorn)</text></g><g class="entity" data-entity="GRPC" data-source-line="4" data-uid="ent0004" id="entity_GRPC"><rect fill="#313139" height="46.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="127.1924" x="240.4" y="68.14"/><rect fill="#313139" height="10" style="stroke:#E7E7E7;stroke-width:0.5;" width="15" x="347.5924" y="73.14"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="345.5924" y="75.14"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="345.5924" y="79.14"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87.1924" x="255.4" y="101.1351">gRPC Server</text></g><g class="entity" data-entity="Lifecycle" data-source-line="5" data-uid="ent0005" id="entity_Lifecycle"><rect fill="#313139" height="46.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="167.2305" x="180.38" y="306.89"/><rect fill="#313139" height="10" style="stroke:#E7E7E7;stroke-width:0.5;" width="15" x="327.6105" y="311.89"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="325.6105" y="313.89"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="325.6105" y="317.89"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127.2305" x="195.38" y="339.8851">Lifecycle Manager</text></g><g class="entity" data-entity="Queue" data-source-line="6" data-uid="ent0006" id="entity_Queue"><rect fill="#313139" height="46.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="156.5391" x="225.73" y="183.59"/><rect fill="#313139" height="10" style="stroke:#E7E7E7;stroke-width:0.5;" width="15" x="362.2691" y="188.59"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="360.2691" y="190.59"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="360.2691" y="194.59"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116.5391" x="240.73" y="216.5851">Inference Queue</text></g><g class="entity" data-entity="W1" data-source-line="9" data-uid="ent0008" id="entity_W1"><rect fill="#313139" height="62.5938" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="103.998" x="46" y="546.03"/><rect fill="#313139" height="10" style="stroke:#E7E7E7;stroke-width:0.5;" width="15" x="129.998" y="551.03"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="127.998" y="553.03"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="127.998" y="557.03"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63.998" x="61" y="579.0251">Worker 1</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56.0615" x="61" y="595.322">Model A</text></g><g class="entity" data-entity="W2" data-source-line="10" data-uid="ent0009" id="entity_W2"><rect fill="#313139" height="62.5938" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="103.998" x="185" y="546.03"/><rect fill="#313139" height="10" style="stroke:#E7E7E7;stroke-width:0.5;" width="15" x="268.998" y="551.03"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="266.998" y="553.03"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="266.998" y="557.03"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63.998" x="200" y="579.0251">Worker 2</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56.0889" x="200" y="595.322">Model B</text></g><g class="entity" data-entity="W3" data-source-line="11" data-uid="ent0010" id="entity_W3"><rect fill="#313139" height="62.5938" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="103.998" x="324" y="546.03"/><rect fill="#313139" height="10" style="stroke:#E7E7E7;stroke-width:0.5;" width="15" x="407.998" y="551.03"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="405.998" y="553.03"/><rect fill="#313139" height="2" style="stroke:#E7E7E7;stroke-width:0.5;" width="4" x="405.998" y="557.03"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63.998" x="339" y="579.0251">Worker 3</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56.2598" x="339" y="595.322">Model C</text></g><g class="entity" data-entity="ma" data-source-line="24" data-uid="ent0019" id="entity_ma"><path d="M646.03,561.68 L646.03,592.9769 A2.5,2.5 0 0 0 648.53,595.4769 L725.4704,595.4769 A2.5,2.5 0 0 0 727.9704,592.9769 L727.9704,569.18 L717.9704,559.18 L648.53,559.18 A2.5,2.5 0 0 0 646.03,561.68" fill="#313139" style="stroke:#E7E7E7;stroke-width:0.5;"/><path d="M717.9704,559.18 L717.9704,566.68 A2.5,2.5 0 0 0 720.4704,569.18 L727.9704,569.18" fill="#313139" style="stroke:#E7E7E7;stroke-width:0.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61.9404" x="656.03" y="582.1751">model-a/</text></g><g class="entity" data-entity="mb" data-source-line="25" data-uid="ent0020" id="entity_mb"><path d="M762.88,561.68 L762.88,592.9769 A2.5,2.5 0 0 0 765.38,595.4769 L842.628,595.4769 A2.5,2.5 0 0 0 845.128,592.9769 L845.128,569.18 L835.128,559.18 L765.38,559.18 A2.5,2.5 0 0 0 762.88,561.68" fill="#313139" style="stroke:#E7E7E7;stroke-width:0.5;"/><path d="M835.128,559.18 L835.128,566.68 A2.5,2.5 0 0 0 837.628,569.18 L845.128,569.18" fill="#313139" style="stroke:#E7E7E7;stroke-width:0.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62.248" x="772.88" y="582.1751">model-b/</text></g><g class="entity" data-entity="r1" data-source-line="28" data-uid="ent0022" id="entity_r1"><path d="M951.89,561.68 L951.89,592.9769 A2.5,2.5 0 0 0 954.39,595.4769 L1053.6019,595.4769 A2.5,2.5 0 0 0 1056.1019,592.9769 L1056.1019,569.18 L1046.1019,559.18 L954.39,559.18 A2.5,2.5 0 0 0 951.89,561.68" fill="#313139" style="stroke:#E7E7E7;stroke-width:0.5;"/><path d="M1046.1019,559.18 L1046.1019,566.68 A2.5,2.5 0 0 0 1048.6019,569.18 L1056.1019,569.18" fill="#313139" style="stroke:#E7E7E7;stroke-width:0.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84.2119" x="961.89" y="582.1751">job-123.png</text></g><g class="entity" data-entity="cfg" data-source-line="31" data-uid="ent0024" id="entity_cfg"><path d="M1162.66,561.68 L1162.66,592.9769 A2.5,2.5 0 0 0 1165.16,595.4769 L1274.8309,595.4769 A2.5,2.5 0 0 0 1277.3309,592.9769 L1277.3309,569.18 L1267.3309,559.18 L1165.16,559.18 A2.5,2.5 0 0 0 1162.66,561.68" fill="#313139" style="stroke:#E7E7E7;stroke-width:0.5;"/><path d="M1267.3309,559.18 L1267.3309,566.68 A2.5,2.5 0 0 0 1269.8309,569.18 L1277.3309,569.18" fill="#313139" style="stroke:#E7E7E7;stroke-width:0.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94.6709" x="1172.66" y="582.1751">settings.yaml</text></g><g class="entity" data-entity="GMN30" data-source-line="42" data-uid="ent0031" id="entity_GMN30"><path d="M1369.18,549.63 L1369.18,605.0284 L1558.8245,605.0284 L1558.8245,559.63 L1548.8245,549.63 L1369.18,549.63" fill="#714137" style="stroke:#E7E7E7;stroke-width:0.5;"/><path d="M1548.8245,549.63 L1548.8245,559.63 L1558.8245,559.63 L1548.8245,549.63" fill="#714137" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168.6445" x="1375.18" y="566.6969">Each worker is a separate</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159.9673" x="1375.18" y="581.8297">OS process with isolated</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96.5859" x="1375.18" y="596.9625">memory space</text></g><g class="link" data-entity-1="API" data-entity-2="Queue" data-link-type="dependency" data-source-line="14" data-uid="lnk11" id="link_API_Queue"><path d="M431.64,122.99 C402.39,141.96 370.5253,162.6172 343.9353,179.8472" fill="none" id="API-to-Queue" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="338.9,183.11,348.6281,181.5727,343.0961,180.391,344.2777,174.8589,338.9,183.11" style="stroke:#E7E7E7;stroke-width:1;"/></g><g class="link" data-entity-1="GRPC" data-entity-2="Queue" data-link-type="dependency" data-source-line="15" data-uid="lnk12" id="link_GRPC_Queue"><path d="M304,114.71 C304,134.59 304,157.5 304,177.37" fill="none" id="GRPC-to-Queue" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="304,183.37,308,174.37,304,178.37,300,174.37,304,183.37" style="stroke:#E7E7E7;stroke-width:1;"/></g><g class="link" data-entity-1="Queue" data-entity-2="Lifecycle" data-link-type="dependency" data-source-line="16" data-uid="lnk13" id="link_Queue_Lifecycle"><path d="M296.57,230.27 C289.39,252.06 280.4393,279.1819 273.2693,300.9219" fill="none" id="Queue-to-Lifecycle" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="271.39,306.62,278.0076,299.3257,272.9561,301.8716,270.4102,296.82,271.39,306.62" style="stroke:#E7E7E7;stroke-width:1;"/></g><g class="link" data-entity-1="Lifecycle" data-entity-2="W1" data-link-type="dependency" data-source-line="17" data-uid="lnk14" id="link_Lifecycle_W1"><path d="M227.86,353.52 C208.06,367.31 184.31,386.47 168,408.18 C136,450.79 117.4327,504.3764 107.3627,539.9864" fill="none" id="Lifecycle-to-W1" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="105.73,545.76,112.0281,538.1881,107.0906,540.9487,104.33,536.0112,105.73,545.76" style="stroke:#E7E7E7;stroke-width:1;"/></g><g class="link" data-entity-1="Lifecycle" data-entity-2="W2" data-link-type="dependency" data-source-line="18" data-uid="lnk15" id="link_Lifecycle_W2"><path d="M261.51,353.67 C256.64,397.91 246.5171,489.9061 241.0171,539.8261" fill="none" id="Lifecycle-to-W2" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="240.36,545.79,245.3216,537.2822,240.9076,540.8201,237.3697,536.4061,240.36,545.79" style="stroke:#E7E7E7;stroke-width:1;"/></g><g class="link" data-entity-1="Lifecycle" data-entity-2="W3" data-link-type="dependency" data-source-line="19" data-uid="lnk16" id="link_Lifecycle_W3"><path d="M347.86,335.14 C421.08,340.68 519.39,353.57 544,383.18 C594.27,443.68 499.9606,509.9383 433.7206,546.8683" fill="none" id="Lifecycle-to-W3" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="428.48,549.79,438.2887,548.9011,432.8471,547.3552,434.393,541.9137,428.48,549.79" style="stroke:#E7E7E7;stroke-width:1;"/></g><g class="link" data-entity-1="W1" data-entity-2="models" data-link-type="dependency" data-source-line="35" data-uid="lnk25" id="link_W1_models"><path d="M102.78,545.8 C110.03,510.32 127.52,454.31 168,428.62 C233.02,387.37 803.21,377.74 861,428.62 C884.835,449.605 890.2675,484.3625 889.4238,515 C889.3183,518.8297 889.1147,522.595 888.8368,526.261 C888.6979,528.094 888.5403,529.9022 888.3671,531.6811 C888.2805,532.5706 888.19,533.4528 888.096,534.3271 C888.0725,534.5457 888.7051,528.7998 888.6812,529.0174" fill="none" id="W1-to-models" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="888.0248,534.9814,892.9853,526.473,888.5718,530.0114,885.0333,525.5978,888.0248,534.9814" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="33.249" x="468.5" y="396.2469">Read</text></g><g class="link" data-entity-1="W2" data-entity-2="models" data-link-type="dependency" data-source-line="36" data-uid="lnk26" id="link_W2_models"><path d="M241.78,545.8 C249.03,510.32 266.52,454.31 307,428.62 C358.98,395.64 814.8,387.95 861,428.62 C884.835,449.605 890.2675,484.3625 889.4238,515 C889.3183,518.8297 889.1147,522.595 888.8368,526.261 C888.6979,528.094 888.5403,529.9022 888.3671,531.6811 C888.2805,532.5706 888.19,533.4528 888.096,534.3271 C888.0725,534.5457 888.7051,528.7998 888.6812,529.0174" fill="none" id="W2-to-models" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="888.0248,534.9814,892.9853,526.473,888.5718,530.0114,885.0333,525.5978,888.0248,534.9814" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="33.249" x="508.5" y="396.2469">Read</text></g><g class="link" data-entity-1="W3" data-entity-2="models" data-link-type="dependency" data-source-line="37" data-uid="lnk27" id="link_W3_models"><path d="M414.77,545.64 C462.16,509.14 546.41,451.29 630,428.62 C729.09,401.75 783.94,360.78 861,428.62 C884.835,449.605 890.2675,484.3625 889.4238,515 C889.3183,518.8297 889.1147,522.595 888.8368,526.261 C888.6979,528.094 888.5403,529.9022 888.3671,531.6811 C888.2805,532.5706 888.19,533.4528 888.096,534.3271 C888.0725,534.5457 888.7051,528.7998 888.6812,529.0174" fill="none" id="W3-to-models" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="888.0248,534.9814,892.9853,526.473,888.5718,530.0114,885.0333,525.5978,888.0248,534.9814" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="33.249" x="428.5" y="396.2469">Read</text></g><g class="link" data-entity-1="API" data-entity-2="results" data-link-type="dependency" data-source-line="38" data-uid="lnk28" id="link_API_results"><path d="M550.31,107.47 C678.66,138.88 946.85,224.04 1072,408.18 C1082.4025,423.4875 1088.8356,441.4444 1092.6231,459.8195 C1094.5169,469.0071 1095.7492,478.2993 1096.4856,487.4171 C1096.6697,489.6965 1096.8228,491.9651 1096.9475,494.2184 C1096.9787,494.7817 1097.0081,495.3441 1097.0358,495.9055 C1097.0496,496.1862 1096.7855,512.7699 1096.7985,513.05" fill="none" id="API-to-results" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="1097.076,519.0436,1100.6555,509.8683,1096.8448,514.049,1092.6641,510.2382,1097.076,519.0436" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="34.9058" x="941" y="272.9569">Write</text></g><g class="link" data-entity-1="API" data-entity-2="config" data-link-type="dependency" data-source-line="39" data-uid="lnk29" id="link_API_config"><path d="M550.44,95.16 C714.55,106.04 1117.79,158.21 1293,408.18 C1303.63,423.3475 1310.2394,441.2331 1314.1633,459.5805 C1316.1252,468.7541 1317.4158,478.0432 1318.2019,487.1657 C1318.3985,489.4463 1318.5635,491.7165 1318.6995,493.9719 C1318.7336,494.5358 1318.7658,495.0987 1318.7962,495.6606 C1318.8114,495.9416 1318.5197,512.527 1318.5341,512.8075" fill="none" id="API-to-config" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="1318.8406,518.7996,1322.3756,509.6071,1318.5852,513.8062,1314.3861,510.0157,1318.8406,518.7996" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="33.249" x="1157" y="272.9569">Read</text></g><g class="link" data-entity-1="W1" data-entity-2="GMN30" data-link-type="association" data-source-line="42" data-uid="lnk32" id="link_W1_GMN30"><path d="M100.76,545.74 C106.81,499 125.88,413.41 185.5,380.68 C240.34,350.58 1255.32,353.16 1311.5,380.68 C1383.66,416.04 1431.47,503.83 1452.22,549.19" fill="none" id="W1-GMN30" style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:7,7;"/></g></g></svg></div></div>

<hr />
<h2 id="8-testing-strategy">8. Testing Strategy<a class="headerlink" href="#8-testing-strategy" title="Permanent link">&para;</a></h2>
<h3 id="81-test-pyramid">8.1 Test Pyramid<a class="headerlink" href="#81-test-pyramid" title="Permanent link">&para;</a></h3>
<p>Following TDD principles, ModelMora employs a comprehensive testing strategy:</p>
<pre><code class="language-text">                 /\
                /  \
               /E2E \           (~5% - End-to-End Tests)
              /------\
             /        \
            /Integration\      (~20% - Integration Tests)
           /------------\
          /              \
         /  Unit Tests    \   (~75% - Unit Tests)
        /------------------\
</code></pre>
<h3 id="82-unit-tests-75">8.2 Unit Tests (75%)<a class="headerlink" href="#82-unit-tests-75" title="Permanent link">&para;</a></h3>
<p><strong>Domain Layer Tests</strong> (100% coverage required):</p>
<ul>
<li>Entity behavior and invariants</li>
<li>Value object validation</li>
<li>Policy logic (LRU, priority, batching)</li>
<li>Domain service operations</li>
</ul>
<p><strong>Example</strong>:</p>
<pre><code class="language-python"># tests/unit/domain/lifecycle/test_lru_policy.py
def test_lru_policy_selects_least_recently_used_model():
    policy = LRUEvictionPolicy()
    models = [
        LoadedModel(&quot;model-a&quot;, last_accessed=now - timedelta(minutes=10)),
        LoadedModel(&quot;model-b&quot;, last_accessed=now - timedelta(minutes=5)),
        LoadedModel(&quot;model-c&quot;, last_accessed=now - timedelta(minutes=2)),
    ]

    to_evict = policy.select_model_to_evict(models)

    assert to_evict.model_id == &quot;model-a&quot;
</code></pre>
<h3 id="83-integration-tests-20">8.3 Integration Tests (20%)<a class="headerlink" href="#83-integration-tests-20" title="Permanent link">&para;</a></h3>
<p><strong>Application Layer Tests</strong>:</p>
<ul>
<li>Handler orchestration with mock repositories</li>
<li>Event publishing and handling</li>
<li>Cross-context interactions</li>
</ul>
<p><strong>Infrastructure Tests</strong>:</p>
<ul>
<li>Database operations (using TestContainers)</li>
<li>API endpoint integration</li>
<li>Worker process communication</li>
</ul>
<p><strong>Example</strong>:</p>
<pre><code class="language-python"># tests/integration/lifecycle/application/test_load_model_handler.py
@pytest.mark.integration
def test_load_model_downloads_and_spawns_worker(
    model_repository: IModelRepository,
    downloader: IModelDownloader,
    process_manager: IProcessManager
):
    handler = LoadModelHandler(model_repository, downloader, process_manager)

    result = handler.handle(LoadModelCommand(model_id=&quot;model-x&quot;))

    assert result.status == &quot;LOADED&quot;
    assert process_manager.is_running(&quot;model-x&quot;)
</code></pre>
<h3 id="84-end-to-end-tests-5">8.4 End-to-End Tests (5%)<a class="headerlink" href="#84-end-to-end-tests-5" title="Permanent link">&para;</a></h3>
<p><strong>System Tests</strong>:</p>
<ul>
<li>Full API workflows (REST and gRPC)</li>
<li>Multi-model concurrent inference</li>
<li>Performance benchmarks</li>
<li>Failure scenarios</li>
</ul>
<p><strong>Example</strong>:</p>
<pre><code class="language-python"># tests/e2e/test_inference_workflow.py
@pytest.mark.e2e
def test_complete_inference_workflow(api_client, test_model):
    # Register model
    response = api_client.post(&quot;/api/v1/models&quot;, json=test_model)
    assert response.status_code == 201

    # Submit inference
    response = api_client.post(
        f&quot;/api/v1/infer/{test_model['model_id']}&quot;,
        json={&quot;input_data&quot;: {&quot;text&quot;: &quot;test&quot;}}
    )
    assert response.status_code == 200
    assert &quot;embedding&quot; in response.json()
</code></pre>
<hr />
<h2 id="9-deployment-configuration">9. Deployment Configuration<a class="headerlink" href="#9-deployment-configuration" title="Permanent link">&para;</a></h2>
<h3 id="91-docker-compose-development">9.1 Docker Compose (Development)<a class="headerlink" href="#91-docker-compose-development" title="Permanent link">&para;</a></h3>
<pre><code class="language-yaml">services:
  modelmora:
    build: .
    ports:
      - &quot;8000:8000&quot;   # REST API
      - &quot;50051:50051&quot; # gRPC
    environment:
      - DATABASE_URL=postgresql://user:pass@db:5432/modelmora
      - MODEL_CACHE_DIR=/models
      - RESULT_STORAGE_TYPE=filesystem
      - RESULT_STORAGE_PATH=/results
      - LOG_LEVEL=INFO
    volumes:
      - model_cache:/models
      - results:/results
      - ./config:/app/config:ro
    depends_on:
      - db
    deploy:
      resources:
        limits:
          memory: 16G
          cpus: '8'
        reservations:
          devices:
            - driver: nvidia
              count: 1
              capabilities: [gpu]

  db:
    image: postgres:15
    environment:
      - POSTGRES_USER=user
      - POSTGRES_PASSWORD=pass
      - POSTGRES_DB=modelmora
    volumes:
      - postgres_data:/var/lib/postgresql/data

  prometheus:
    image: prom/prometheus:latest
    ports:
      - &quot;9090:9090&quot;
    volumes:
      - ./monitoring/prometheus.yml:/etc/prometheus/prometheus.yml

  grafana:
    image: grafana/grafana:latest
    ports:
      - &quot;3000:3000&quot;
    environment:
      - GF_SECURITY_ADMIN_PASSWORD=admin
    volumes:
      - grafana_data:/var/lib/grafana

volumes:
  model_cache:
  results:
  postgres_data:
  grafana_data:
</code></pre>
<h3 id="92-kubernetes-helm-values">9.2 Kubernetes Helm Values<a class="headerlink" href="#92-kubernetes-helm-values" title="Permanent link">&para;</a></h3>
<pre><code class="language-yaml"># values.yaml
replicaCount: 3

image:
  repository: modelmora/modelmora
  tag: &quot;1.0.0&quot;
  pullPolicy: IfNotPresent

service:
  type: ClusterIP
  restPort: 8000
  grpcPort: 50051

ingress:
  enabled: true
  className: nginx
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt-prod
  hosts:
    - host: modelmora.example.com
      paths:
        - path: /
          pathType: Prefix
  tls:
    - secretName: modelmora-tls
      hosts:
        - modelmora.example.com

resources:
  limits:
    memory: 16Gi
    cpu: 8
    nvidia.com/gpu: 1
  requests:
    memory: 8Gi
    cpu: 4
    nvidia.com/gpu: 1

autoscaling:
  enabled: true
  minReplicas: 2
  maxReplicas: 10
  targetCPUUtilizationPercentage: 70
  targetMemoryUtilizationPercentage: 80

persistence:
  modelCache:
    enabled: true
    storageClass: &quot;efs-sc&quot;
    accessMode: ReadWriteMany
    size: 500Gi

postgresql:
  enabled: true
  auth:
    database: modelmora
    username: modelmora
  primary:
    persistence:
      enabled: true
      size: 50Gi

redis:
  enabled: true
  architecture: standalone
  auth:
    enabled: false

s3:
  enabled: true
  bucket: modelmora-results
  region: us-east-1
  endpoint: https://s3.amazonaws.com

config:
  logLevel: INFO
  maxLoadedModels: 5
  memoryThresholdPercent: 90
  batchMaxSize: 32
  batchMaxWaitMs: 100
  resultExpirationDays: 7
</code></pre>
<hr />
<h2 id="10-security-architecture">10. Security Architecture<a class="headerlink" href="#10-security-architecture" title="Permanent link">&para;</a></h2>
<h3 id="101-security-layers">10.1 Security Layers<a class="headerlink" href="#101-security-layers" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Network Security</strong>:</li>
<li>TLS 1.3 for all external communications</li>
<li>gRPC with mutual TLS (mTLS) option</li>
<li>
<p>Network policies in Kubernetes</p>
</li>
<li>
<p><strong>Authentication &amp; Authorization</strong>:</p>
</li>
<li>API key authentication for REST endpoints</li>
<li>JWT tokens for user sessions (future)</li>
<li>
<p>Role-based access control (RBAC)</p>
</li>
<li>
<p><strong>Data Security</strong>:</p>
</li>
<li>Model checksum verification</li>
<li>Input validation and sanitization</li>
<li>
<p>Result encryption at rest (S3 SSE)</p>
</li>
<li>
<p><strong>Process Isolation</strong>:</p>
</li>
<li>Separate processes per model</li>
<li>Container security contexts (non-root user)</li>
<li>Resource limits and quotas</li>
</ol>
<h3 id="102-security-sequence">10.2 Security Sequence<a class="headerlink" href="#102-security-sequence" title="Permanent link">&para;</a></h3>
<div class='puml-container'><div class="puml light" style=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="577px" preserveAspectRatio="xMidYMid meet" style="width:915px;height:577px;background:#FFFFFF;" version="1.1" viewBox="0 0 915 577" width="915px" zoomAndPan="magnify" class="diagram"><defs/><g><g><title>API Gateway</title><rect fill="#F1F1F1" height="456.7266" style="stroke:#181818;stroke-width:1;" width="10" x="172.7275" y="67.4297"/></g><g><title>Auth Service</title><rect fill="#F1F1F1" height="71.2656" style="stroke:#181818;stroke-width:1;" width="10" x="340.0029" y="96.5625"/></g><g><title>ModelMora API</title><rect fill="#F1F1F1" height="298.0625" style="stroke:#181818;stroke-width:1;" width="10" x="480.3896" y="196.9609"/></g><g><title>Worker</title><rect fill="#F1F1F1" height="113.3984" style="stroke:#181818;stroke-width:1;" width="10" x="737.2832" y="310.3594"/></g><g><title>Client</title><rect fill="#000000" fill-opacity="0.00000" height="505.8594" width="8" x="28.2651" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="32" x2="32" y1="36.2969" y2="542.1563"/></g><g><title>API Gateway</title><rect fill="#000000" fill-opacity="0.00000" height="505.8594" width="8" x="173.7275" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="177.5059" x2="177.5059" y1="36.2969" y2="542.1563"/></g><g><title>Auth Service</title><rect fill="#000000" fill-opacity="0.00000" height="505.8594" width="8" x="341.0029" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="344.501" x2="344.501" y1="36.2969" y2="542.1563"/></g><g><title>ModelMora API</title><rect fill="#000000" fill-opacity="0.00000" height="505.8594" width="8" x="481.3896" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="484.5835" x2="484.5835" y1="36.2969" y2="542.1563"/></g><g><title>Worker</title><rect fill="#000000" fill-opacity="0.00000" height="505.8594" width="8" x="738.2832" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="741.9629" x2="741.9629" y1="36.2969" y2="542.1563"/></g><g class="participant participant-head" data-participant="Client"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="54.5303" x="5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40.5303" x="12" y="24.9951">Client</text></g><g class="participant participant-tail" data-participant="Client"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="54.5303" x="5" y="541.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40.5303" x="12" y="561.1514">Client</text></g><g class="participant participant-head" data-participant="Gateway"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="102.4434" x="126.5059" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88.4434" x="133.5059" y="24.9951">API Gateway</text></g><g class="participant participant-tail" data-participant="Gateway"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="102.4434" x="126.5059" y="541.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88.4434" x="133.5059" y="561.1514">API Gateway</text></g><g class="participant participant-head" data-participant="Auth"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="103.0039" x="293.501" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89.0039" x="300.501" y="24.9951">Auth Service</text></g><g class="participant participant-tail" data-participant="Auth"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="103.0039" x="293.501" y="541.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89.0039" x="300.501" y="561.1514">Auth Service</text></g><g class="participant participant-head" data-participant="API"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="117.6123" x="426.5835" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103.6123" x="433.5835" y="24.9951">ModelMora API</text></g><g class="participant participant-tail" data-participant="API"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="117.6123" x="426.5835" y="541.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103.6123" x="433.5835" y="561.1514">ModelMora API</text></g><g class="participant participant-head" data-participant="Worker"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="64.6406" x="709.9629" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50.6406" x="716.9629" y="24.9951">Worker</text></g><g class="participant participant-tail" data-participant="Worker"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="64.6406" x="709.9629" y="541.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50.6406" x="716.9629" y="561.1514">Worker</text></g><g><title>API Gateway</title><rect fill="#F1F1F1" height="456.7266" style="stroke:#181818;stroke-width:1;" width="10" x="172.7275" y="67.4297"/></g><g><title>Auth Service</title><rect fill="#F1F1F1" height="71.2656" style="stroke:#181818;stroke-width:1;" width="10" x="340.0029" y="96.5625"/></g><g><title>ModelMora API</title><rect fill="#F1F1F1" height="298.0625" style="stroke:#181818;stroke-width:1;" width="10" x="480.3896" y="196.9609"/></g><g><title>Worker</title><rect fill="#F1F1F1" height="113.3984" style="stroke:#181818;stroke-width:1;" width="10" x="737.2832" y="310.3594"/></g><g class="message" data-participant-1="Client" data-participant-2="Gateway"><polygon fill="#181818" points="160.7275,63.4297,170.7275,67.4297,160.7275,71.4297,164.7275,67.4297" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="32.2651" x2="166.7275" y1="67.4297" y2="67.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121.4624" x="39.2651" y="62.3638">Request + API Key</text></g><g class="message" data-participant-1="Gateway" data-participant-2="Auth"><polygon fill="#181818" points="328.0029,92.5625,338.0029,96.5625,328.0029,100.5625,332.0029,96.5625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="182.7275" x2="334.0029" y1="96.5625" y2="96.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106.4438" x="189.7275" y="91.4966">Validate API Key</text></g><g class="message" data-participant-1="Auth" data-participant-2="Auth"><line style="stroke:#181818;stroke-width:1;" x1="350.0029" x2="392.0029" y1="125.6953" y2="125.6953"/><line style="stroke:#181818;stroke-width:1;" x1="392.0029" x2="392.0029" y1="125.6953" y2="138.6953"/><line style="stroke:#181818;stroke-width:1;" x1="351.0029" x2="392.0029" y1="138.6953" y2="138.6953"/><polygon fill="#181818" points="361.0029,134.6953,351.0029,138.6953,361.0029,142.6953,357.0029,138.6953" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106.3867" x="357.0029" y="120.6294">Check key in DB</text></g><g class="message" data-participant-1="Auth" data-participant-2="Gateway"><polygon fill="#181818" points="193.7275,163.8281,183.7275,167.8281,193.7275,171.8281,189.7275,167.8281" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="187.7275" x2="344.0029" y1="167.8281" y2="167.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133.2754" x="199.7275" y="162.7622">Valid (user_id, roles)</text></g><g class="message" data-participant-1="Gateway" data-participant-2="API"><polygon fill="#181818" points="468.3896,192.9609,478.3896,196.9609,468.3896,200.9609,472.3896,196.9609" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="182.7275" x2="474.3896" y1="196.9609" y2="196.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="210.0439" x="189.7275" y="191.895">Forward request + user_context</text></g><g class="message" data-participant-1="API" data-participant-2="API"><line style="stroke:#181818;stroke-width:1;" x1="490.3896" x2="532.3896" y1="226.0938" y2="226.0938"/><line style="stroke:#181818;stroke-width:1;" x1="532.3896" x2="532.3896" y1="226.0938" y2="239.0938"/><line style="stroke:#181818;stroke-width:1;" x1="491.3896" x2="532.3896" y1="239.0938" y2="239.0938"/><polygon fill="#181818" points="501.3896,235.0938,491.3896,239.0938,501.3896,243.0938,497.3896,239.0938" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145.8882" x="497.3896" y="221.0278">Validate input schema</text></g><g class="message" data-participant-1="API" data-participant-2="API"><line style="stroke:#181818;stroke-width:1;" x1="490.3896" x2="532.3896" y1="268.2266" y2="268.2266"/><line style="stroke:#181818;stroke-width:1;" x1="532.3896" x2="532.3896" y1="268.2266" y2="281.2266"/><line style="stroke:#181818;stroke-width:1;" x1="491.3896" x2="532.3896" y1="281.2266" y2="281.2266"/><polygon fill="#181818" points="501.3896,277.2266,491.3896,281.2266,501.3896,285.2266,497.3896,281.2266" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180.4639" x="497.3896" y="263.1606">Check authorization (RBAC)</text></g><g class="message" data-participant-1="API" data-participant-2="Worker"><polygon fill="#181818" points="725.2832,306.3594,735.2832,310.3594,725.2832,314.3594,729.2832,310.3594" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="490.3896" x2="731.2832" y1="310.3594" y2="310.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="227.8936" x="497.3896" y="305.2935">Execute inference (sanitized input)</text></g><g class="message" data-participant-1="Worker" data-participant-2="Worker"><line style="stroke:#181818;stroke-width:1;" x1="747.2832" x2="789.2832" y1="339.4922" y2="339.4922"/><line style="stroke:#181818;stroke-width:1;" x1="789.2832" x2="789.2832" y1="339.4922" y2="352.4922"/><line style="stroke:#181818;stroke-width:1;" x1="748.2832" x2="789.2832" y1="352.4922" y2="352.4922"/><polygon fill="#181818" points="758.2832,348.4922,748.2832,352.4922,758.2832,356.4922,754.2832,352.4922" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153.7275" x="754.2832" y="334.4263">Validate input size/type</text></g><g class="message" data-participant-1="Worker" data-participant-2="Worker"><line style="stroke:#181818;stroke-width:1;" x1="747.2832" x2="789.2832" y1="381.625" y2="381.625"/><line style="stroke:#181818;stroke-width:1;" x1="789.2832" x2="789.2832" y1="381.625" y2="394.625"/><line style="stroke:#181818;stroke-width:1;" x1="748.2832" x2="789.2832" y1="394.625" y2="394.625"/><polygon fill="#181818" points="758.2832,390.625,748.2832,394.625,758.2832,398.625,754.2832,394.625" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127.6323" x="754.2832" y="376.5591">Execute in sandbox</text></g><g class="message" data-participant-1="Worker" data-participant-2="API"><polygon fill="#181818" points="501.3896,419.7578,491.3896,423.7578,501.3896,427.7578,497.3896,423.7578" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="495.3896" x2="741.2832" y1="423.7578" y2="423.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40.752" x="507.3896" y="418.6919">Result</text></g><g class="message" data-participant-1="API" data-participant-2="API"><line style="stroke:#181818;stroke-width:1;" x1="490.3896" x2="532.3896" y1="452.8906" y2="452.8906"/><line style="stroke:#181818;stroke-width:1;" x1="532.3896" x2="532.3896" y1="452.8906" y2="465.8906"/><line style="stroke:#181818;stroke-width:1;" x1="491.3896" x2="532.3896" y1="465.8906" y2="465.8906"/><polygon fill="#181818" points="501.3896,461.8906,491.3896,465.8906,501.3896,469.8906,497.3896,465.8906" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175.5762" x="497.3896" y="447.8247">Encrypt result (if sensitive)</text></g><g class="message" data-participant-1="API" data-participant-2="Gateway"><polygon fill="#181818" points="193.7275,491.0234,183.7275,495.0234,193.7275,499.0234,189.7275,495.0234" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="187.7275" x2="484.3896" y1="495.0234" y2="495.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="63.0195" x="199.7275" y="489.9575">Response</text></g><g class="message" data-participant-1="Gateway" data-participant-2="Client"><polygon fill="#181818" points="43.2651,520.1563,33.2651,524.1563,43.2651,528.1563,39.2651,524.1563" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="37.2651" x2="176.7275" y1="524.1563" y2="524.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="63.0195" x="49.2651" y="519.0903">Response</text></g></g></svg></div><div class="puml dark" style=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="577px" preserveAspectRatio="xMidYMid meet" style="width:915px;height:577px;background:#1B1B1B;" version="1.1" viewBox="0 0 915 577" width="915px" zoomAndPan="magnify" class="diagram"><defs/><g><rect fill="#1B1B1B" height="577" style="stroke:none;stroke-width:1;" width="915" x="0" y="0"/><g><title>API Gateway</title><rect fill="#313139" height="456.7266" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="172.7275" y="67.4297"/></g><g><title>Auth Service</title><rect fill="#313139" height="71.2656" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="340.0029" y="96.5625"/></g><g><title>ModelMora API</title><rect fill="#313139" height="298.0625" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="480.3896" y="196.9609"/></g><g><title>Worker</title><rect fill="#313139" height="113.3984" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="737.2832" y="310.3594"/></g><g><title>Client</title><rect fill="#000000" fill-opacity="0.00000" height="505.8594" width="8" x="28.2651" y="36.2969"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="32" x2="32" y1="36.2969" y2="542.1563"/></g><g><title>API Gateway</title><rect fill="#000000" fill-opacity="0.00000" height="505.8594" width="8" x="173.7275" y="36.2969"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="177.5059" x2="177.5059" y1="36.2969" y2="542.1563"/></g><g><title>Auth Service</title><rect fill="#000000" fill-opacity="0.00000" height="505.8594" width="8" x="341.0029" y="36.2969"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="344.501" x2="344.501" y1="36.2969" y2="542.1563"/></g><g><title>ModelMora API</title><rect fill="#000000" fill-opacity="0.00000" height="505.8594" width="8" x="481.3896" y="36.2969"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="484.5835" x2="484.5835" y1="36.2969" y2="542.1563"/></g><g><title>Worker</title><rect fill="#000000" fill-opacity="0.00000" height="505.8594" width="8" x="738.2832" y="36.2969"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5,5;" x1="741.9629" x2="741.9629" y1="36.2969" y2="542.1563"/></g><g class="participant participant-head" data-participant="Client"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="54.5303" x="5" y="5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40.5303" x="12" y="24.9951">Client</text></g><g class="participant participant-tail" data-participant="Client"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="54.5303" x="5" y="541.1563"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40.5303" x="12" y="561.1514">Client</text></g><g class="participant participant-head" data-participant="Gateway"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="102.4434" x="126.5059" y="5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88.4434" x="133.5059" y="24.9951">API Gateway</text></g><g class="participant participant-tail" data-participant="Gateway"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="102.4434" x="126.5059" y="541.1563"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88.4434" x="133.5059" y="561.1514">API Gateway</text></g><g class="participant participant-head" data-participant="Auth"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="103.0039" x="293.501" y="5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89.0039" x="300.501" y="24.9951">Auth Service</text></g><g class="participant participant-tail" data-participant="Auth"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="103.0039" x="293.501" y="541.1563"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89.0039" x="300.501" y="561.1514">Auth Service</text></g><g class="participant participant-head" data-participant="API"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="117.6123" x="426.5835" y="5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103.6123" x="433.5835" y="24.9951">ModelMora API</text></g><g class="participant participant-tail" data-participant="API"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="117.6123" x="426.5835" y="541.1563"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103.6123" x="433.5835" y="561.1514">ModelMora API</text></g><g class="participant participant-head" data-participant="Worker"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="64.6406" x="709.9629" y="5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50.6406" x="716.9629" y="24.9951">Worker</text></g><g class="participant participant-tail" data-participant="Worker"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="64.6406" x="709.9629" y="541.1563"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50.6406" x="716.9629" y="561.1514">Worker</text></g><g><title>API Gateway</title><rect fill="#313139" height="456.7266" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="172.7275" y="67.4297"/></g><g><title>Auth Service</title><rect fill="#313139" height="71.2656" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="340.0029" y="96.5625"/></g><g><title>ModelMora API</title><rect fill="#313139" height="298.0625" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="480.3896" y="196.9609"/></g><g><title>Worker</title><rect fill="#313139" height="113.3984" style="stroke:#E7E7E7;stroke-width:1;" width="10" x="737.2832" y="310.3594"/></g><g class="message" data-participant-1="Client" data-participant-2="Gateway"><polygon fill="#E7E7E7" points="160.7275,63.4297,170.7275,67.4297,160.7275,71.4297,164.7275,67.4297" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="32.2651" x2="166.7275" y1="67.4297" y2="67.4297"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121.4624" x="39.2651" y="62.3638">Request + API Key</text></g><g class="message" data-participant-1="Gateway" data-participant-2="Auth"><polygon fill="#E7E7E7" points="328.0029,92.5625,338.0029,96.5625,328.0029,100.5625,332.0029,96.5625" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="182.7275" x2="334.0029" y1="96.5625" y2="96.5625"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106.4438" x="189.7275" y="91.4966">Validate API Key</text></g><g class="message" data-participant-1="Auth" data-participant-2="Auth"><line style="stroke:#E7E7E7;stroke-width:1;" x1="350.0029" x2="392.0029" y1="125.6953" y2="125.6953"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="392.0029" x2="392.0029" y1="125.6953" y2="138.6953"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="351.0029" x2="392.0029" y1="138.6953" y2="138.6953"/><polygon fill="#E7E7E7" points="361.0029,134.6953,351.0029,138.6953,361.0029,142.6953,357.0029,138.6953" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106.3867" x="357.0029" y="120.6294">Check key in DB</text></g><g class="message" data-participant-1="Auth" data-participant-2="Gateway"><polygon fill="#E7E7E7" points="193.7275,163.8281,183.7275,167.8281,193.7275,171.8281,189.7275,167.8281" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="187.7275" x2="344.0029" y1="167.8281" y2="167.8281"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133.2754" x="199.7275" y="162.7622">Valid (user_id, roles)</text></g><g class="message" data-participant-1="Gateway" data-participant-2="API"><polygon fill="#E7E7E7" points="468.3896,192.9609,478.3896,196.9609,468.3896,200.9609,472.3896,196.9609" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="182.7275" x2="474.3896" y1="196.9609" y2="196.9609"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="210.0439" x="189.7275" y="191.895">Forward request + user_context</text></g><g class="message" data-participant-1="API" data-participant-2="API"><line style="stroke:#E7E7E7;stroke-width:1;" x1="490.3896" x2="532.3896" y1="226.0938" y2="226.0938"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="532.3896" x2="532.3896" y1="226.0938" y2="239.0938"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="491.3896" x2="532.3896" y1="239.0938" y2="239.0938"/><polygon fill="#E7E7E7" points="501.3896,235.0938,491.3896,239.0938,501.3896,243.0938,497.3896,239.0938" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145.8882" x="497.3896" y="221.0278">Validate input schema</text></g><g class="message" data-participant-1="API" data-participant-2="API"><line style="stroke:#E7E7E7;stroke-width:1;" x1="490.3896" x2="532.3896" y1="268.2266" y2="268.2266"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="532.3896" x2="532.3896" y1="268.2266" y2="281.2266"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="491.3896" x2="532.3896" y1="281.2266" y2="281.2266"/><polygon fill="#E7E7E7" points="501.3896,277.2266,491.3896,281.2266,501.3896,285.2266,497.3896,281.2266" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180.4639" x="497.3896" y="263.1606">Check authorization (RBAC)</text></g><g class="message" data-participant-1="API" data-participant-2="Worker"><polygon fill="#E7E7E7" points="725.2832,306.3594,735.2832,310.3594,725.2832,314.3594,729.2832,310.3594" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="490.3896" x2="731.2832" y1="310.3594" y2="310.3594"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="227.8936" x="497.3896" y="305.2935">Execute inference (sanitized input)</text></g><g class="message" data-participant-1="Worker" data-participant-2="Worker"><line style="stroke:#E7E7E7;stroke-width:1;" x1="747.2832" x2="789.2832" y1="339.4922" y2="339.4922"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="789.2832" x2="789.2832" y1="339.4922" y2="352.4922"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="748.2832" x2="789.2832" y1="352.4922" y2="352.4922"/><polygon fill="#E7E7E7" points="758.2832,348.4922,748.2832,352.4922,758.2832,356.4922,754.2832,352.4922" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153.7275" x="754.2832" y="334.4263">Validate input size/type</text></g><g class="message" data-participant-1="Worker" data-participant-2="Worker"><line style="stroke:#E7E7E7;stroke-width:1;" x1="747.2832" x2="789.2832" y1="381.625" y2="381.625"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="789.2832" x2="789.2832" y1="381.625" y2="394.625"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="748.2832" x2="789.2832" y1="394.625" y2="394.625"/><polygon fill="#E7E7E7" points="758.2832,390.625,748.2832,394.625,758.2832,398.625,754.2832,394.625" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127.6323" x="754.2832" y="376.5591">Execute in sandbox</text></g><g class="message" data-participant-1="Worker" data-participant-2="API"><polygon fill="#E7E7E7" points="501.3896,419.7578,491.3896,423.7578,501.3896,427.7578,497.3896,423.7578" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="495.3896" x2="741.2832" y1="423.7578" y2="423.7578"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40.752" x="507.3896" y="418.6919">Result</text></g><g class="message" data-participant-1="API" data-participant-2="API"><line style="stroke:#E7E7E7;stroke-width:1;" x1="490.3896" x2="532.3896" y1="452.8906" y2="452.8906"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="532.3896" x2="532.3896" y1="452.8906" y2="465.8906"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="491.3896" x2="532.3896" y1="465.8906" y2="465.8906"/><polygon fill="#E7E7E7" points="501.3896,461.8906,491.3896,465.8906,501.3896,469.8906,497.3896,465.8906" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175.5762" x="497.3896" y="447.8247">Encrypt result (if sensitive)</text></g><g class="message" data-participant-1="API" data-participant-2="Gateway"><polygon fill="#E7E7E7" points="193.7275,491.0234,183.7275,495.0234,193.7275,499.0234,189.7275,495.0234" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="187.7275" x2="484.3896" y1="495.0234" y2="495.0234"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="63.0195" x="199.7275" y="489.9575">Response</text></g><g class="message" data-participant-1="Gateway" data-participant-2="Client"><polygon fill="#E7E7E7" points="43.2651,520.1563,33.2651,524.1563,43.2651,528.1563,39.2651,524.1563" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2,2;" x1="37.2651" x2="176.7275" y1="524.1563" y2="524.1563"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="63.0195" x="49.2651" y="519.0903">Response</text></g></g></svg></div></div>

<hr />
<h2 id="11-performance-considerations">11. Performance Considerations<a class="headerlink" href="#11-performance-considerations" title="Permanent link">&para;</a></h2>
<h3 id="111-optimization-strategies">11.1 Optimization Strategies<a class="headerlink" href="#111-optimization-strategies" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Batching</strong>: Accumulate requests to maximize GPU utilization</li>
<li><strong>Lazy Loading</strong>: Load models only when needed</li>
<li><strong>Connection Pooling</strong>: Reuse database connections</li>
<li><strong>Result Caching</strong>: Cache frequently requested results (future)</li>
<li><strong>Async Processing</strong>: Non-blocking request handling</li>
<li><strong>Process Pooling</strong>: Reuse worker processes when possible</li>
</ol>
<h3 id="112-resource-management">11.2 Resource Management<a class="headerlink" href="#112-resource-management" title="Permanent link">&para;</a></h3>
<pre><code class="language-text">Memory Budget (16GB container):
- Base System: 2GB
- FastAPI/gRPC: 1GB
- PostgreSQL Client: 0.5GB
- Model Cache Overhead: 0.5GB
- Available for Models: 12GB

GPU Budget (24GB VRAM):
- Model A (7B params): ~14GB
- Model B (embedding): ~2GB
- Model C (small): ~1GB
- Buffer: 7GB
</code></pre>
<hr />
<h2 id="12-monitoring-observability">12. Monitoring &amp; Observability<a class="headerlink" href="#12-monitoring-observability" title="Permanent link">&para;</a></h2>
<h3 id="121-key-metrics">12.1 Key Metrics<a class="headerlink" href="#121-key-metrics" title="Permanent link">&para;</a></h3>
<p><strong>System Metrics</strong>:</p>
<ul>
<li>CPU usage per pod</li>
<li>Memory usage per pod</li>
<li>GPU utilization and VRAM</li>
<li>Disk I/O for model cache</li>
</ul>
<p><strong>Application Metrics</strong>:</p>
<ul>
<li>Request latency (p50, p95, p99)</li>
<li>Throughput (requests/second)</li>
<li>Error rate by endpoint</li>
<li>Queue depth by priority</li>
</ul>
<p><strong>Business Metrics</strong>:</p>
<ul>
<li>Models loaded count</li>
<li>Total inference requests</li>
<li>Average batch size</li>
<li>Model load/unload frequency</li>
</ul>
<h3 id="122-alerting-rules">12.2 Alerting Rules<a class="headerlink" href="#122-alerting-rules" title="Permanent link">&para;</a></h3>
<pre><code class="language-yaml">groups:
  - name: modelmora_alerts
    rules:
      - alert: HighErrorRate
        expr: rate(modelmora_requests_failed_total[5m]) &gt; 0.05
        annotations:
          summary: &quot;High error rate detected&quot;

      - alert: HighMemoryUsage
        expr: modelmora_memory_usage_percent &gt; 90
        annotations:
          summary: &quot;Memory usage above 90%&quot;

      - alert: ModelLoadFailure
        expr: increase(modelmora_model_load_failed_total[5m]) &gt; 3
        annotations:
          summary: &quot;Multiple model load failures&quot;
</code></pre>
<hr />
<h2 id="13-evolution-future-architecture">13. Evolution &amp; Future Architecture<a class="headerlink" href="#13-evolution-future-architecture" title="Permanent link">&para;</a></h2>
<h3 id="131-planned-enhancements">13.1 Planned Enhancements<a class="headerlink" href="#131-planned-enhancements" title="Permanent link">&para;</a></h3>
<p><strong>Phase 1 (Current)</strong>:</p>
<ul>
<li>Single-node deployment</li>
<li>Basic multi-process isolation</li>
<li>REST + gRPC APIs</li>
</ul>
<p><strong>Phase 2 (6 months)</strong>:</p>
<ul>
<li>Kubernetes multi-node</li>
<li>Redis-based distributed queue</li>
<li>Horizontal scaling</li>
</ul>
<p><strong>Phase 3 (12 months)</strong>:</p>
<ul>
<li>Model A/B testing</li>
<li>Advanced caching layer</li>
<li>ONNX Runtime support</li>
<li>TensorRT optimization</li>
</ul>
<p><strong>Phase 4 (18 months)</strong>:</p>
<ul>
<li>Multi-tenant isolation</li>
<li>Fine-tuning pipeline</li>
<li>Model marketplace</li>
<li>Advanced monitoring</li>
</ul>
<h3 id="132-architectural-flexibility">13.2 Architectural Flexibility<a class="headerlink" href="#132-architectural-flexibility" title="Permanent link">&para;</a></h3>
<p>The hexagonal architecture allows easy evolution:</p>
<ul>
<li>Swap PostgreSQL â MongoDB (implement new adapter)</li>
<li>Add Kafka â Create new infrastructure adapter</li>
<li>Support ONNX â Add new domain service</li>
<li>New API protocol â Add presentation adapter</li>
</ul>
<hr />
<h2 id="14-revision-history">14. Revision History<a class="headerlink" href="#14-revision-history" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th>Version</th>
<th>Date</th>
<th>Author</th>
<th>Changes</th>
</tr>
</thead>
<tbody>
<tr>
<td>1.0.0</td>
<td>2025-12-04</td>
<td>-</td>
<td>Initial architecture document with DDD, Hexagonal, and deployment diagrams</td>
</tr>
</tbody>
</table>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/JomarJunior/modelmora" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.sections", "navigation.expand", "navigation.top", "search.suggest", "search.highlight", "content.code.copy", "content.code.annotate"], "search": "../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
        <script src="../assets/mkdocs_puml/puml.js"></script>
      
        <script src="https://unpkg.com/@panzoom/panzoom@4.5.1/dist/panzoom.min.js"></script>
      
        <script src="../assets/mkdocs_puml/interaction.js"></script>
      
    
  </body>
</html>